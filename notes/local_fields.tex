\documentclass[a4paper]{article}
\title{Part III Local Fields}
\author{Based on lectures by Dr C. Johansson}
\date{Michaelmas 2016\\University of Cambridge}
\usepackage{mathtools}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{textcomp}
\usepackage{enumitem}
\usepackage{graphicx}
\usepackage{tikz-cd}
\usepackage{enumitem}
\newtheorem{definition}{Definition}
\newtheorem*{definitionnn}{Definition}
\newtheorem{lemma}[definition]{Lemma}
\newtheorem{theorem}[definition]{Theorem}
\newtheorem{prop}[definition]{Proposition}
\newtheorem{corollary}[definition]{Corollary}
\renewcommand{\baselinestretch}{1.3}
\newcommand*\conj[1]{\overline{#1}}
\newcommand*\dom[1]{\textnormal{dom}\,#1}
\newcommand*\cod[1]{\textnormal{cod}\,#1}
\newcommand*\ob[1]{\textnormal{ob}\,#1}
\newcommand*\mor[1]{\textnormal{mor}\,#1}
\newcommand*\abs[1]{\left|#1\right|}
\newcommand*\norm[1]{\abs{\abs{#1}}}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Frac}{Frac}
\DeclareMathOperator{\characteristic}{char}
\begin{document}
\maketitle
\tableofcontents

\section{Basic Theory}
\begin{definition}[Absolute value]
	Let $K$ be a field. An \textbf{absolute value} on $K$ is a function $\abs{\cdot}:K\to\mathbb{R}_{\geq 0}$ s.t.
	\begin{enumerate}[label=\roman*.]
		\item $\abs{x}=0 \iff x=0$
		\item $\abs{xy}=\abs{x}\abs{y} \quad \forall x,y \in K$
		\item $\abs{x+y} \leq \abs{x} + \abs{y}$
	\end{enumerate}
\end{definition}

\begin{definition}[Valued field]
	A \textbf{valued field} is a field with an absolute value.
\end{definition}

\begin{definition}[Equivalence of absolute values]
	Let $K$ be a field and let $\abs{\cdot}$, $\abs{\cdot}^{'}$ be absolute values on K. We say that $\abs{\cdot}$ and $\abs{\cdot}^{'}$ are \textbf{equivalent} if the associated metrics induce the same topology.
\end{definition}
\setcounter{definition}{5}
\begin{definition}[Non-archimedean absolute value]
	An absolute value $\abs{\cdot}$ on a field $K$ is called \textbf{non-archimedean} if $\abs{x+y}\leq\max(\abs{x},\abs{y})$ (the \textbf{strong triangle inequality}).
	
	Metrics s.t. $d(x,z)\leq\max(d(x,y),d(y,z))$ are called \textbf{ultrametrics}.
\end{definition}

Assumption: unless otherwise mentioned, all absolute values will be non-archimedean. These metrics are weird!

\begin{prop}
	Let $K$ be a valued field. Then $\mathcal{O}=\{x \,|\, \abs{x}\leq 1\}$ is an open subring of $K$, called the \textbf{valuation ring} of K. $\forall r \in (0,1]$, $\{x \,|\, x < r\}$ and $\{x \,|\, x \leq r\}$ are open ideals of $\mathcal{O}$.
	
	Moreover, $\mathcal{O}^x = \{x \,|\, \abs{x}=1\}$.
\end{prop}

\begin{prop}
	Let $K$ be a valued field.
	\begin{enumerate}[label=\roman*.]
		\item Let $(x_n)$ be a sequence in $K$. If $x_n - x_{n+1} \to 0$ then $(x_n)$ is Cauchy
	\end{enumerate}
	Assume that $K$ is complete
	\begin{enumerate}[label=\roman*.]
		\setcounter{enumi}{1}
		\item Let $(x_n)$ be a sequence in $K$. If $x_n - x_{n+1} \to 0$ then $(x_n)$ converges
		\item Let $\sum_{n=0}^{\infty}y_n$ be a series in $K$. If $y_n\to0$, then $\sum_{n=0}^{\infty}y_n$ converges
	\end{enumerate}
\end{prop}

\begin{definition}
	Let $R \subseteq S$ be rings. Then $s \in S$ is \textbf{integral over R} if $\exists$ monic $f(x) \in R[x]$ s.t. $f(s)=0$.
\end{definition}

\begin{prop}
	Let $R \subseteq S$ be rings. Then $s_1, \dots,s_n\in S$ are all integral over $R \iff R[s_1,\dots,s_n] \subseteq S$ is a finitely generated $R$-module.
\end{prop}

\begin{corollary}
	let $R \subseteq S$ be rings. If $s_1, s_2 \in S$ are integral over $R$, then $s_1+s_2$ and $s_1s_2$ are integral over $R$. In particular, the set $\tilde{R}\subseteq S$ of all elements in $S$ integral over $R$ is a ring, called the \textbf{integral closure} of $R$ in $S$.
\end{corollary}

\begin{definition}
	Let $R$ be a ring. A topology on $R$ is called a \textbf{ring topology} on $R$ if addition and multiplication are continuous maps $R\times R\to R$. A ring with a ring topology is called a \textbf{topological ring}.
\end{definition}

\begin{definition}
	Let $R$ be a ring, $I \subseteq R$ an ideal. A subset $U \subseteq R$ is called \linebreak \textbf{I-adically open} if $\forall x \in U$ $\exists n \geq 1$ s.t. $x + I^n \subseteq U$.
\end{definition}

\begin{prop}
	The set of all $I$-adically open sets form a topology on $R$, called the \textbf{I-adic topology}.
\end{prop}

\begin{definition}
	Let $R_1, R_2, \dots$ be topological rings with continuous homomorphisms $f_n:R_{n+1}\to R_n$ $\forall n \geq 1$. The \textbf{inverse limit} of the $R_i$ is the ring
	\begin{align*}
		\varprojlim_n R_n &= \left\{(x_n) \in \prod_n R_n \,|\, f_n(x_{n+1})=x_n \forall n \geq 1  \right\}\\
		&\subseteq \prod_n R_n
	\end{align*}
\end{definition}

\begin{prop}
	The inverse limit topology is a ring topology.
\end{prop}

\begin{definition}
	Let $R$ be a ring, $I$ an ideal. The \textbf{I-adic completion} of $R$ is the topological ring $\varprojlim_n R/I^n$ ($R/I^n$ has the discrete topology, and $R/I^{n+1} \to R/I^{n}$ is the natural map).
	
	There exists a map $\nu: R \to \varprojlim R/I^n$, $r \mapsto (r \mod I^n)_n$ This map is a continuous ring homomorphism when $R$ is given the $I$-adic topology. We say that $R$ is \textbf{I-adically complete} if $\nu$ is a bijection.
	
	If $I=xR$ then we often call the $I$-adic topology the \textbf{x-adic topology}.
\end{definition}

\subsection{The p-adic Numbers}
Let $p$ be a prime number throughout.

If $x \in \mathbb{Q} \backslash \{0\}$ then $\exists!$ representation $x=p^n \frac{a}{b}$, where $n \in \mathbb{Z}$, $a \in \mathbb{Z}$, $b \in \mathbb{Z}_{>0}$ and $(a,p)=(b,p)=(a,b)=1$.

We define the \textbf{p-adic absolute value} on $\mathbb{Q}$ to be the function $\abs{\cdot}_p: \mathbb{Q} \to \mathbb{R}_{\geq 0}$ given by
\begin{align*}
	\abs{x}_p =
	\begin{cases}
	0 &\text{if } x=0\\
	p^{-n}  &\text{if } x=p^n \frac{a}{b}\ (\neq 0) \text{ as before}
	\end{cases}
\end{align*}
Then $\abs{\cdot}_p$ is an absolute value.

\begin{definition}
	The \textbf{p-adic numbers} $\mathbb{Q}_p$ are the completion of $\mathbb{Q}$ w.r.t. $\abs{\cdot}_p$.
	
	The valuation ring $\mathbb{Z}_p = \{x \in \mathbb{Q}_p \,|\, \abs{x}_p \leq 1 \}$ is called the \textbf{p-adic integers}.
\end{definition}

\begin{prop}
	$\mathbb{Z}_p$ is the closure of $\mathbb{Z}$ inside $\mathbb{Q}_p$.
\end{prop}

\begin{prop}
	The non-zero ideals of $\mathbb{Z}_p$ are $p_n\mathbb{Z}_p$ for $n \geq 0$. Moreover, $\mathbb{Z}/p^n\mathbb{Z} \cong \mathbb{Z}_p/p^n\mathbb{Z}_p$
\end{prop}

\begin{corollary}
	$\mathbb{Z}_p$ is a PID with a unique prime element $p$ (up to units).
\end{corollary}

\begin{prop}
	The topology on $\mathbb{Z}$ induced by $\abs{\cdot}_p$ is the $p$-adic topology.
\end{prop}

\begin{prop}
	$\mathbb{Z}_p$ is $p$-adically complete and is (isomorphic to) the $p$-adic completion of $\mathbb{Z}$.
\end{prop}

\begin{corollary}
	Every $a \in \mathbb{Z}_p$ has a unique expansion $$a = \sum_{i=0}^\infty a_ip^i$$ with $a_i \in \{0, 1, \dots, p-1\}$
	
	Every $a \in \mathbb{Q}_p^\times$ has a unique expansion $$a = \sum_{i=n}{\infty}a_ip^i$$ $n \in \mathbb{Z}$, $n = -\log_p\abs{a}_p$, $a_n \neq 0$.
\end{corollary}

\subsection{Valued Fields}
\begin{definition}
	Let $K$ be a field. A \textbf{valuation} on K is a function $v : K \to \mathbb{R} \cup \{\infty\}$ s.t.
	\begin{enumerate}[label=\roman*.]
		\item $v(x) = \infty \iff x = 0$
		\item $v(xy) = v(x)+v(y)$
		\item $v(x+y) \geq \min(v(x), v(y))$
	\end{enumerate}
	$\forall x, y \in K$.
\end{definition}

Here we use the conventions $r+\infty = \infty$, $r \leq \infty\ \forall r \in \mathbb{R} \cup \{\infty\}$. $v$ a valuation $\implies \text{ if } \abs{x} = c^{-v(x)},\, c \in \mathbb{R}_{>1}$, then $\abs{\cdot}$ is an absolute value. Conversely, if $\abs{\cdot}$ is an absolute value then $v(x)=-\log_c\abs{x}$.

Let $K$ be a valued field.
\begin{itemize}
	\item $\mathcal{O} = \mathcal{O}_K = \{x \in K \,|\, \abs{x} \leq 1\}$ is the \textbf{valuation ring}
	\item $\mathfrak{m} = \mathfrak{m}_K = \{x \in K \,|\, \abs{x} < 1\}$ is the \textbf{maximal ideal}
	\item $k = k_K = \mathcal{O}/\mathfrak{m}$ is the \textbf{residue field}
\end{itemize}

If $K$ is a valued field and $F(x)=a_0 + a_1 x + \dots + a_n x^n \in K[x]$ is a polynomial, we say that F is \textbf{primitive} if $\max_i \abs{a_i} = 1$ ($\implies F \in \mathcal{O}[x]$).

\begin{theorem}[Hensel's Lemma]
	Assume that $K$ is complete and that $F \in K[x]$ is primitive. Put $f = F \mod \mathfrak{m} \in k[x]$. If $\exists$ factorisation $f(x)=g(x)h(x)$ with $(g,h)=1$, then $\exists$ factorisation $F(x)=G(x)H(x)$ in $\mathcal{O}[x]$ with $g \equiv G$, $h \equiv H \mod \mathfrak{m}$ and $\deg g$ = $\deg G$.
\end{theorem}

\begin{proof}
	Put $d = \deg F$, $m = \deg g$, so $\deg h \leq d-m$. Pick lifts $G_0, H_0 \in \mathcal{O}[x]$ of $g, h$ with $\deg G_0 = \deg g$, $\deg H_0 \leq d-m$.
	
	$(g, h) = 1 \implies \exists A, B \in \mathcal{O}[x]$ s.t. $AG_0 + BH_0 \equiv 1 \mod \mathfrak{m}$.
	
	Pick $\pi \in \mathfrak{m}$ s.t. $F-G_0H_0 \equiv AG_0+BH_0-1 \mod \pi$.
	
	Want to find $G = G_0 + \pi P_1 + \pi^2 P_2 + \dots$, $H = H_0 + \pi Q_1 + \pi^2 Q_2 + \dots \in \mathcal{O}[x]$ with $P_i, Q_i \in \mathcal{O}[x]$, $\deg P_i < m$, $\deg Q_i \leq d-m$.
	
	Define
	\begin{align*}
		G_{n-1} &= G_0 + \pi P_1 + \dots + \pi^{n-1}P_{n-1}\\
		H_{n-1} &= H_0 + \pi Q_1 + \dots + \pi^{n-1}Q_{n-1}
	\end{align*}
	We want $F \equiv G_{n-1}H_{n-1} \mod \pi^n$, then take the limit.
	
	Induction on $n$: $n = 1\ \checkmark$
	
	Assume we have $G_{n-1}, H_{n-1}$, $G_n = G_{n-1}+\pi^nP_n, H_n = H_{n-1} + \pi^n Q_n$. Expanding $F-H_nG_n$, we want $$F-G_{n-1}H_{n-1} \equiv \pi^n(G_{n-1}Q_n + H_{n-1}P_n) \mod \pi^{n+1}$$ and divide by $\pi^n$ $$G_{n-1}Q_n + H_{n-1}P_n = \frac{1}{\pi^n}\left(F-G_{n-1}H_{n-1}\right) \mod \pi$$ Let $F_n := F-G_{n-1}H_{n-1}$. $AG_o + BH_0 \equiv 1 \mod \pi \implies F_n \equiv AG_0F_n + BH_0F_n \mod \pi$.
	
	Write $BF_n = QG_0 + P_n$ with $\deg P_n < \deg G_0$, $P_n \in \mathcal{O}[x]$ $$\implies G_0(AF_n + H_0Q) + H_0P_n \equiv F_n \mod \pi$$ Now omit all coefficients from $AF_n+H_0Q$ divisible by $\pi$ to get $Q_n$.
\end{proof}

\begin{corollary}
	Let $F(x)=a_0 + a_1 x + \dots + a_n x^n \in K[x]$, $K$ complete, $a_0a_n \neq 0$. If $F$ is irreducible, then $\abs{a_i} \leq \max(\abs{a_0}, \abs{a_n})\ \forall i$.
\end{corollary}

\begin{corollary}
	$F \in \mathcal{O}[x]$ monic, $K$ complete. If $F \mod \mathfrak{m}$ has a simple root $\bar{\alpha} \in k$, then $F$ has a (unique) simple root $\alpha \in \mathcal{O}$ lifting $\bar{\alpha}$.
\end{corollary}

Useful fact: let $K$ be a valued field, $x, y \in K$. $\abs{x} > \abs{y} \implies \abs{x+y} = \abs{x}$. More generally, if we have a convergent series $\sum_{i=0}^\infty x_i$ and the non-zero $\abs{x_i}$ are distinct, then $\abs{x} = \max \abs{x_i}$.

\begin{theorem}
	Let $K$ be a complete valued field and let $L/K$ be a finite extension. Then the absolute value $\abs{\cdot}$ on $K$ has a unique extension to an absolute value $\abs{\cdot}_L$ on $L$, given by $$\abs{\alpha}_L = \sqrt[n]{\abs{N_{L/K}(\alpha)}},\ n=[L:K]$$ and $L$ is complete w.r.t. $\abs{\cdot}_L$. 
\end{theorem}

\begin{corollary}
	Let $K$ be a complete valued field. If $M/K$ is an algebraic extension of $K$, then $\abs{\cdot}$ extends uniquely to an absolute value on $M$.
\end{corollary}

\begin{corollary}
	In the setting of Theorem 16, if $\sigma \in \Aut(L/K)$ then $\abs{\sigma(\alpha)}_L = \abs{\alpha}_L\ \forall \alpha \in L$
\end{corollary}

\begin{definition}
	Let $K$ be a valued field and $V$ a vector space over $K$. A \textbf{norm} on $V$ is a function $\norm{\cdot}: V \to \mathbb{R}_{\geq 0}$ such that
	\begin{enumerate}[label=\roman*.]
		\item $\norm{x} = 0 \iff x = 0$
		\item $\norm{\lambda x} = \abs{\lambda}\norm{x}\ \forall \lambda \in K, x \in V$
		\item $\norm{x+y} \leq \max(\norm{x}, \norm{y})\ \forall x,y, \in V$
	\end{enumerate}
	Two norms $\norm{\cdot}, \norm{\cdot}'$ are \textbf{equivalent} if they induce the same topology on V $\iff \exists C,D > 0$ s.t. $C\norm{x} \leq \norm{x}' \leq D\norm{x}\ \forall x \in V$.
\end{definition}

\begin{prop}
	Let $K$ be a complete valued field and $V$ a finite dimensional $K$-vector sapce. Let $x_1, \dots, x_n$ be a basis of $V$, then if $x = \sum a_i x_i \in V$, $$\norm{x}_{\max} = \max_i \abs{a_i}$$ defines a norm on $V$, and $V$ is complete w.r.t $\norm{\cdot}_{\max}$.
	
	Moreover, if $\norm{\cdot}$ is any norm on $V$, then $\norm{\cdot}$ is equivalent to $\norm{\cdot}_{\max}$ and hence $V$ is complete w.r.t $\norm{\cdot}$.
\end{prop}
	
\begin{lemma}
	Let $K$ be a valued field. Then $\mathcal{O}_K$ is integrally closed in $K$.
\end{lemma}

\begin{corollary}
	Let $K$ be a complete valued field, $L/K$ finite.
	Equip $L$ with $\abs{\cdot}_L$ extending $\abs{\cdot}$ on $K$.
	Then $\mathcal{O}_L$ is the integral closure of $\mathcal{O}_K$ inside $L$.
\end{corollary}

\subsection{Newton Polygons}
\begin{definitionnn}
	$S \subset \mathbb{R}^2$ is \textbf{lower convex} if
	\begin{enumerate}[label=\roman*.]
		\item $(x, y) \in S \implies (x, z) \in S\ \forall z \geq y$
		\item $S$ is convex
	\end{enumerate}
\end{definitionnn}

Given any $T \subset \mathbb{R}^2$, there exists a minimal lower convex $LCH(T) \supseteq T$ ($LCH(T) = \bigcap_{T\subset S', S' \text{lower convex}} S'$).

\begin{definitionnn}
	Let $f(x) = a_0 + a_1 x + \dots + a_n x^n \in K[x]$ where $K$ is a valued field, $v$ a valuation on $K$.
	
	Define the \textbf{Newton polygon} of $f$ as $LCH\left(\left\{(i, v(a_i)) \,\middle|\, \begin{tabular}{c}$i=0,1,\dots,n$ \\ $a_i \neq 0$\end{tabular}\right\}\right)$.
\end{definitionnn}

\begin{definitionnn}
	The horizontal length of a line segment is called the \textbf{multiplicity}.
	Line segments have a \textbf{slope}.
\end{definitionnn}

\begin{theorem}
	Let $K$ be a complete valued field,
	$v$ a valuation on $K$,
	$f(x)=a_0 + a_1 x + \dots + a_n x^n \in K[x]$.
	Let $L$ be the splitting field of $f$ over $K$,
	equipped with the unique extension $w$ of $v$.
	
	If $(r, v(a_r)) \to (s, v(a_s))$ is a line segment of the Newton polygon of $f$ with slope $-m \in \mathbb{R}$,
	then f has precisely $s-r$ roots of valuation $m$.
\end{theorem}
\begin{proof}
	Dividing by $a_n$ only shifts the NP vertically,
	so wlog $a_n=1$.
	
	Number the roots of $f$ s.t.
	\begin{center}
	\begin{tabular}{ccccccc}
		$v(\alpha_1)$ & $=$ & $\dots$ & $=$ & $v(\alpha_{s_1})$ & $=$ & $m_1$ \\
		$v(\alpha_{s_1+1})$ & $=$ & $\dots$ & $=$ & $v(\alpha_{s_2})$ & $=$ & $m_2$ \\
		$\vdots$ &  &  & & $\vdots$ & & $\vdots$ \\
		$v(\alpha_{s_t+1})$ & $=$ & $\dots$ & $=$ & $v(\alpha_{s_1})$ & $=$ & $m_{t+1}$ \\
	\end{tabular}
	\end{center}
	where $m_1 < m_2 < \dots < m_{t+1}$, and the $\alpha_i$ are the roots of $f$ with multiplicity.
	
	$v(a_n)=v(1)=0$
	
	$v(a_{n-1}) = v(\sum_i a_i) \geq \min_i v(\alpha_i) = m_1$
	
	$v(a_{n-2}) \geq \min_{i \neq j} v(\alpha_i \alpha_j) = 2m_1$
	
	$v(a_{n-s_1}) = v(\sum_{i_1, \dots i_{s_1} \text{distinct}} \alpha_{i_1}\dots\alpha_{i_{s_1}}) = s_1 m_1$
	
	$v(a_{n-s_1-1}) \geq \min v(\alpha_{i_1}\dots\alpha_{i_{s_1+1}}) = s_1m_1+m_2$
	
	$\vdots$
	
	$v(a_{n-s_2}) =\min v(\alpha_{i_1}\dots\alpha_{i_{s_2}}) = s_1m_1 + (s_2-s_1)m_2$
	
	etc. Drawing the lines between the points $(n, 0)$, $(n-s_1, s_1m_1)$, $\dots$ gives the NP of $f$.
	
	The first line segment has length $n-(n-s_1)=s_1$ and slope $\frac{0-s_1m_1}{n-(n-s_1)} = -m_1$. For $k\geq 2$, the $k$th line segment has length $(n-s_{k-1})-(n-s_k)=s_k-s_{k-1}$ and slope
	$$\frac{(s_1m_1+\sum_{i=1}^{k-2}(s_{i+1}-s_i)m_{i+1}) - (s_1m_1+\sum_{i=1}^{k-1}(s_{i+1}-s_i)m_{i+1})}{(n-s_{k-1})-(n-s_k)}$$
	$$= \frac{-(s_k-s_{k-1})m_k}{s_k - s_{k-1}} = -m_k$$

\end{proof}

\begin{corollary}
	If $f$ is irreducible, then the NP has a single line segment.
\end{corollary}
\begin{proof}
	we need to show that all roots have the same valuation. Let $\alpha, \beta$ be roots in the splitting field $L$. Then $\exists \sigma \in \Aut(L/K)$ s.t. $\sigma(\alpha) = \beta$. So $v(\alpha)=v(\sigma(\alpha))=v(\beta)$ by Corollary 30.
\end{proof}

\begin{definition}
	Let $K$ be a valued field with valuation $v$. $K$ is a \textbf{discretely valued field} (DVF) if $v(K^\times)\subset \mathbb{R}$ is a discrete subgroup of $\mathbb{R}$ ($\iff v(K^\times)$ is infinite cyclic).
\end{definition}

\begin{definition}
	A complete DVF with finite residue field is called a \textbf{local field}.
\end{definition}

Let $K$ be a DVF. $\pi \in K$ is called a \textbf{uniformiser} if $v(\pi) > 0$ and $v(\pi)$ generates $v(K^\times)$ ($\iff v(\pi)$ has minimal positive valuation).

\begin{prop}
	Let $K$ be a DVF, uniformiser $\pi$. Let $S \subset \mathcal{O}_K$ be a set of coset representatives of $\mathcal{O}_k/\mathfrak{m}_K = k_K$ containing 0. Then
	\begin{enumerate}
		\item The non-zero ideals of $\mathcal{O}_K$ are $\pi^n\mathcal{O}_K$, $n \geq 0$
		\item $\mathcal{O}_K$ is a PID with unique prime $\pi$ (up to units), $\mathfrak{m}_K=\pi\mathcal{O}_K$
		\item The topology on $\mathcal{O}_K$ induced by $\abs{\cdot}$ is the $\pi$-adic topology
		\item If $K$ is complete, then $\mathcal{O}_K$ is $\pi$-adically complete
		\item If $K$ is complete, then any $x \in K$ can be written uniquely as
		$$ x = \sum_{n \gg -\infty}^{\infty} a_n \pi^n$$
		with $a_n \in S$ and $\abs{x} = \abs{pi}^{-\inf\{n \,|\, a_n \neq 0\}}$
		\item The completion $\hat{K}$ of $K$ is a DVF, $\pi$ is a uniformiser and 
		$$\mathcal{O}_K/\pi^n\mathcal{O}_K \overset{\sim}{\longrightarrow} \mathcal{O}_{\hat{K}}/\pi^n\mathcal{O}_{\hat{K}}$$
		via the natural map.
	\end{enumerate}
\end{prop}
\begin{proof}
	The same as for $\mathbb{Q}_p$ and $\mathbb{Z}_p$ (use $\pi$ instead of $p$). 
	Note that $\abs{\hat{K}} = \abs{K}$ by Ex 9, sheet 1 ($\implies \hat{K}$ is a DVF).
\end{proof}

\begin{prop}
	Let $K$ be a DVF.
	Then $K$ is a local field $\iff \mathcal{O}_K$ is compact 
\end{prop}
\begin{proof}
	$\mathcal{O}_K$ compact $\implies \pi^{-n}\mathcal{O}_K$ is compact $\forall n \geq 0$ ($\pi$ uniformiser).
	
	$\mathcal{O}_K \cong \pi^{-n}\mathcal{O}_K \implies K = \bigcup_{n \geq 0}^{\infty} \pi^{-n} \mathcal{O}_K$ is complete.
	
	Also $\mathcal{O}_K \twoheadrightarrow k_K$ and this map is continuous when $k_K$ is given the discrete topology.
	So $k_K$ is compact and discrete $\implies k_K$ finite.
	
	Conversely, we seek to prove that $K$ local $\implies$ $\mathcal{O}_K$ is sequentially compact ($\iff$ compact).
	Note that $\mathcal{O}_K/\pi^n\mathcal{O}_K$ is finite $\forall n \geq 0$ (induction and $\pi^{n-1}\mathcal{O}_K/\pi^n\mathcal{O}_K \cong \mathcal{O}_K/\pi\mathcal{O}_K$).
	
	Let $(x_i)$ be a sequence in $\mathcal{O}_K$.
	$\exists$ a subsequence $(x_{1i})$ which is constant modulo $\pi$.
	Keep going: choose a subsequence $(x_{n+1,i})$ of $(x_{ni})$ s.t. $(x_{n+1, i})$ is constant mod $\pi^{n+1}$.
	
	Then $(x_{ii})_{i=1}^\infty$ converges: it's Cauchy since $\abs{x_{ii}-x_{jj}} \leq \abs{\pi}^j\ \forall j \leq i$, and $K$ is complete.
\end{proof}

\begin{definition}
	A ring $R$ is called a \textbf{discrete valuation ring} (DVR) if it is a PID with a unique prime element (up to units).
\end{definition}

\begin{prop}
	$R$ is a DVR $\iff R \cong \mathcal{O}_K$ for some DVF $K$.
\end{prop}
\begin{proof}
	The reverse implication is contained in Proposition 42.
	
	Suppose $R$ is a DVR, $\pi$ prime.
	$\forall x \in R \backslash \{0\}$,
	$\exists! u \in R^\times,\, n \in \mathbb{Z}_{\geq 0}$ such that $x = \pi^n u$
	by uniqueness of prime factorisation.
	
	Define $v(x) = \begin{cases}
	n & \text{if } x \neq 0 \\
	\infty & \text{if } x = 0
	\end{cases}
	\in \mathbb{Z}_{\geq 0} \cup \{\infty\}$.
	
	$v$ defines a discrete valuation of $R \implies v$ extends uniquely to $K = \Frac(R)$.
	It remains to show that $R=\mathcal{O}_K$.
	First, note that $K=R[\frac{1}{\pi}]$.
	Any non-zero element looks like $\pi^nu,\,u\in R^\times,\, n \in \mathbb{Z}$,
	so it is invertible.
	
	Then $v(\pi^nu)=n \in \mathbb{Z}_{\geq 0} \iff \pi^nu \in R$
	
	$\therefore R = \mathcal{O}_K$.
\end{proof}

\begin{definition}
	Let $K$ be a valued field with residue field $k_K$.
	$K$ has \textbf{equal characteristic} if $\characteristic K = \characteristic k_K$,
	\textbf{mixed characteristic} otherwise ($\implies \characteristic K =0, \characteristic k_K > 0$).
\end{definition}

\begin{definition}
	Let $R$ be a ring of characteristic $p$.
	$R$ is \textbf{perfect} if the Frobenius map $x \mapsto x^p$ is an automorphism of $R$.
\end{definition}

\begin{theorem}
	Let $K$ be a complete DVF of equal characteristic $p$ and assume that $k_K$ is perfect.
	Then $K \cong k_K[[T]]$ (as DVFs).
\end{theorem}

\begin{corollary}
	Let $K$ be a local field of equal characteristic $p$.
	Have $k_K \cong \mathbb{F}_q$ for some $q$ a power of $p$,
	and $K \cong \mathbb{F}_q((T))$.
\end{corollary}

\begin{definition}
	Let $K$ be a DVF.
	The \textbf{normalised valuation} $v_K$ on $K$ is the unique valuation on $K$ in the given equivalence class
	s.t. $v_K(\pi) = 1$ for any uniformiser $\pi$.
\end{definition}

\begin{lemma}
	Let $R$ be a ring and let $x \in R$.
	Assume that $R$ is $x$-adically complete and that $R/xR$ is perfect of characteristic $p$.
	
	Then $\exists!$ map $[-]: R/xR \to R$ such that
	\begin{align*}
		[a] &\equiv a \mod x \\
		[ab] &= [a][b]\ \forall a,b \in R/xR
	\end{align*}
	Moreover if $R$ has characteristic $p$, then $[-]$ is a ring homomorphism.
\end{lemma}
\begin{proof}
	Let $a \in R/xR$.
	$\exists!\ a^{p^{-n}} \in R/xR\ \forall n \geq 0$ since $R/xR$ is perfect.
	Now lift arbitrarily: take $\alpha_n \in R$ such that $\alpha_n \equiv a^{p^{-n}} \mod x$.
	
	Put $\beta_n = \alpha_n^{p^n}$.
	
	Claim: $\lim_{n \to \infty} \beta_n$ exists and is independent of choices. Call this $[a]$.
	
	Note that if the limit exists no matter how the $\alpha_n$ are chosen,
	then it is independent of the choices.
	
	Want to prove $\beta_{n+1} - \beta_n \to 0$ $x$-adically.
	$$\beta_{n+1} - \beta_n = (\alpha_{n+1}^p)^{p^n}-(\alpha_{n})^{p^n}$$
	$$\alpha_{n+1}^p \equiv (a^{p^{-n-1}})^p \equiv a^{p^{-n}} \equiv \alpha_n \mod x$$
	The binomial theorem, $R/xR$ characteristic $p$ and induction $\implies$
	$$(\alpha_{n+1}^p)^{p^n} \equiv \alpha_n^{p^n} \mod x^{n+1}$$
	i.e. $\beta_{n+1} - \beta_n \equiv 0 \mod x^{n+1}$ so $\lim_{n \to \infty} \beta_n$ exists.
	
	Multiplicativity: if $b \in R/xR$, 
	with $\gamma_n \in R$ lifting $b^{p^{-n}}\ \forall n \geq 0$,
	then $\alpha_n\gamma_n$ lifts $(ab)^{p^{-n}} = a^{p^{-n}}b^{p^{-n}}$
	$$\implies [ab] = \lim_{n\to\infty}\alpha_n^{p^n}\lim_{n\to\infty}\gamma_n^{p^n}=[a][b]$$
	
	$[a]\equiv a \mod x:$
	$$\ \lim_{n\to\infty}\alpha_n^{p^n}\equiv\lim_{n\to\infty}(a^{p^{-n}})^{p^n}\equiv \lim_{n\to\infty} a \equiv a \mod x$$
	
	Uniqueness: let $\phi: R/xR \to R$ be another map with these properties.
	$$[a] = \lim_{n \to \infty} \phi(a^{p^{-n}})^{p^n} = \lim_{n\to\infty}\phi(a) = \phi(a)$$
	since $\phi(a^{p^{-n}}) \equiv a^{p^{-n}} \mod x$ and $\phi$ is multiplicative.
	
	Finally, if $R$ has characteristic $p$,
	then $\alpha_n+\gamma_n$ lifts $a^{p^{-n}}+b^{p^{-n}}-(a+b)p^{-n}$, so
	$$[a+b] = \lim_{n\to\infty}(\alpha_n+\gamma_n)^{p^n} = \lim_{n\to\infty}\alpha_n^{p^n}+\gamma_n^{p^n} = [a] + [b]$$
	So $[-]$ is additive and multiplicative and (check!) $[1]=1$, so it's a homomorphism.
\end{proof}

\begin{definition}
	$[-]:R/xR \to R$ is called the \textbf{Teichm\"uller map/lift}
	and $[x]$ is called the \textbf{Teichm\"uller lift/representative} of $x$.
\end{definition}
\begin{proof}[Proof of Theorem 48]
	$K$ is a complete DVF.
	We want to prove that $\mathcal{O}_K \cong k_K[[T]]$.
	
	$\mathcal{O}_K \characteristic p \implies [-]:k_K \hookrightarrow \mathcal{O}_K$ is an injective ring homomorphism.
	
	Choose a uniformiser $\pi \in \mathcal{O}_K$. Then
	$k_K = \mathcal{O}/\pi\mathcal{O}_K$, $\mathcal{O}_K$ $\pi$-adically complete.
	Now define
	\begin{align*}
		k_K[[T]] &\to \mathcal{O}_K \\
		\sum_{n=0}^\infty a_n T^n &\mapsto \sum_{n=0}^\infty [a_n] \pi^n
	\end{align*}
	It's a bijection by one of the basic properties of complete DVFs, check it's a homomorphism.
\end{proof}

Fact: let $F$ be a field of characteristic $p$. Then $F$ is perfect $\iff$ every finite extension of $F$ is separable.

$\mathbb{F}_q$ is perfect for every $q=p^n$.

\subsection{*Wiff Vectors*}

\begin{definition}
	Let $A$ be a ring. $A$ is called a \textbf{strict p-ring} if $A$ is $p$-torsionfree,
	$p$-adically complete and $A/pA$ is perfect.
\end{definition}

\begin{prop}
	Let $X = \{x_i \,|\, i \in I\}$ be a set.
	Let
	\begin{align*}
	B &= \mathbb{Z}[x_i^{p^{-\infty}} \,|\, i \in I]\\
	&= \bigcup_{n=0}^\infty \mathbb{Z}[x_i^{p^{-n}} \,|\, i \in I]
	\end{align*}
	(Note that $\mathbb{Z}[x_i \,|\, i \in I] \subseteq \mathbb{Z}[x_i^{p^{-1}} \,|\, i \in I] \subseteq \dots$)
	and let $A$ be the $p$-adic completion of $B$. Then $A$ is a strict $p$-ring,
	and $A/pA \cong \mathbb{F}_p[x_i^{p^{-\infty}} \,|\, i \in I]$ (think of as `universal perfect rings').
\end{prop}

\begin{lemma}
	Let $A$ and $B$ be strict $p$-rings and let $f: A/pA \to B/pB$ be a ring homomorphism.
	Then $\exists!$ homomorphism $F:A \to B$ such that $f \equiv F \mod p$.
	
	$F$ is explicitly given by $F(\sum_{n=0}^\infty [a_n]p^n) = \sum_{n=0}^\infty [f(a_n)]p^n$.
\end{lemma}

\begin{theorem}
	Let $R$ be a perfect ring.
	Then $\exists!$ (up to isomorphism) strict $p$-ring $W(R)$ (called the \textbf{Wiff vectors} of R)
	such that $W(R)/pW(R) \cong R$.
	Moreover, if $R'$ is another perfect ring the reduction mod $p$ map gives a bijection
	$$Hom_{\text{Ring}}(W(R), W(R')) \overset{\sim}{\longrightarrow} Hom_{\text{Ring}}(R, R')$$
\end{theorem}

\begin{prop}
	A complete DVR $A$ of mixed characteristic with perfect residue field and such that $p$ is a uniformiser
	is the same as a strict $p$-ring $A$ such that $A/pA$ is a field.
\end{prop}

\begin{definition}
	Let $R$ be a mixed characteristic DVR with normalised valuation $v_R$.
	The integer $v_R(p)$ where $p$ is the characteristic of the residue field of $R$
	is called the \textbf{absolute ramification index} of $R$.
\end{definition}

\begin{corollary}
	Let $R$ be a CDVR of mixed characteristic with absolute ramification index 1 and perfect residue field $k$.
	Then $R \cong W(k)$.
\end{corollary}
\setcounter{definition}{52}
\renewcommand{\thedefinition}{\arabic{definition}'}
\begin{lemma}
	Let $A$ be a strict $p$-ring and let $B$ be a $p$-adically complete ring.
	If $f: A/pA \to B/pB$ is a ring homomorphism,
	then $\exists!$ ring homomorphism $F:A \to B$ with $f \equiv F \mod p$.
\end{lemma}
\setcounter{definition}{57}
\renewcommand{\thedefinition}{\arabic{definition}}

\begin{theorem}
	Let $R$ be a CDVR of mixed characteristic with perfect residue field $k$ and uniformiser $\pi$.
	Then $R$ is finite over $W(k)$.
\end{theorem}

\begin{corollary}
	Let $K$ be a mixed characteristic local field.
	Then $K$ is a finite extension of $\mathbb{Q}_p$.
\end{corollary}

\section{Some p-adic Analysis}

Recall the power series
$$\exp(x) = \sum_{n=0}^\infty \frac{x^n}{x!}$$
$$\log(1+x) = \sum_{n=1}^\infty (-1)^{n-1} \frac{x^n}{n}$$

\begin{prop}
	Let $K$ be a complete valued field with absolute value $\abs{\cdot}$,
	and assume that $K \supseteq \mathbb{Q}_p$,
	$\abs{\cdot}|_{\mathbb{Q}_p} = \abs{\cdot}_p$.
	Then $\exp(x)$ converges for $\abs{x} < p^{-\frac{1}{p-1}}$ and $\log(1+x)$ converges for $\abs{x}<1$,
	and they define continuous maps
	$$\exp :\left\{x \in K \,|\, \abs{x} < p^{-\frac{1}{p-1}}\right\} \to \mathcal{O}_K$$
	$$\log: \left\{x \in K \,|\, \abs{x} < 1 \right\} \to K$$
\end{prop}
\begin{proof}
	$v=-\log_p\abs{\cdot}$, this extends $v_p$.
	
	log: $v(n) \leq \log_p n \implies$
	$$v(\frac{x^n}{n}) \geq n \cdot v(x) - \log_p n \to \infty$$
	if $v(x) > 0$.
	
	exp: $v(n!) = \frac{n-s_p(n)}{p-1}$.
	Then
	$$v(\frac{x^n}{n!}) \geq n\cdot v(x) - \frac{n}{p-1} = n(v(x)-\frac{1}{p-1}) \geq 0$$
	and $\to \infty$ as $n \to \infty$ if $v(x) > \frac{1}{p-1}$.
	
	For continuity, we use uniform convergence as in the real case.
\end{proof}

\setcounter{definition}{52}
\renewcommand{\thedefinition}{\arabic{definition}''}
\begin{lemma}
	Let $A$ be a strict $p$-ring,
	$B$ a ring with element $x \in B$ such that $B$ is $x$-adically complete and $B/xB$ is perfect of characteristic $p$.
	If $f: A/pA \to B/pB$ is a ring homomorphism,
	then $\exists!$ ring homomorphism $F:A \to B$ with $f \equiv F \mod p$.
\end{lemma}
\setcounter{definition}{60}
\renewcommand{\thedefinition}{\arabic{definition}}

Let $n\geq 1$.
$${x \choose n} = \frac{x(x-1)\dots(x-n+1)}{n!}$$
is a polynomial in $x$, and so defines a continuous function $\mathbb{Z}_p \to \mathbb{Q}_p$,
$x \mapsto {x \choose n}$.

Since ${x \choose n} \in \mathbb{Z}$ if $x \in \mathbb{Z}_{\geq 0}$,
by the density of $\mathbb{Z}_{\geq 0} \subset \mathbb{Z}_p$ we must have ${x \choose n} \in \mathbb{Z}_p \forall\ x \in \mathbb{Z}_p$.

When $n=0$,
set ${x \choose 0}=1 \forall\ x \in \mathbb{Z}_p$.

\subsection{Mahler's Theorem}
\begin{theorem}[Mahler]
	Let $f: \mathbb{Z}_p \to \mathbb{Q}_p$ be a continuous function.
	Then $\exists$ a unique sequence $(a_n)_{n\geq 0}$ with $a_n \in \mathbb{Q}_p$, $a_n \to 0$ such that
	$$f(x) = \sum_{n=0}^{\infty} a_n {x \choose n}\ \forall x \in \mathbb{Z}_p$$
	and $\sup_{x \in \mathbb{Z}_p}\abs{f(x)}_p = \max_{n=0,1,\dots}\abs{a_n}_p$.
\end{theorem}

Let $\mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p) = \{f: \mathbb{Z}_p \to \mathbb{Q}_p \text{ cts}\}$.
This is a $\mathbb{Q}_p$-vector space.

If $f \in \mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p)$, set $\norm{f} = \sup_{x \in \mathbb{Z}_p}\abs{f(x)}_p$.
$\mathbb{Z}_p$ compact $\implies f$ is bounded,
so the supremum exists and is attained.

Let $c_0$ denote the set of sequences $(a_n)_{n=0}^\infty$ in $\mathbb{Q}_p$ such that $a_n \to 0$.
This is a $\mathbb{Q}_p$-vector space, with a norm $\norm{(a_n)} = \max_{n=0,1,\dots}\abs{a_n}_p$,
and $c_0$ is complete w.r.t $\norm{\cdot}$.

Define $\triangle: \mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p) \to \mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p)$ by $\triangle f(x) = f(x+1) - f(x)$.
By induction,
$$\triangle^n f(x) = \sum_{i=0}^n (-1)^i {n \choose i} f(x+n-i)$$
Note that $\triangle$ defines a linear operator on $\mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p)$, and
$$\abs{\triangle f(x)}_p = \abs{f(x+1) - f(x)}_p \leq \norm{f} \implies \norm{\triangle f} \leq \norm{f} \text{ or } \norm{\triangle} \leq 1$$

\begin{definition}
	Let $f \in \mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p)$.
	The \textbf{nth Mahler coefficient} $a_n(f) \in \mathbb{Q}_p$ is defined by
	$$a_n(f) = \triangle^n f(0) = \sum_{i=0}^n (-1)^i {n \choose i} f(n-i)$$
\end{definition}

\begin{lemma}
	Let $f \in \mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p)$.
	Then $\exists k \geq 1$ such that $\norm{\triangle^{p^k}f} \leq \frac{1}{p}\norm{f}$.
\end{lemma}
\begin{proof}
	If $f=0$ there's nothing to prove,
	so wlog $\norm{f} = 1$ (by scaling).
	Then we want to show that $\triangle^{p^k} f(x) \equiv 0 \mod p\ \forall x \in \mathbb{Z}_p$,
	some $k \geq 1$.
	$$\triangle^{p^k} f(x) = \sum_{i=0}^{p^k}(-1)^i {p^k \choose i}f(x+p^k-i) \equiv f(x+p^k) - f(x) \mod p$$
	because ${p^k \choose i} \equiv 0 \mod p$ for $i=1,2,\dots,p^k-1$ and $(-1)^{p^k} \equiv -1 \mod p$.

	Now $\mathbb{Z}_p$ compact $\implies f$ is uniformly continuous,
	so $\exists k$ such that $\abs{x-y}_p \leq p^{-k} \implies \abs{f(x)-f(y)}_p \leq \frac{1}{p}\ \forall x,y \in \mathbb{Z}_p$.
	Take this $k$, and we're done.
\end{proof}

\begin{prop}
	The map $f \mapsto (a_n(f))_{n=0}^\infty$ defines an injective norm-decreasing linear map $\mathcal{C}(\mathbb{Z}_p,\mathbb{Q}_p) \to c_0$.
\end{prop}
\begin{proof}
	First we prove that $a_n(f) \to 0$.
	We have $\abs{a_n(f)}_p \leq \norm{\triangle^n f}$,
	so it suffices to prove that $\norm{\triangle^n f} \to 0$.
	Since $\norm{\triangle} \leq 1$,
	$\norm{\triangle^n f}$ is monotonically decreasing,
	so it suffices to find a subsequence $\to 0$.
	
	Apply Lemma 63 repeatedly to get $k_1, k_2, \dots$ such that
	$$\norm{\triangle^{p^{k_1 + \dots + k_n}}f} \leq \frac{1}{p^n}\norm{f}$$
	This gives the desired subsequence.
	
	Note that $\abs{a_n(f)}_p \leq \norm{\triangle^n f} \leq \norm{\triangle}$,
	so $\norm{(a_n(f))_n} = \max_{n=0,1,\dots}\abs{a_n(f)}_p \leq \norm{f}$,
	so the map is norm-decreasing. 
	Linearity follows from the linearity of $\triangle$.
	
	Injectivity: assume $a_n(f)=0\ \forall n \geq 0$.
	Then $a_0(f) = f(0) = 0$,
	and by induction $f(n) = \triangle^n f(0) = a_n(f) = 0\ \forall n\geq 0$.
	So $f=0$ by continuity since $\mathbb{Z}_{\geq 0} \subseteq \mathbb{Z}_p$ is dense.
\end{proof}
\end{document}