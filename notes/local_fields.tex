\documentclass[a4paper]{article}
\title{Part III Local Fields}
\author{Based on lectures by Dr C. Johansson}
\date{Michaelmas 2016\\University of Cambridge}
\usepackage{mathtools}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{textcomp}
\usepackage{enumitem}
\usepackage{graphicx}
\usepackage{tikz-cd}
\usepackage{enumitem}
\usepackage{ stmaryrd }
\theoremstyle{definition}
\newtheorem{definition}{Definition}
\newtheorem*{definitionnn}{Definition}
\theoremstyle{default}
\newtheorem{lemma}[definition]{Lemma}
\newtheorem{theorem}[definition]{Theorem}
\newtheorem{prop}[definition]{Proposition}
\newtheorem{corollary}[definition]{Corollary}
\theoremstyle{remark}
\newtheorem*{remarks}{Remarks}
\renewcommand{\baselinestretch}{1.3}
\newcommand*\conj[1]{\overline{#1}}
\newcommand*\dom[1]{\textnormal{dom}\,#1}
\newcommand*\cod[1]{\textnormal{cod}\,#1}
\newcommand*\ob[1]{\textnormal{ob}\,#1}
\newcommand*\mor[1]{\textnormal{mor}\,#1}
\newcommand*\abs[1]{\left|#1\right|}
\newcommand*\norm[1]{\abs{\abs{#1}}}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Frac}{Frac}
\DeclareMathOperator{\characteristic}{char}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Ker}{Ker}
\DeclareMathOperator{\Frob}{Frob}
\DeclareMathOperator{\Art}{Art}
\begin{document}
\maketitle
\tableofcontents

\section{Basic Theory}
\begin{definition}[Absolute value]
	Let $K$ be a field. An \textbf{absolute value} on $K$ is a function $\abs{\cdot}:K\to\mathbb{R}_{\geq 0}$ s.t.
	\begin{enumerate}[label=\roman*.]
		\item $\abs{x}=0 \iff x=0$
		\item $\abs{xy}=\abs{x}\abs{y} \quad \forall x,y \in K$
		\item $\abs{x+y} \leq \abs{x} + \abs{y}$
	\end{enumerate}
\end{definition}

\begin{definition}[Valued field]
	A \textbf{valued field} is a field with an absolute value.
\end{definition}

\begin{definition}[Equivalence of absolute values]
	Let $K$ be a field and let $\abs{\cdot}$, $\abs{\cdot}^{'}$ be absolute values on K.
	We say that $\abs{\cdot}$ and $\abs{\cdot}^{'}$ are \textbf{equivalent} if the associated metrics induce the same topology.
\end{definition}
\setcounter{definition}{5}
\begin{definition}[Non-archimedean absolute value]
	An absolute value $\abs{\cdot}$ on a field $K$ is called \textbf{non-archimedean} if $\abs{x+y}\leq\max(\abs{x},\abs{y})$ (the \textbf{strong triangle inequality}).
	
	Metrics s.t. $d(x,z)\leq\max(d(x,y),d(y,z))$ are called \textbf{ultrametrics}.
\end{definition}

Assumption: unless otherwise mentioned, all absolute values will be non-archimedean.
These metrics are weird!

\begin{prop}
	Let $K$ be a valued field.
	Then $\mathcal{O}=\{x \,|\, \abs{x}\leq 1\}$ is an open subring of $K$, called the \textbf{valuation ring} of K.
	$\forall r \in (0,1]$, $\{x \,|\, x < r\}$ and $\{x \,|\, x \leq r\}$ are open ideals of $\mathcal{O}$.
	
	Moreover, $\mathcal{O}^x = \{x \,|\, \abs{x}=1\}$.
\end{prop}

\begin{prop}
	Let $K$ be a valued field.
	\begin{enumerate}[label=\roman*.]
		\item Let $(x_n)$ be a sequence in $K$.
		If $x_n - x_{n+1} \to 0$ then $(x_n)$ is Cauchy
	\end{enumerate}
	Assume that $K$ is complete
	\begin{enumerate}[label=\roman*.]
		\setcounter{enumi}{1}
		\item Let $(x_n)$ be a sequence in $K$.
		If $x_n - x_{n+1} \to 0$ then $(x_n)$ converges
		\item Let $\sum_{n=0}^{\infty}y_n$ be a series in $K$.
		If $y_n\to0$, then $\sum_{n=0}^{\infty}y_n$ converges
	\end{enumerate}
\end{prop}

\begin{definition}
	Let $R \subseteq S$ be rings.
	Then $s \in S$ is \textbf{integral over R} if $\exists$ monic $f(x) \in R[x]$ s.t. $f(s)=0$.
\end{definition}

\begin{prop}
	Let $R \subseteq S$ be rings.
	Then $s_1, \dots,s_n\in S$ are all integral over $R \iff R[s_1,\dots,s_n] \subseteq S$ is a finitely generated $R$-module.
\end{prop}

\begin{corollary}
	let $R \subseteq S$ be rings.
	If $s_1, s_2 \in S$ are integral over $R$, then $s_1+s_2$ and $s_1s_2$ are integral over $R$.
	In particular, the set $\tilde{R}\subseteq S$ of all elements in $S$ integral over $R$ is a ring,
	called the \textbf{integral closure} of $R$ in $S$.
\end{corollary}

\begin{definition}
	Let $R$ be a ring. A topology on $R$ is called a \textbf{ring topology} on $R$ if addition and multiplication are continuous maps $R\times R\to R$. A ring with a ring topology is called a \textbf{topological ring}.
\end{definition}

\begin{definition}
	Let $R$ be a ring, $I \subseteq R$ an ideal. A subset $U \subseteq R$ is called \linebreak \textbf{I-adically open} if $\forall x \in U$ $\exists n \geq 1$ s.t. $x + I^n \subseteq U$.
\end{definition}

\begin{prop}
	The set of all $I$-adically open sets form a topology on $R$, called the \textbf{I-adic topology}.
\end{prop}

\begin{definition}
	Let $R_1, R_2, \dots$ be topological rings with continuous homomorphisms $f_n:R_{n+1}\to R_n$ $\forall n \geq 1$. The \textbf{inverse limit} of the $R_i$ is the ring
	\begin{align*}
		\varprojlim_n R_n &= \left\{(x_n) \in \prod_n R_n \,|\, f_n(x_{n+1})=x_n \forall n \geq 1  \right\}\\
		&\subseteq \prod_n R_n
	\end{align*}
\end{definition}

\begin{prop}
	The inverse limit topology is a ring topology.
\end{prop}

\begin{definition}
	Let $R$ be a ring, $I$ an ideal. The \textbf{I-adic completion} of $R$ is the topological ring $\varprojlim_n R/I^n$ ($R/I^n$ has the discrete topology, and $R/I^{n+1} \to R/I^{n}$ is the natural map).
	
	There exists a map $\nu: R \to \varprojlim R/I^n$, $r \mapsto (r \mod I^n)_n$ This map is a continuous ring homomorphism when $R$ is given the $I$-adic topology. We say that $R$ is \textbf{I-adically complete} if $\nu$ is a bijection.
	
	If $I=xR$ then we often call the $I$-adic topology the \textbf{x-adic topology}.
\end{definition}

\subsection{The p-adic Numbers}
Let $p$ be a prime number throughout.

If $x \in \mathbb{Q} \backslash \{0\}$ then $\exists!$ representation $x=p^n \frac{a}{b}$,
where $n \in \mathbb{Z}$, $a \in \mathbb{Z}$,
$b \in \mathbb{Z}_{>0}$ and $(a,p)=(b,p)=(a,b)=1$.

We define the \textbf{p-adic absolute value} on $\mathbb{Q}$ to be the function $\abs{\cdot}_p: \mathbb{Q} \to \mathbb{R}_{\geq 0}$ given by
\begin{align*}
	\abs{x}_p =
	\begin{cases}
	0 &\text{if } x=0\\
	p^{-n}  &\text{if } x=p^n \frac{a}{b}\ (\neq 0) \text{ as before}
	\end{cases}
\end{align*}
Then $\abs{\cdot}_p$ is an absolute value.

\begin{definition}
	The \textbf{p-adic numbers} $\mathbb{Q}_p$ are the completion of $\mathbb{Q}$ w.r.t. $\abs{\cdot}_p$.
	
	The valuation ring $\mathbb{Z}_p = \{x \in \mathbb{Q}_p \,|\, \abs{x}_p \leq 1 \}$ is called the \textbf{p-adic integers}.
\end{definition}

\begin{prop}
	$\mathbb{Z}_p$ is the closure of $\mathbb{Z}$ inside $\mathbb{Q}_p$.
\end{prop}

\begin{prop}
	The non-zero ideals of $\mathbb{Z}_p$ are $p_n\mathbb{Z}_p$ for $n \geq 0$.
	Moreover, $\mathbb{Z}/p^n\mathbb{Z} \cong \mathbb{Z}_p/p^n\mathbb{Z}_p$
\end{prop}

\begin{corollary}
	$\mathbb{Z}_p$ is a PID with a unique prime element $p$ (up to units).
\end{corollary}

\begin{prop}
	The topology on $\mathbb{Z}$ induced by $\abs{\cdot}_p$ is the $p$-adic topology.
\end{prop}

\begin{prop}
	$\mathbb{Z}_p$ is $p$-adically complete and is (isomorphic to) the $p$-adic completion of $\mathbb{Z}$.
\end{prop}

\begin{corollary}
	Every $a \in \mathbb{Z}_p$ has a unique expansion $$a = \sum_{i=0}^\infty a_ip^i$$ with $a_i \in \{0, 1, \dots, p-1\}$
	
	Every $a \in \mathbb{Q}_p^\times$ has a unique expansion $$a = \sum_{i=n}{\infty}a_ip^i$$ $n \in \mathbb{Z}$, $n = -\log_p\abs{a}_p$, $a_n \neq 0$.
\end{corollary}

\subsection{Valued Fields}
\begin{definition}
	Let $K$ be a field. A \textbf{valuation} on K is a function $v : K \to \mathbb{R} \cup \{\infty\}$ s.t.
	\begin{enumerate}[label=\roman*.]
		\item $v(x) = \infty \iff x = 0$
		\item $v(xy) = v(x)+v(y)$
		\item $v(x+y) \geq \min(v(x), v(y))$
	\end{enumerate}
	$\forall x, y \in K$.
\end{definition}

Here we use the conventions $r+\infty = \infty$, $r \leq \infty\ \forall r \in \mathbb{R} \cup \{\infty\}$.
$v$ a valuation $\implies \text{ if } \abs{x} = c^{-v(x)},\, c \in \mathbb{R}_{>1}$,
then $\abs{\cdot}$ is an absolute value.
Conversely, if $\abs{\cdot}$ is an absolute value then $v(x)=-\log_c\abs{x}$.

Let $K$ be a valued field.
\begin{itemize}
	\item $\mathcal{O} = \mathcal{O}_K = \{x \in K \,|\, \abs{x} \leq 1\}$ is the \textbf{valuation ring}
	\item $\mathfrak{m} = \mathfrak{m}_K = \{x \in K \,|\, \abs{x} < 1\}$ is the \textbf{maximal ideal}
	\item $k = k_K = \mathcal{O}/\mathfrak{m}$ is the \textbf{residue field}
\end{itemize}

If $K$ is a valued field and $F(x)=a_0 + a_1 x + \dots + a_n x^n \in K[x]$ is a polynomial,
we say that F is \textbf{primitive} if $\max_i \abs{a_i} = 1$ ($\implies F \in \mathcal{O}[x]$).

\begin{theorem}[Hensel's Lemma]
	Assume that $K$ is complete and that $F \in K[x]$ is primitive.
	Put $f = F \mod \mathfrak{m} \in k[x]$.
	If $\exists$ factorisation $f(x)=g(x)h(x)$ with $(g,h)=1$,
	then $\exists$ factorisation $F(x)=G(x)H(x)$ in $\mathcal{O}[x]$ with $g \equiv G$, $h \equiv H \mod \mathfrak{m}$ and $\deg g$ = $\deg G$.
\end{theorem}

\begin{proof}
	Put $d = \deg F$, $m = \deg g$, so $\deg h \leq d-m$.
	Pick lifts $G_0, H_0 \in \mathcal{O}[x]$ of $g, h$ with $\deg G_0 = \deg g$, $\deg H_0 \leq d-m$.
	
	$(g, h) = 1 \implies \exists A, B \in \mathcal{O}[x]$ s.t. $AG_0 + BH_0 \equiv 1 \mod \mathfrak{m}$.
	
	Pick $\pi \in \mathfrak{m}$ s.t. $F-G_0H_0 \equiv AG_0+BH_0-1 \mod \pi$.
	
	Want to find $G = G_0 + \pi P_1 + \pi^2 P_2 + \dots$, $H = H_0 + \pi Q_1 + \pi^2 Q_2 + \dots \in \mathcal{O}[x]$ with $P_i, Q_i \in \mathcal{O}[x]$, $\deg P_i < m$, $\deg Q_i \leq d-m$.
	
	Define
	\begin{align*}
		G_{n-1} &= G_0 + \pi P_1 + \dots + \pi^{n-1}P_{n-1}\\
		H_{n-1} &= H_0 + \pi Q_1 + \dots + \pi^{n-1}Q_{n-1}
	\end{align*}
	We want $F \equiv G_{n-1}H_{n-1} \mod \pi^n$, then take the limit.
	
	Induction on $n$: $n = 1\ \checkmark$
	
	Assume we have $G_{n-1}, H_{n-1}$,
	$G_n = G_{n-1}+\pi^nP_n, H_n = H_{n-1} + \pi^n Q_n$.
	Expanding $F-H_nG_n$, we want $$F-G_{n-1}H_{n-1} \equiv \pi^n(G_{n-1}Q_n + H_{n-1}P_n) \mod \pi^{n+1}$$ and divide by $\pi^n$
	$$G_{n-1}Q_n + H_{n-1}P_n = \frac{1}{\pi^n}\left(F-G_{n-1}H_{n-1}\right) \mod \pi$$
	Let $F_n := F-G_{n-1}H_{n-1}$.
	$AG_o + BH_0 \equiv 1 \mod \pi \implies F_n \equiv AG_0F_n + BH_0F_n \mod \pi$.
	
	Write $BF_n = QG_0 + P_n$ with $\deg P_n < \deg G_0$, $P_n \in \mathcal{O}[x]$ $$\implies G_0(AF_n + H_0Q) + H_0P_n \equiv F_n \mod \pi$$ Now omit all coefficients from $AF_n+H_0Q$ divisible by $\pi$ to get $Q_n$.
\end{proof}

\begin{corollary}
	Let $F(x)=a_0 + a_1 x + \dots + a_n x^n \in K[x]$, $K$ complete,
	$a_0a_n \neq 0$. If $F$ is irreducible,
	then $\abs{a_i} \leq \max(\abs{a_0}, \abs{a_n})\ \forall i$.
\end{corollary}

\begin{corollary}
	$F \in \mathcal{O}[x]$ monic, $K$ complete.
	If $F \mod \mathfrak{m}$ has a simple root $\bar{\alpha} \in k$,
	then $F$ has a (unique) simple root $\alpha \in \mathcal{O}$ lifting $\bar{\alpha}$.
\end{corollary}

Useful fact: let $K$ be a valued field, $x, y \in K$. $\abs{x} > \abs{y} \implies \abs{x+y} = \abs{x}$.
More generally, if we have a convergent series $\sum_{i=0}^\infty x_i$ and the non-zero $\abs{x_i}$ are distinct,
then $\abs{x} = \max \abs{x_i}$.

\begin{theorem}
	Let $K$ be a complete valued field and let $L/K$ be a finite extension.
	Then the absolute value $\abs{\cdot}$ on $K$ has a unique extension to an absolute value $\abs{\cdot}_L$ on $L$,
	given by $$\abs{\alpha}_L = \sqrt[n]{\abs{N_{L/K}(\alpha)}},\ n=[L:K]$$
	and $L$ is complete w.r.t. $\abs{\cdot}_L$. 
	\label{29}
\end{theorem}

\begin{corollary}
	Let $K$ be a complete valued field. 
	If $M/K$ is an algebraic extension of $K$,
	then $\abs{\cdot}$ extends uniquely to an absolute value on $M$.
\end{corollary}

\begin{corollary}
	In the setting of Theorem 16, if $\sigma \in \Aut(L/K)$ then $\abs{\sigma(\alpha)}_L = \abs{\alpha}_L\ \forall \alpha \in L$
\end{corollary}

\begin{definition}
	Let $K$ be a valued field and $V$ a vector space over $K$. A \textbf{norm} on $V$ is a function $\norm{\cdot}: V \to \mathbb{R}_{\geq 0}$ such that
	\begin{enumerate}[label=\roman*.]
		\item $\norm{x} = 0 \iff x = 0$
		\item $\norm{\lambda x} = \abs{\lambda}\norm{x}\ \forall \lambda \in K, x \in V$
		\item $\norm{x+y} \leq \max(\norm{x}, \norm{y})\ \forall x,y, \in V$
	\end{enumerate}
	Two norms $\norm{\cdot}, \norm{\cdot}'$ are \textbf{equivalent} if they induce the same topology on V
	$\iff \exists C,D > 0$ s.t. $C\norm{x} \leq \norm{x}' \leq D\norm{x}\ \forall x \in V$.
\end{definition}

\begin{prop}
	Let $K$ be a complete valued field and $V$ a finite dimensional $K$-vector space.
	Let $x_1, \dots, x_n$ be a basis of $V$, 
	then if $x = \sum a_i x_i \in V$, 
	$$\norm{x}_{\max} = \max_i \abs{a_i}$$ defines a norm on $V$, 
	and $V$ is complete w.r.t $\norm{\cdot}_{\max}$.
	
	Moreover, if $\norm{\cdot}$ is any norm on $V$, 
	then $\norm{\cdot}$ is equivalent to $\norm{\cdot}_{\max}$ and hence $V$ is complete w.r.t $\norm{\cdot}$.
	\label{33}
\end{prop}
	
\begin{lemma}
	Let $K$ be a valued field. Then $\mathcal{O}_K$ is integrally closed in $K$.
\end{lemma}

\begin{corollary}
	Let $K$ be a complete valued field, $L/K$ finite.
	Equip $L$ with $\abs{\cdot}_L$ extending $\abs{\cdot}$ on $K$.
	Then $\mathcal{O}_L$ is the integral closure of $\mathcal{O}_K$ inside $L$.
\end{corollary}

\subsection{Newton Polygons}
\begin{definitionnn}
	$S \subset \mathbb{R}^2$ is \textbf{lower convex} if
	\begin{enumerate}[label=\roman*.]
		\item $(x, y) \in S \implies (x, z) \in S\ \forall z \geq y$
		\item $S$ is convex
	\end{enumerate}
\end{definitionnn}

Given any $T \subset \mathbb{R}^2$, there exists a minimal lower convex $LCH(T) \supseteq T$ ($LCH(T) = \bigcap_{T\subset S', S' \text{lower convex}} S'$).

\begin{definitionnn}
	Let $f(x) = a_0 + a_1 x + \dots + a_n x^n \in K[x]$ where $K$ is a valued field, $v$ a valuation on $K$.
	
	Define the \textbf{Newton polygon} of $f$ as $LCH\left(\left\{(i, v(a_i)) \,\middle|\, \begin{tabular}{c}$i=0,1,\dots,n$ \\ $a_i \neq 0$\end{tabular}\right\}\right)$.
\end{definitionnn}

\begin{definitionnn}
	The horizontal length of a line segment is called the \textbf{multiplicity}.
	Line segments have a \textbf{slope}.
\end{definitionnn}

\begin{theorem}
	Let $K$ be a complete valued field,
	$v$ a valuation on $K$,
	$f(x)=a_0 + a_1 x + \dots + a_n x^n \in K[x]$.
	Let $L$ be the splitting field of $f$ over $K$,
	equipped with the unique extension $w$ of $v$.
	
	If $(r, v(a_r)) \to (s, v(a_s))$ is a line segment of the Newton polygon of $f$ with slope $-m \in \mathbb{R}$,
	then f has precisely $s-r$ roots of valuation $m$.
\end{theorem}
\begin{proof}
	Dividing by $a_n$ only shifts the NP vertically,
	so wlog $a_n=1$.
	
	Number the roots of $f$ s.t.
	\begin{center}
	\begin{tabular}{ccccccc}
		$v(\alpha_1)$ & $=$ & $\dots$ & $=$ & $v(\alpha_{s_1})$ & $=$ & $m_1$ \\
		$v(\alpha_{s_1+1})$ & $=$ & $\dots$ & $=$ & $v(\alpha_{s_2})$ & $=$ & $m_2$ \\
		$\vdots$ &  &  & & $\vdots$ & & $\vdots$ \\
		$v(\alpha_{s_t+1})$ & $=$ & $\dots$ & $=$ & $v(\alpha_{s_1})$ & $=$ & $m_{t+1}$ \\
	\end{tabular}
	\end{center}
	where $m_1 < m_2 < \dots < m_{t+1}$, and the $\alpha_i$ are the roots of $f$ with multiplicity.
	
	$v(a_n)=v(1)=0$
	
	$v(a_{n-1}) = v(\sum_i a_i) \geq \min_i v(\alpha_i) = m_1$
	
	$v(a_{n-2}) \geq \min_{i \neq j} v(\alpha_i \alpha_j) = 2m_1$
	
	$v(a_{n-s_1}) = v(\sum_{i_1, \dots i_{s_1} \text{distinct}} \alpha_{i_1}\dots\alpha_{i_{s_1}}) = s_1 m_1$
	
	$v(a_{n-s_1-1}) \geq \min v(\alpha_{i_1}\dots\alpha_{i_{s_1+1}}) = s_1m_1+m_2$
	
	$\vdots$
	
	$v(a_{n-s_2}) =\min v(\alpha_{i_1}\dots\alpha_{i_{s_2}}) = s_1m_1 + (s_2-s_1)m_2$
	
	etc. Drawing the lines between the points $(n, 0)$, $(n-s_1, s_1m_1)$, $\dots$ gives the NP of $f$.
	
	The first line segment has length $n-(n-s_1)=s_1$ and slope $\frac{0-s_1m_1}{n-(n-s_1)} = -m_1$. For $k\geq 2$, the $k$th line segment has length $(n-s_{k-1})-(n-s_k)=s_k-s_{k-1}$ and slope
	$$\frac{(s_1m_1+\sum_{i=1}^{k-2}(s_{i+1}-s_i)m_{i+1}) - (s_1m_1+\sum_{i=1}^{k-1}(s_{i+1}-s_i)m_{i+1})}{(n-s_{k-1})-(n-s_k)}$$
	$$= \frac{-(s_k-s_{k-1})m_k}{s_k - s_{k-1}} = -m_k$$

\end{proof}

\begin{corollary}
	If $f$ is irreducible, then the NP has a single line segment.
\end{corollary}
\begin{proof}
	we need to show that all roots have the same valuation. Let $\alpha, \beta$ be roots in the splitting field $L$. Then $\exists \sigma \in \Aut(L/K)$ s.t. $\sigma(\alpha) = \beta$. So $v(\alpha)=v(\sigma(\alpha))=v(\beta)$ by Corollary 30.
\end{proof}

\begin{definition}
	Let $K$ be a valued field with valuation $v$. $K$ is a \textbf{discretely valued field} (DVF) if $v(K^\times)\subset \mathbb{R}$ is a discrete subgroup of $\mathbb{R}$ ($\iff v(K^\times)$ is infinite cyclic).
\end{definition}

\begin{definition}
	A complete DVF with finite residue field is called a \textbf{local field}.
\end{definition}

Let $K$ be a DVF. $\pi \in K$ is called a \textbf{uniformiser} if $v(\pi) > 0$ and $v(\pi)$ generates $v(K^\times)$ ($\iff v(\pi)$ has minimal positive valuation).

\begin{prop}
	Let $K$ be a DVF, uniformiser $\pi$. Let $S \subset \mathcal{O}_K$ be a set of coset representatives of $\mathcal{O}_k/\mathfrak{m}_K = k_K$ containing 0. Then
	\begin{enumerate}
		\item The non-zero ideals of $\mathcal{O}_K$ are $\pi^n\mathcal{O}_K$, $n \geq 0$
		\item $\mathcal{O}_K$ is a PID with unique prime $\pi$ (up to units), $\mathfrak{m}_K=\pi\mathcal{O}_K$
		\item The topology on $\mathcal{O}_K$ induced by $\abs{\cdot}$ is the $\pi$-adic topology
		\item If $K$ is complete, then $\mathcal{O}_K$ is $\pi$-adically complete
		\item If $K$ is complete, then any $x \in K$ can be written uniquely as
		$$ x = \sum_{n \gg -\infty}^{\infty} a_n \pi^n$$
		with $a_n \in S$ and $\abs{x} = \abs{pi}^{-\inf\{n \,|\, a_n \neq 0\}}$
		\item The completion $\hat{K}$ of $K$ is a DVF, $\pi$ is a uniformiser and 
		$$\mathcal{O}_K/\pi^n\mathcal{O}_K \overset{\sim}{\longrightarrow} \mathcal{O}_{\hat{K}}/\pi^n\mathcal{O}_{\hat{K}}$$
		via the natural map.
	\end{enumerate}
\end{prop}
\begin{proof}
	The same as for $\mathbb{Q}_p$ and $\mathbb{Z}_p$ (use $\pi$ instead of $p$). 
	Note that $\abs{\hat{K}} = \abs{K}$ by Ex 9, sheet 1 ($\implies \hat{K}$ is a DVF).
\end{proof}

\begin{prop}
	Let $K$ be a DVF.
	Then $K$ is a local field $\iff \mathcal{O}_K$ is compact 
\end{prop}
\begin{proof}
	$\mathcal{O}_K$ compact $\implies \pi^{-n}\mathcal{O}_K$ is compact $\forall n \geq 0$ ($\pi$ uniformiser).
	
	$\mathcal{O}_K \cong \pi^{-n}\mathcal{O}_K \implies K = \bigcup_{n \geq 0}^{\infty} \pi^{-n} \mathcal{O}_K$ is complete.
	
	Also $\mathcal{O}_K \twoheadrightarrow k_K$ and this map is continuous when $k_K$ is given the discrete topology.
	So $k_K$ is compact and discrete $\implies k_K$ finite.
	
	Conversely, we seek to prove that $K$ local $\implies$ $\mathcal{O}_K$ is sequentially compact ($\iff$ compact).
	Note that $\mathcal{O}_K/\pi^n\mathcal{O}_K$ is finite $\forall n \geq 0$ (induction and $\pi^{n-1}\mathcal{O}_K/\pi^n\mathcal{O}_K \cong \mathcal{O}_K/\pi\mathcal{O}_K$).
	
	Let $(x_i)$ be a sequence in $\mathcal{O}_K$.
	$\exists$ a subsequence $(x_{1i})$ which is constant modulo $\pi$.
	Keep going: choose a subsequence $(x_{n+1,i})$ of $(x_{ni})$ s.t. $(x_{n+1, i})$ is constant mod $\pi^{n+1}$.
	
	Then $(x_{ii})_{i=1}^\infty$ converges: it's Cauchy since $\abs{x_{ii}-x_{jj}} \leq \abs{\pi}^j\ \forall j \leq i$, and $K$ is complete.
\end{proof}

\begin{definition}
	A ring $R$ is called a \textbf{discrete valuation ring} (DVR) if it is a PID with a unique prime element (up to units).
\end{definition}

\begin{prop}
	$R$ is a DVR $\iff R \cong \mathcal{O}_K$ for some DVF $K$.
\end{prop}
\begin{proof}
	The reverse implication is contained in Proposition 42.
	
	Suppose $R$ is a DVR, $\pi$ prime.
	$\forall x \in R \backslash \{0\}$,
	$\exists! u \in R^\times,\, n \in \mathbb{Z}_{\geq 0}$ such that $x = \pi^n u$
	by uniqueness of prime factorisation.
	
	Define $v(x) = \begin{cases}
	n & \text{if } x \neq 0 \\
	\infty & \text{if } x = 0
	\end{cases}
	\in \mathbb{Z}_{\geq 0} \cup \{\infty\}$.
	
	$v$ defines a discrete valuation of $R \implies v$ extends uniquely to $K = \Frac(R)$.
	It remains to show that $R=\mathcal{O}_K$.
	First, note that $K=R[\frac{1}{\pi}]$.
	Any non-zero element looks like $\pi^nu,\,u\in R^\times,\, n \in \mathbb{Z}$,
	so it is invertible.
	
	Then $v(\pi^nu)=n \in \mathbb{Z}_{\geq 0} \iff \pi^nu \in R$
	
	$\therefore R = \mathcal{O}_K$.
\end{proof}

\begin{definition}
	Let $K$ be a valued field with residue field $k_K$.
	$K$ has \textbf{equal characteristic} if $\characteristic K = \characteristic k_K$,
	\textbf{mixed characteristic} otherwise ($\implies \characteristic K =0, \characteristic k_K > 0$).
\end{definition}

\begin{definition}
	Let $R$ be a ring of characteristic $p$.
	$R$ is \textbf{perfect} if the Frobenius map $x \mapsto x^p$ is an automorphism of $R$.
\end{definition}

\begin{theorem}
	Let $K$ be a complete DVF of equal characteristic $p$ and assume that $k_K$ is perfect.
	Then $K \cong k_K[[T]]$ (as DVFs).
\end{theorem}

\begin{corollary}
	Let $K$ be a local field of equal characteristic $p$.
	Have $k_K \cong \mathbb{F}_q$ for some $q$ a power of $p$,
	and $K \cong \mathbb{F}_q((T))$.
\end{corollary}

\begin{definition}
	Let $K$ be a DVF.
	The \textbf{normalised valuation} $v_K$ on $K$ is the unique valuation on $K$ in the given equivalence class
	s.t. $v_K(\pi) = 1$ for any uniformiser $\pi$.
\end{definition}

\begin{lemma}
	Let $R$ be a ring and let $x \in R$.
	Assume that $R$ is $x$-adically complete and that $R/xR$ is perfect of characteristic $p$.
	
	Then $\exists!$ map $[-]: R/xR \to R$ such that
	\begin{align*}
		[a] &\equiv a \mod x \\
		[ab] &= [a][b]\ \forall a,b \in R/xR
	\end{align*}
	Moreover if $R$ has characteristic $p$, then $[-]$ is a ring homomorphism.
\end{lemma}
\begin{proof}
	Let $a \in R/xR$.
	$\exists!\ a^{p^{-n}} \in R/xR\ \forall n \geq 0$ since $R/xR$ is perfect.
	Now lift arbitrarily: take $\alpha_n \in R$ such that $\alpha_n \equiv a^{p^{-n}} \mod x$.
	
	Put $\beta_n = \alpha_n^{p^n}$.
	
	Claim: $\lim_{n \to \infty} \beta_n$ exists and is independent of choices. Call this $[a]$.
	
	Note that if the limit exists no matter how the $\alpha_n$ are chosen,
	then it is independent of the choices.
	
	Want to prove $\beta_{n+1} - \beta_n \to 0$ $x$-adically.
	$$\beta_{n+1} - \beta_n = (\alpha_{n+1}^p)^{p^n}-(\alpha_{n})^{p^n}$$
	$$\alpha_{n+1}^p \equiv (a^{p^{-n-1}})^p \equiv a^{p^{-n}} \equiv \alpha_n \mod x$$
	The binomial theorem, $R/xR$ characteristic $p$ and induction $\implies$
	$$(\alpha_{n+1}^p)^{p^n} \equiv \alpha_n^{p^n} \mod x^{n+1}$$
	i.e. $\beta_{n+1} - \beta_n \equiv 0 \mod x^{n+1}$ so $\lim_{n \to \infty} \beta_n$ exists.
	
	Multiplicativity: if $b \in R/xR$, 
	with $\gamma_n \in R$ lifting $b^{p^{-n}}\ \forall n \geq 0$,
	then $\alpha_n\gamma_n$ lifts $(ab)^{p^{-n}} = a^{p^{-n}}b^{p^{-n}}$
	$$\implies [ab] = \lim_{n\to\infty}\alpha_n^{p^n}\lim_{n\to\infty}\gamma_n^{p^n}=[a][b]$$
	
	$[a]\equiv a \mod x:$
	$$\ \lim_{n\to\infty}\alpha_n^{p^n}\equiv\lim_{n\to\infty}(a^{p^{-n}})^{p^n}\equiv \lim_{n\to\infty} a \equiv a \mod x$$
	
	Uniqueness: let $\phi: R/xR \to R$ be another map with these properties.
	$$[a] = \lim_{n \to \infty} \phi(a^{p^{-n}})^{p^n} = \lim_{n\to\infty}\phi(a) = \phi(a)$$
	since $\phi(a^{p^{-n}}) \equiv a^{p^{-n}} \mod x$ and $\phi$ is multiplicative.
	
	Finally, if $R$ has characteristic $p$,
	then $\alpha_n+\gamma_n$ lifts $a^{p^{-n}}+b^{p^{-n}}-(a+b)p^{-n}$, so
	$$[a+b] = \lim_{n\to\infty}(\alpha_n+\gamma_n)^{p^n} = \lim_{n\to\infty}\alpha_n^{p^n}+\gamma_n^{p^n} = [a] + [b]$$
	So $[-]$ is additive and multiplicative and (check!) $[1]=1$, so it's a homomorphism.
\end{proof}

\begin{definition}
	$[-]:R/xR \to R$ is called the \textbf{Teichm\"uller map/lift}
	and $[x]$ is called the \textbf{Teichm\"uller lift/representative} of $x$.
\end{definition}
\begin{proof}[Proof of Theorem 48]
	$K$ is a complete DVF.
	We want to prove that $\mathcal{O}_K \cong k_K[[T]]$.
	
	$\mathcal{O}_K \characteristic p \implies [-]:k_K \hookrightarrow \mathcal{O}_K$ is an injective ring homomorphism.
	
	Choose a uniformiser $\pi \in \mathcal{O}_K$. Then
	$k_K = \mathcal{O}/\pi\mathcal{O}_K$, $\mathcal{O}_K$ $\pi$-adically complete.
	Now define
	\begin{align*}
		k_K[[T]] &\to \mathcal{O}_K \\
		\sum_{n=0}^\infty a_n T^n &\mapsto \sum_{n=0}^\infty [a_n] \pi^n
	\end{align*}
	It's a bijection by one of the basic properties of complete DVFs, check it's a homomorphism.
\end{proof}

Fact: let $F$ be a field of characteristic $p$. Then $F$ is perfect $\iff$ every finite extension of $F$ is separable.

$\mathbb{F}_q$ is perfect for every $q=p^n$.

\subsection{*Witt Vectors*}

\begin{definition}
	Let $A$ be a ring. $A$ is called a \textbf{strict p-ring} if $A$ is $p$-torsionfree,
	$p$-adically complete and $A/pA$ is perfect.
\end{definition}

\begin{prop}
	Let $X = \{x_i \,|\, i \in I\}$ be a set.
	Let
	\begin{align*}
	B &= \mathbb{Z}[x_i^{p^{-\infty}} \,|\, i \in I]\\
	&= \bigcup_{n=0}^\infty \mathbb{Z}[x_i^{p^{-n}} \,|\, i \in I]
	\end{align*}
	(Note that $\mathbb{Z}[x_i \,|\, i \in I] \subseteq \mathbb{Z}[x_i^{p^{-1}} \,|\, i \in I] \subseteq \dots$)
	and let $A$ be the $p$-adic completion of $B$. Then $A$ is a strict $p$-ring,
	and $A/pA \cong \mathbb{F}_p[x_i^{p^{-\infty}} \,|\, i \in I]$ (think of as `universal perfect rings').
\end{prop}

\begin{lemma}
	Let $A$ and $B$ be strict $p$-rings and let $f: A/pA \to B/pB$ be a ring homomorphism.
	Then $\exists!$ homomorphism $F:A \to B$ such that $f \equiv F \mod p$.
	
	$F$ is explicitly given by $F(\sum_{n=0}^\infty [a_n]p^n) = \sum_{n=0}^\infty [f(a_n)]p^n$.
\end{lemma}

\begin{theorem}
	Let $R$ be a perfect ring.
	Then $\exists!$ (up to isomorphism) strict $p$-ring $W(R)$ (called the \textbf{Witt vectors} of R)
	such that $W(R)/pW(R) \cong R$.
	Moreover, if $R'$ is another perfect ring the reduction mod $p$ map gives a bijection
	$$Hom_{\text{Ring}}(W(R), W(R')) \overset{\sim}{\longrightarrow} Hom_{\text{Ring}}(R, R')$$
\end{theorem}

\begin{prop}
	A complete DVR $A$ of mixed characteristic with perfect residue field and such that $p$ is a uniformiser
	is the same as a strict $p$-ring $A$ such that $A/pA$ is a field.
\end{prop}

\begin{definition}
	Let $R$ be a mixed characteristic DVR with normalised valuation $v_R$.
	The integer $v_R(p)$ where $p$ is the characteristic of the residue field of $R$
	is called the \textbf{absolute ramification index} of $R$.
\end{definition}

\begin{corollary}
	Let $R$ be a CDVR of mixed characteristic with absolute ramification index 1 and perfect residue field $k$.
	Then $R \cong W(k)$.
\end{corollary}
\setcounter{definition}{52}
\renewcommand{\thedefinition}{\arabic{definition}'}
\begin{lemma}
	Let $A$ be a strict $p$-ring and let $B$ be a $p$-adically complete ring.
	If $f: A/pA \to B/pB$ is a ring homomorphism,
	then $\exists!$ ring homomorphism $F:A \to B$ with $f \equiv F \mod p$.
\end{lemma}
\setcounter{definition}{57}
\renewcommand{\thedefinition}{\arabic{definition}}

\begin{theorem}
	Let $R$ be a CDVR of mixed characteristic with perfect residue field $k$ and uniformiser $\pi$.
	Then $R$ is finite over $W(k)$.
\end{theorem}

\begin{corollary}
	Let $K$ be a mixed characteristic local field.
	Then $K$ is a finite extension of $\mathbb{Q}_p$.
\end{corollary}

\section{Some p-adic Analysis}

Recall the power series
$$\exp(x) = \sum_{n=0}^\infty \frac{x^n}{x!}$$
$$\log(1+x) = \sum_{n=1}^\infty (-1)^{n-1} \frac{x^n}{n}$$

\begin{prop}
	Let $K$ be a complete valued field with absolute value $\abs{\cdot}$,
	and assume that $K \supseteq \mathbb{Q}_p$,
	$\abs{\cdot}|_{\mathbb{Q}_p} = \abs{\cdot}_p$.
	Then $\exp(x)$ converges for $\abs{x} < p^{-\frac{1}{p-1}}$ and $\log(1+x)$ converges for $\abs{x}<1$,
	and they define continuous maps
	$$\exp :\left\{x \in K \,|\, \abs{x} < p^{-\frac{1}{p-1}}\right\} \to \mathcal{O}_K$$
	$$\log: \left\{x \in K \,|\, \abs{x} < 1 \right\} \to K$$
\end{prop}
\begin{proof}
	$v=-\log_p\abs{\cdot}$, this extends $v_p$.
	
	log: $v(n) \leq \log_p n \implies$
	$$v(\frac{x^n}{n}) \geq n \cdot v(x) - \log_p n \to \infty$$
	if $v(x) > 0$.
	
	exp: $v(n!) = \frac{n-s_p(n)}{p-1}$.
	Then
	$$v(\frac{x^n}{n!}) \geq n\cdot v(x) - \frac{n}{p-1} = n(v(x)-\frac{1}{p-1}) \geq 0$$
	and $\to \infty$ as $n \to \infty$ if $v(x) > \frac{1}{p-1}$.
	
	For continuity, we use uniform convergence as in the real case.
\end{proof}

\setcounter{definition}{52}
\renewcommand{\thedefinition}{\arabic{definition}''}
\begin{lemma}
	Let $A$ be a strict $p$-ring,
	$B$ a ring with element $x \in B$ such that $B$ is $x$-adically complete and $B/xB$ is perfect of characteristic $p$.
	If $f: A/pA \to B/pB$ is a ring homomorphism,
	then $\exists!$ ring homomorphism $F:A \to B$ with $f \equiv F \mod p$.
\end{lemma}
\setcounter{definition}{60}
\renewcommand{\thedefinition}{\arabic{definition}}

Let $n\geq 1$.
$${x \choose n} = \frac{x(x-1)\dots(x-n+1)}{n!}$$
is a polynomial in $x$, and so defines a continuous function $\mathbb{Z}_p \to \mathbb{Q}_p$,
$x \mapsto {x \choose n}$.

Since ${x \choose n} \in \mathbb{Z}$ if $x \in \mathbb{Z}_{\geq 0}$,
by the density of $\mathbb{Z}_{\geq 0} \subset \mathbb{Z}_p$ we must have ${x \choose n} \in \mathbb{Z}_p \forall\ x \in \mathbb{Z}_p$.

When $n=0$,
set ${x \choose 0}=1 \forall\ x \in \mathbb{Z}_p$.

\subsection{Mahler's Theorem}
\begin{theorem}[Mahler]
	Let $f: \mathbb{Z}_p \to \mathbb{Q}_p$ be a continuous function.
	Then $\exists$ a unique sequence $(a_n)_{n\geq 0}$ with $a_n \in \mathbb{Q}_p$, $a_n \to 0$ such that
	$$f(x) = \sum_{n=0}^{\infty} a_n {x \choose n}\ \forall x \in \mathbb{Z}_p$$
	and $\sup_{x \in \mathbb{Z}_p}\abs{f(x)}_p = \max_{n=0,1,\dots}\abs{a_n}_p$.
\end{theorem}

Let $\mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p) = \{f: \mathbb{Z}_p \to \mathbb{Q}_p \text{ cts}\}$.
This is a $\mathbb{Q}_p$-vector space.

If $f \in \mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p)$, set $\norm{f} = \sup_{x \in \mathbb{Z}_p}\abs{f(x)}_p$.
$\mathbb{Z}_p$ compact $\implies f$ is bounded,
so the supremum exists and is attained.

Let $c_0$ denote the set of sequences $(a_n)_{n=0}^\infty$ in $\mathbb{Q}_p$ such that $a_n \to 0$.
This is a $\mathbb{Q}_p$-vector space, with a norm $\norm{(a_n)} = \max_{n=0,1,\dots}\abs{a_n}_p$,
and $c_0$ is complete w.r.t $\norm{\cdot}$.

Define $\triangle: \mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p) \to \mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p)$ by $\triangle f(x) = f(x+1) - f(x)$.
By induction,
$$\triangle^n f(x) = \sum_{i=0}^n (-1)^i {n \choose i} f(x+n-i)$$
Note that $\triangle$ defines a linear operator on $\mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p)$, and
$$\abs{\triangle f(x)}_p = \abs{f(x+1) - f(x)}_p \leq \norm{f} \implies \norm{\triangle f} \leq \norm{f} \text{ or } \norm{\triangle} \leq 1$$

\begin{definition}
	Let $f \in \mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p)$.
	The \textbf{nth Mahler coefficient} $a_n(f) \in \mathbb{Q}_p$ is defined by
	$$a_n(f) = \triangle^n f(0) = \sum_{i=0}^n (-1)^i {n \choose i} f(n-i)$$
\end{definition}

\begin{lemma}
	Let $f \in \mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p)$.
	Then $\exists k \geq 1$ such that $\norm{\triangle^{p^k}f} \leq \frac{1}{p}\norm{f}$.
\end{lemma}
\begin{proof}
	If $f=0$ there's nothing to prove,
	so wlog $\norm{f} = 1$ (by scaling).
	Then we want to show that $\triangle^{p^k} f(x) \equiv 0 \mod p\ \forall x \in \mathbb{Z}_p$,
	some $k \geq 1$.
	$$\triangle^{p^k} f(x) = \sum_{i=0}^{p^k}(-1)^i {p^k \choose i}f(x+p^k-i) \equiv f(x+p^k) - f(x) \mod p$$
	because ${p^k \choose i} \equiv 0 \mod p$ for $i=1,2,\dots,p^k-1$ and $(-1)^{p^k} \equiv -1 \mod p$.

	Now $\mathbb{Z}_p$ compact $\implies f$ is uniformly continuous,
	so $\exists k$ such that $\abs{x-y}_p \leq p^{-k} \implies \abs{f(x)-f(y)}_p \leq \frac{1}{p}\ \forall x,y \in \mathbb{Z}_p$.
	Take this $k$, and we're done.
\end{proof}

\begin{prop}
	The map $f \mapsto (a_n(f))_{n=0}^\infty$ defines an injective norm-decreasing linear map $\mathcal{C}(\mathbb{Z}_p,\mathbb{Q}_p) \to c_0$.
\end{prop}
\begin{proof}
	First we prove that $a_n(f) \to 0$.
	We have $\abs{a_n(f)}_p \leq \norm{\triangle^n f}$,
	so it suffices to prove that $\norm{\triangle^n f} \to 0$.
	Since $\norm{\triangle} \leq 1$,
	$\norm{\triangle^n f}$ is monotonically decreasing,
	so it suffices to find a subsequence $\to 0$.
	
	Apply Lemma 63 repeatedly to get $k_1, k_2, \dots$ such that
	$$\norm{\triangle^{p^{k_1 + \dots + k_n}}f} \leq \frac{1}{p^n}\norm{f}$$
	This gives the desired subsequence.
	
	Note that $\abs{a_n(f)}_p \leq \norm{\triangle^n f} \leq \norm{\triangle}$,
	so $\norm{(a_n(f))_n} = \max_{n=0,1,\dots}\abs{a_n(f)}_p \leq \norm{f}$,
	so the map is norm-decreasing. 
	Linearity follows from the linearity of $\triangle$.
	
	Injectivity: assume $a_n(f)=0\ \forall n \geq 0$.
	Then $a_0(f) = f(0) = 0$,
	and by induction $f(n) = \triangle^n f(0) = a_n(f) = 0\ \forall n\geq 0$.
	So $f=0$ by continuity since $\mathbb{Z}_{\geq 0} \subseteq \mathbb{Z}_p$ is dense.
\end{proof}

We will prove that the linear maps
\begin{align*}
f &\mapsto (a_n(f)) \\
\mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p) &\rightleftarrows c_0 \\
f_a(x)=\sum_{n=0}^\infty a_n {x \choose n} &\mapsfrom (a_n) = a
\end{align*}
are mutual inverses and norm-preserving.

\begin{lemma}
	We have
	${x \choose n} + {x \choose n-1} = {x+1 \choose n}\ \forall n \in \mathbb{Z}_{\geq 1}$
	and $x \in \mathbb{Z}_p$.
	\label{65}
\end{lemma}
\begin{proof}[Proof 1]
	True when $x \in \mathbb{Z}_{\geq n}$,
	and then the lemma follows by the density of $\mathbb{Z}_{\geq n} \subset \mathbb{Z}_p$ and continuity.
\end{proof}
\begin{proof}[Proof 2]
	True when $x \in \mathbb{Z}_{\geq n}$,
	and both sides are polynomials which agree on an infinite set of points $\implies$ equal as elements of $\mathbb{Q}[x]$.
	Now evaluate.
\end{proof}

Now let $a = (a_n)_{n=0}^\infty \in c_0$. 
Define $f_a: \mathbb{Z}_p \to \mathbb{Q}_p$,
$$f_a(x) = \sum_{n=0}^\infty a_n {x \choose n}$$
This is a uniformly convergent series,
so $f_a \in \mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p)$.

\begin{prop}
	$a \mapsto f_a$ defines a norm-decreasing linear map $c_0 \to \mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p)$.
	Moreover, $a_n(f_a) = a_n\ \forall n \geq 0$.
\end{prop}
\begin{proof}
	Linearity is clear.
	
	Norm decreasing:
	\begin{align*}
		\abs{f_a(x)}_p &= \abs{\sum_{n=0}^\infty a_n {x \choose n}} \\
		&\leq \sup_n \abs{a_n}_p \abs{{x \choose n}}_p \\
		&\leq \sup_n \abs{a_n}_p = \norm{a}\ \forall x \in \mathbb{Z}_p
	\end{align*}
	$\implies \norm{f_a} \leq \norm{a}$.
	
	Inverses: $\forall k \in \mathbb{Z}_{\geq 0}$ define $a^{(k)}=(a_k, a_{k+1}, a_{k+2}, \dots)$
	\begin{align*}
		\triangle f_a(x) &= f_a(x+1)-f_a(x) \\
		&= \sum_{n=1}^\infty a_n\left({x+1 \choose n} - {x \choose n}\right) \\
		&= \sum_{n=1}^\infty a_n {x \choose n-1} \text{ by Lemma \ref{65}} \\
		&= \sum_{n=0}^\infty a_{n+1}{x \choose n} = f_{a^{(1)}}(x)
	\end{align*}
	Iterating, $\triangle^k f_a = f_{a^{(k)}} \implies$
	$$a_n(f_a) = \triangle^n f_a(0) = f_{a^{(n)}}(0) = a_n$$
\end{proof}

Summing up:
\begin{align*}
	F(f) &= (a_n(f)) \\
	V = \mathcal{C}(\mathbb{Z}_p, \mathbb{Q}_p) &\underset{G}{\overset{F}{\rightleftarrows}} c_0 = W \\
	G(a) &= f_a
\end{align*}
We know: $F$ is injective and norm-decreasing,
$FG = id_W$ and $G$ is norm-decreasing.

\begin{lemma}
	In this situation,
	$GF = \id_V$ and $F$ and $G$ are norm-preserving.
\end{lemma}
\begin{proof}
	Let $v \in V$.
	Then $F(v-GFv) = Fv - Fv = 0 \implies v = GFv$ since $F$ is injective.
	So $GF = \id_V$.
	
	Norm-preserving: $v \in V$,
	have $\norm{Fv} \leq \norm{v}$,
	but also $\norm{Fv} \geq \norm{GFv} = \norm{v}$,
	so $F$ is norm preserving.
	Same proof for $G$.
\end{proof}

This finishes the proof of Mahler's Theorem.

\section{Ramification Theory for Local Fields}

The characteristic of the residue field of any local field from now on will be $p$ (unless stated otherwise).

\subsection{More on Finite Extensions}

Recall: let $R$ be a PID and let $M$ be a f.g. $R$-module.
Assume that $M$ is torsion free.
Then $\exists! n \geq 0$ such that $M \cong R^n$.
Moreover, if $N \subseteq M$ is a submodule,
then $N$ is finitely generated and $N \cong R^m$, with $m \leq n$.

\begin{prop}
	Let $K$ be a local field,
	$L/K$ finite of degree $n$.
	Then $\mathcal{O}_L$ is a finite, free $\mathcal{O}_K$-module of rank $n$
	(i.e. $\mathcal{O}_L \cong \mathcal{O}_K^n$ as $\mathcal{O}_K$-modules),
	and $k_L/k_K$ is an extension of degree $\leq n$.
	Moreover, $L$ is a local field.
\end{prop}
\begin{proof}
	Choose a $K$-basis $\alpha_1, \dots, \alpha_n$ of $L$.
	Let $\norm{\cdot}$ denote the maximum norm $\norm{\sum_{i=1}^n x_i \alpha_i} = \max_{i=1,\dots,n}\abs{x_i}$
	on $L$ as in Proposition \ref{33}.
	$\norm{\cdot}$ is equivalent to $\abs{\cdot}$ (the extended absolute value on $L$) as $K$-norms,
	so $\exists r > s > 0$ such that
	$$M = \{x \in L \,|\, \norm{x} \leq s \} \subseteq \mathcal{O}_L \subseteq N = \{x \in L \,|\, \norm{x} \leq r\}$$
	
	Increasing $r$ and decreasing $s$ as necessary wlog $r=\abs{a}$, $s=\abs{b}$ for some $a,b \in K^\times$. Then
	$$M = \bigoplus_{i=1}^n \mathcal{O}_K b\alpha_i \subseteq \mathcal{O}_L \subseteq N = \bigoplus_{i=1}^n \mathcal{O}_K a \alpha_i$$
	$\implies \mathcal{O}_L$ is f.g. and free of rank $n$ over $\mathcal{O}_K$.
	
	Since $\mathfrak{m}_K = \mathfrak{m}_L \cap \mathcal{O}_K$,
	we have a natural injection
	$$k_K = \mathcal{O}_K/\mathfrak{m}_K \hookrightarrow \mathcal{O}_L/\mathfrak{m}_L = k_L$$
	
	Since $\mathcal{O}_L$ is generated over $\mathcal{O}_K$ by $n$ elements,
	$k_L$ is generated by $n$ elements over $k_K$,
	i.e. $[k_L:k_K] \leq n$.
	
	$L$ a local field: $k_L/k_K$ is finite and $k_K$ finite $\implies k_L$ is a finite field.
	$L$ is complete by Theorem \ref{29}.
	
	Let $v_K$ be the normalised valuation on $K$,
	$w$ the extension of $v_K$ to $L$.
	Then $w(\alpha) = \frac{1}{n} v_K (N_{L/K}(\alpha))$, so
	$$w(L^\times) \subseteq \frac{1}{n}v(K^\times) = \frac{1}{n}\mathbb{Z}$$
	$\implies$ it's discrete.
\end{proof}

\begin{definition}
	Let $L/K$ be a finite extension of local fields.
	The \textbf{inertia degree} of $L/K$ is
	$$f_{L/K} = [k_L:k_K]$$
	
	Let $v_L$ be the normalised valuation on $L$ and $\pi_K$ a uniformiser of $K$.
	The integer
	$$e_{L/K} = v_L(\pi_K)$$
	is called the \textbf{ramification index} of $L/K$.
\end{definition}

\begin{theorem}
	Let $L/K$ be a finite extension of local fields.
	Then $[L:K] = e_{L/K}f_{L/K}$ and $\exists \alpha \in \mathcal{O}_L$ such that $\mathcal{O}_L = \mathcal{O}_K[\alpha]$.
	\label{70}
\end{theorem}
\begin{proof}
	Write $e=e_{L/K}$, $f=f_{L/K}$.
	
	$k_L/k_K$ is separable,
	so $\exists \bar{\alpha} \in k_L$ such that $k_L = k_K(\bar{\alpha})$.
	Let $\bar{f}(x) \in k_K[x]$ be the minimal polynomial of $\bar{\alpha}$ over $k_K$,
	and let $f \in \mathcal{O}_K[x]$ be a monic lift of $\bar{f}$ with $\deg f = \deg \bar{f}$.
	
	Claim: $\exists \alpha \in \mathcal{O}_L$ lifting $\bar{\alpha}$ and such that $v_L(f(\alpha)) = 1$ (always $\geq 1$).
	
	Let $\beta \in \mathcal{O}_L$ be any lift of $\bar{\alpha}$.
	If $v(f(\beta)) = 1$, then set $\alpha = \beta$.
	If not, set $\alpha = \beta + \pi_L$ ($\pi_L$ uniformiser of $L$).
	
	$f(\alpha) = f(\beta+ \pi_L) = f(\beta)+f'(\beta)\pi_L + b \pi_L^2$ for some $b \in \mathcal{O}_L$ (Taylor expanding around $\beta$).
	
	Since $v_L(f(\beta)) \geq 2$ and $v_L(f'(\beta)) = 0$,
	we have $v_L(f(\alpha)) = 1$.
	Put $\pi = f(\alpha)$ (uniformiser of $L$).
	
	We claim that $\alpha^i\pi^j$,
	$i=0,\dots,f-1$, $j=0,\dots,e-1$ are an $\mathcal{O}_K$-basis of $\mathcal{O}_L$.
	
	Linear independence: assume $\sum_{i,j}a_{ij}\alpha^i\pi^j=0$ for some $a_{ij} \in K$, not all 0.
	Put $s_j = \sum_{i=0}^{f-1}a_{ij}\alpha^i\ \forall j$.
	$1, \alpha, \dots, \alpha^{f-1}$ are linearly independent over $K$ since there reductions are linearly independent over $k_K$.
	So $\exists j$ such that $s_j \neq 0$.
	
	Claim: $e | v_L(s_j)$ if $s_j \neq 0$.
	
	Let $k$ be such that $\abs{a_{kj}}$ is maximal,
	then $a_{kj}^{-1}s_j = \sum_{i=0}^{f-1}a_{kj}^{-1}a_{ij}\alpha^i \implies a_{kj}^{-1}s_k \not\equiv 0 \mod \pi_L$
	because $1, \bar{\alpha}, \dots, \bar{\alpha}^{f-1}$ are linearly independent over $k_K$.
	
	\begin{align*}
		\implies v_L(a_{kj}^{-1}s_j) = 0 \implies v_L(s_j) = v_L(a_{kj}) &= v_L(a_{kj}^{-1}s_j) \\
		&\in v_L(K^\times) \\
		&= ev_L(L^\times) = e\mathbb{Z}
	\end{align*}
	
	Now write $\sum_{i,j} a_{ij}\alpha^i\pi^j = \sum_{j=0}^{e-1}s_j\pi^j = 0$.
	If $s_j \neq 0$, we have $v_L(s_j\pi^j) = v_L(s_j) + j \in j+e\mathbb{Z}$.
	
	$\implies$ no two non-zero terms in $\sum_{j=0}^{e-1}s_j\pi^j$ have the same valuation.
	
	$\implies \sum_{j=0}^{e-1} s_j\pi^j \neq 0$, which is a contradiction.
	
	Claim $\mathcal{O}_L = \oplus_{i,j}\alpha^i\pi^j$.
	
	Set $M=\oplus_{i,j}\alpha^i\pi^j$ and $N=\oplus_{i=0}^{f-1}\mathcal{O}_K\alpha^i$.
	Then $M=N+\pi+N+\dots+\pi^{e-1}N$.
	Since $1, \bar{\alpha}, \dots, \bar{\alpha}^{f-1}$ span $k_L$ over $k_K$ we must have $\mathcal{O}_L=N+\pi\mathcal{O}_L$.
	\begin{align*}
		\text{Iterate: } \mathcal{O}_L &= N + \pi(N + \pi\mathcal{O}_L) \\
		&= N + \pi N + \pi^2 \mathcal{O}_L \\
		&= \dots \\
		&= N + \pi N + \dots + \pi^{e-1}N + \pi^e \mathcal{O}_L \\
		&= M + \pi_K \mathcal{O}_L \text{ ($\pi_K$ uniformiser of $K$)}
	\end{align*}
	
	Iterate: $\mathcal{O}_L = M + \pi_K^n\mathcal{O}_L\ \forall n \geq 1 \implies M$ is dense in $\mathcal{O}_L$.
	But $M$ is the closed unit ball in $V = \oplus_{ij}K\alpha^i\pi^j \subseteq L$ w.r.t the maximum norm on $V$ w.r.t the basis $\alpha^i\pi^j$.
	
	Proposition \ref{33} and Theorem \ref{29} $\implies$ $M$ is complete both w.r.t the maximum norm and $\abs{\cdot}$ on $L$.
	
	$\implies M \subseteq L$ is closed.
	
	$\implies M = \mathcal{O}_L$.
	
	Finally, since $\alpha^i\pi^j = \alpha^if(\alpha)^j$ is a polynomial in $\alpha$, have $\mathcal{O}_L = \mathcal{O}_K[\alpha]$.
\end{proof}

\begin{corollary}
	Let $M/L/K$ be finite extensions of local fields.
	Then $f_{M/K} = f_{L/K}f_{M/L}$ and $e_{M/K} = e_{L/K}e_{M/L}$.
	\label{71}
\end{corollary}
\begin{proof}
	$[k_M:k_K] = [k_M:k_L][k_L:k_K]$ by multiplicativity of degrees.
	
	$e_{M/L}e_{L/K} = \frac{[M:L]}{f_{M/L}}\frac{[L:K]}{f_{L/K}} = \frac{[M:K]}{f_{M/K}} = e_{M/K}$.
\end{proof}

\begin{definition}
	Let $L/K$ be a finite extension of local fields.
	$L/K$ is \textbf{unramified} if $e_{L/K} = 1$ (or $f_{L/K} = [L:K]$),
	and \textbf{totally ramified} if $f_{L/K} =1$.
\end{definition}

\begin{theorem}
	Let $K$ be a local field.
	For each finite extension $l/k_K$ there is a \textbf{unique} (up to isomorphism) finite unramified extension $L/K$ with $k_L \cong l$ over $k_K$.
	
	Moreover, $L/K$ is Galois with $\Gal(L/K) \cong \Gal(l/k_K)$.
	\label{73}
\end{theorem}
\begin{proof}
	Existence: let $\bar{\alpha}$ be a primitive element of $l/k_K$ with minimal polynomial $\bar{f} \in k_K[x]$.
	Take a monic lift $f \in \mathcal{O}_K[x]$ of $\bar{f}$ ($\deg f = \deg \bar{f}$).
	
	Put $L=K(\alpha)$ where $\alpha$ is a root of $f$.
	$\bar{f}$ irreducible $\implies f$ irreducible $\implies [L:K] = [l:k_K]$.
	
	Moreover, $k_L$ contains a root of $\bar{f}$ (the reduction of $\alpha$).
	So $l \hookrightarrow k_L$ over $k_K \implies [L:K] \geq [k_L:k_K] = [L:K]$.
	
	$\implies L/K$ is unramified and $k_L \cong l$ over $k_K$.
\end{proof}

Uniqueness and Galois property follows from:

\begin{lemma}
	Let $L/K$ be a finite unramified extension of local fields and let $M/K$ be a finite extension.
	Then there is a natural bijection
	$$\Hom_{K-alg}(L,M) \overset{\sim}{\to} \Hom_{k_K-alg}(k_L, k_M)$$
	($\varphi:L\to M$ restricts to $\varphi: \mathcal{O}_L \to \mathcal{O}_M$, then take reductions).
	\label{74}
\end{lemma}
\begin{proof}
	By uniqueness of extended absolute values (Theorem \ref{29})
	any $K$-algebra homomorphism $\phi: L \to M$ is an isometry for the extended absolute values.
	
	Thus $\varphi(\mathcal{O}_L) \subseteq \mathcal{O}_M$, $\varphi(\mathfrak{m}_L) \subseteq \varphi(\mathfrak{m}_M)$
	so we get the induced $k_K$-algebra homomorphism $\bar{\varphi}: k_L \to k_M$.
	This gives
	$$\Hom_{K-alg}(L,M) \to \Hom_{k_K-alg}(k_L, k_M)$$
	
	Bijectivity: let $\bar{\alpha} \in k_L$ be a primitive element over $k_K$,
	$\bar{f} \in k_K[x]$ its minimal polynomial,
	$f \in \mathcal{O}_K[x]$ a monic lift of $\bar{f}$ and $\alpha \in \mathcal{O}_L$ the unique root of $f$ which lifts to $\bar{\alpha}$ (Hensel's Lemma).
	
	Then $k_L = k_L(\bar{\alpha})$ and $L=K(\alpha)$.
	
	\begin{center}
		\begin{tikzcd}
			\varphi \ar[mapsto]{d} & \Hom_{K-alg}(L,M) \ar{r} \ar{d}[rotate=90,anchor=center,yshift=1ex]{\sim} & \Hom_{k_K}(k_L, k_M) \ar{d}[rotate=90,anchor=center,yshift=1ex]{\sim} & \hat{\varphi} \ar[mapsto]{d} \\
			\varphi(\alpha) & \{x \in M \,|\, f(x) = 0 \} \ar{r} & \{\bar{x} \in k_M \,|\, \bar{f}(\bar{x}) = 0 \} & \bar{\varphi}(\bar{\alpha})
		\end{tikzcd}
	\end{center}
	This is a bijection by Hensel's Lemma,
	since $\bar{f}$ is separable.
\end{proof}

\begin{proof}[Proof of \ref{73} cont.]
	Uniqueness: $k_L \cong k_M$ over $k_K$, $L/K$, $M/K$ unramified.
	Then $\bar{\phi}$ lifts to a $K$-embedding $\phi: L \hookrightarrow M$ and $[L:K]=[M:K] \implies \phi$ an isomorphism.
	
	Galois: $\abs{\Aut_K(L)} = \abs{\Aut_{k_K}(k_L)} = [k_L: k_K] = [L:K] \implies L/K$ Galois.
	
	Also, $\Aut_K(L) \to \Aut_{k_K}(k_L)$ is really a homomorphism (so an isomorphism).
\end{proof}

\begin{prop}
	Let $K$ be a local field, $L/K$ finite unramified, $M/K$ finite.
	Say $L,M \subset$ fixed algebraic closure $\bar{K}$ of $K$.
	Then $LM/M$ is unramified.
	Any subextension of $L/K$ is unramified over $K$.
	If $M/K$ is unramified, then $LM/K$ is unramified.
	\label{75}
\end{prop}
\begin{proof}
	Let $\hat{\alpha}$ be a primitive element of $k_L/k_K$,
	$\bar{f} \in k_K[x]$ the minimal polynomial of $\hat{\alpha}$,
	$f \in \mathcal{O}_K[x]$ a monic lift of $\bar{f}$,
	$\alpha \in \mathcal{O}_L$ the unique root of $f$ lifting $\hat{\alpha}$.
	Then $L=K(\alpha)$ so $LM=M(\alpha)$.
	
	Let $\bar{g}$ be the minimal polynomial of $\bar{\alpha}$ over $k_M$.
	Then $\bar{g} | \bar{f} \implies f=gh$ in $\mathcal{O}_M[x]$ by Hensel's Lemma.
	$g$ monic, lifts $\bar{g} \implies g(\alpha)=0$ and $g$ irreducible in $M[x]$.
	
	So $g$ is the minimal polynomial of $\alpha$ over $M \implies$
	$$[LM:M] = \deg g = \deg \bar{g} \leq [k_{LM} : k_M] \leq [LM:M]$$
	$\implies$ have equalities, $LM/M$ unramified.
	
	The second claim follows from the multiplicativity of $f_{L/K}$ and $e_{L/K}$ (Corollary \ref{71}),
	as does the third
	($[LM:K] = [LM:M][M:K] = f_{LM/M}f_{M/K} = f_{LM/K} \implies LM/K$ unramified).
\end{proof}


\begin{corollary}
	Let $K$ be a local field, $L/K$ finite.
	Then $\exists$ a unique maximal subfield $K \subseteq T \subseteq L$ such that $T/K$ is unramified. 
	Moreover, $[T:K] = f_{L/K}$.
\end{corollary}
\begin{proof}
	Existence: $T$ is the composite of all unramified subextensions of $L/K$ (use Proposition \ref{75}).
	
	Have $[T:K] = f_{T/K} \leq f_{L/K}$ by Corollary \ref{71}.
	
	Let $T'/K$ be the unique unramified extension with residue field extension $k_L/k_K$.
	Then $id: k_{T'} = k_L \to k_L$ lifts to a $K$-embedding $T' \overset{\varphi}{\hookrightarrow} L$, by Lemma \ref{74}.
	
	Then $[T:K] \geq [\varphi(T'):K] = f_{L/K} \implies [T:K]=f_{L/K}$.
\end{proof}

\subsection{Totally Ramified Extensions}
Recall

\begin{theorem}[Eisenstein's Criterion]
	Let $K$ be a local field,
	$f(x) = x^n + \dots + a_0 \in \mathcal{O}_K[x]$, $\pi_K$ uniformiser of $K$.
	If $\pi_K | a_{n-1}, \dots, a_0$ and $\pi_K^2 \nmid a_0$,
	then $f$ is irreducible.
\end{theorem}

Note that if $L/K$ finite, $v_K$ a normalised valuation on $K$ and $w$ the unique extension of $v_K$ to $L$.
Then $e_{L/K}^{-1} = w(\pi_L) = \min_{x \in \mathfrak{m}_L}w(x)$.

A polynomial $f(x) \in \mathcal{O}_K[x]$ satisfying the assumptions of Eisenstein's criterion is called an \textbf{Eisenstein polynomial}.

\begin{prop}
	Let $L/K$ be a totally ramified extension of local fields.
	Then $L=K(\pi_L)$ and the minimal polynomial of $\pi_L$ over $K$ is Eisenstein.
	
	Conversely, if $L=K(\alpha)$ and the minimal polynomial of $\alpha$ over $K$ is Eisenstein,
	then $L/K$ is totally ramified and $\alpha$ is a uniformiser of $L$.
\end{prop}
\begin{proof}
	First part: $n=[L:K]$, $v_K$ a normalised valuation on $K$ and $w$ the unique extension of $v_K$ to $L$.
	Then
	$$[K(\pi_L):K]^{-1} \leq e^{-1}_{K(\pi_L)/K} = \min_{x \in \mathfrak{m}_K(\pi_L)}w(x) \leq \frac{1}{n}$$
	$\implies [K(\pi_L):K] \geq [L:K] \implies L = K(\pi)$.
	
	Let $f(x)=x^n + a_{n-1}x^{n-1} + \dots + a_0 \in \mathcal{O}_K[x]$ be the minimal polynomial of $\pi_L$ over $K$.
	$$\pi_L^n = -(a_0 + a_1(\pi_L) + \dots + a_{n-1}\pi_L^{n-1})$$
	So $1= w(\pi_L^n) = w(a_0 + a_1 \pi_L + \dots + a_{n-1}\pi_L^{n-1}) = \min_{i=0,1,\dots,n-1}(v_K(a_i)+\frac{i}{n})$
	$\implies v_K(a_i) \geq 1\ \forall i$ and $v_K(a_0)=1$, so $f$ is Eisenstein.
	
	Converse: $L=K(\alpha)$, $n=[L:K]$.
	Let $g(x) = x^n + b_{n-1}x^{n-1}+ \dots + b_0 \in \mathcal{O}_K[x]$ be the minimal polynomial of $\alpha$.
	$g$ irreducible $\implies$ all roots have the same valuation, so
	$$1 = w(b_0) = n\cdot w(\alpha) \implies w(\alpha) = \frac{1}{n}$$
	
	$\implies e_{L/K}^{-1} = \min_{x \in \mathfrak{M}_L}w(x) \leq \frac{1}{n} = [L:K]^{-1}$
	
	$\implies [L:K] = e_{L/K} = n$, so $L/K$ is totally ramified and $\alpha$ is a uniformiser.
\end{proof}

We've show that if $L/K$ is a totally ramified extension of local fields, then $L=K(\pi_L)$.
In fact, $\mathcal{O}_L = \mathcal{O}_K[\pi_L]$ (see proof of Theorem \ref{70}).

\subsection{The Unit Group $\mathcal{O}_K^\times$}
Let $K$ be a local field.
For each $s \in \mathbb{Z}_{\geq 1}$, set
$$U_K^{(s)} = U^{(s)} = 1 + \pi_K^S \mathcal{O}_K$$
where $\pi_K$ is a uniformiser of $K$.
Put $U_K = U_K^{(0)} = U^{(0)} = O_K^\times$.

\begin{prop}
	We have $U_K/U_K^{(1)} \cong (k_K^\times,\, \cdot)$
	and $U_K^{(s)}/U_K^{(s+1)} \cong (k_K,\, +)$.
\end{prop}
\begin{proof}
	We have a surjective homomorphism $\mathcal{O}_K^\times \to k_K^\times$ which is just reduction mod $\pi_K$,
	and the kernel is $1 + \pi_K\mathcal{O}_K = U_K^{(1)}$.
	
	For the second part, define a surjection
	\begin{align*}
		U_K^{(s)} &\to k_K \\
		1 + \pi_K^sx &\mapsto x \mod \pi_K \\
	\end{align*}
	This is a group homomorphism: writing $\pi = \pi_K$,
	$$(1 + \pi^Sx)(1+\pi^sy) = 1+\pi^s(x + y + \pi^sxy) \mapsto x+y+\pi^sxy \equiv x+y \mod \pi$$
	The kernel is $1+\pi^{s+1}\mathcal{O}_K = U_K^{s+1}$.
\end{proof}

\subsection{The Inertia Group}
\begin{prop}
	If $L/K$ is a finite Galois extension of local fields,
	then $\exists$ a surjective homomorphism $\Gal(L/K) \to \Gal(k_L/k_L)$.
	\label{80}
\end{prop}
\begin{proof}
	Lemma \ref{74} gives us a homomorphism
	\begin{center}
		\begin{tikzcd}
			\Aut_K(L) \ar{r} \ar[equal]{d} & \Aut_{k_K}(k_L) \ar[equal]{d} \\
			\Gal(L/K) & \Gal(k_L / k_K)
		\end{tikzcd}
	\end{center}
	
	Let $T/K$ be the maximal unramified subextension of $L/K$.
	\begin{center}
		\begin{tikzcd}
			\Gal(L/K) \ar{r} \ar{d} & \Gal(k_L/k_K) \ar[equal]{d}{(k_T = k_L)} \\
			\Gal(T/K) \ar{r}{\sim}& \Gal(k_T/k_K)
		\end{tikzcd}
	\end{center}
	
	$\implies$ surjectivity.
\end{proof}

\begin{definition}
	In the setting of proposition \ref{80},
	the kernel $I(L/K) = \Gal(L/T)$ of $\Gal(L/K) \to \Gal(k_L/k_K)$ is called the \textbf{inertia group} of $L/K$
	(Trivial $\iff L/K$ unramified).
	
	The field $T$ is (sometimes) called the \textbf{inertial field} of $L/K$.
\end{definition}

\begin{lemma}
	Let $L/K$ be a finite Galois extension of local fields.
	Let $x \in k_L$ and $\sigma \in \Gal(L/K)$ with image $\bar{\sigma} \in \Gal(k_L/k_K)$.
	Then
	$$[\bar{\sigma}(x)] = \sigma([x])$$
	In particular, $\sigma([x]) = [x]\ \forall x \in k_L \impliedby \sigma \in I(L/K)$.
	\label{82}
\end{lemma}
\begin{proof}
	The map
	\begin{align*}
		x &\mapsto \sigma^{-1}([\bar{\sigma}(x)]) \\
		k_L & \to \mathcal{O}_L
	\end{align*}
	is multiplicative and $\sigma^{-1}([\bar{\sigma}(x)]) \equiv x \mod \pi_L$
	
	$\implies \sigma^{-1}([\bar{\sigma}(x)]) = [x]$ by uniqueness of $[-]$.
\end{proof}

\subsection{Higher Ramification Groups}
Let $L/K$ be a finite Galois extension of local fields, $v_L$ a normalised valuation on $L$.

\begin{definition}
	Let $s \in \mathbb{R}_{\geq -1}$.
	Define the \textbf{s-th ramification group} of $L/K$ by
	$$G_s(L/K) = \{\sigma \in \Gal(L/K) \,|\, v_L(\sigma(x) - x) \geq s + 1 \ \forall x \in \mathcal{O}_L \}$$
\end{definition}

We could have defined these only for $s \in \mathbb{Z}_{\geq -1}$.
Note that $G_{-1}(L/K) = \Gal(L/K)$, $G_0(L/K) = I(L/K)$.

\begin{prop}
	Notation as above, $\pi_L$ a uniformiser of $L$.
	Then $G_{s+1}(L/K)$ is a normal subgroup of $G_s(L/K)\ \forall s \in \mathbb{Z}_{s \geq 0}$
	and the map
	\begin{align*}
		\frac{G_s(L/K)}{G_{s+1}(L/K)} &\to \frac{U_L^{(s)}}{U_L^{(s+1)}} \\
		\sigma &\mapsto \frac{\sigma(\pi_L)}{\pi_L}
	\end{align*}
	is a well-defined injective group homomorphism,
	independent of the choice of $\pi_L$.
\end{prop}
\begin{proof}
	Define $\phi: G_s(L/K) \to \frac{U_L^{(s)}}{U_L^{(s+1)}}$ by $\sigma \mapsto \frac{\sigma(\pi_L)}{\pi_L}$.
	$\sigma \in G_s(L/K),\, \sigma(\pi_L) = \pi_L + \pi_L^{s+1}x$ for some $x \in \mathcal{O}_L \implies$
	$$\frac{\sigma(\pi_L)}{\pi_L} = 1+\pi_L^sx \in U_L^{s}$$
	
	Now let $u \in \mathcal{O}_L^\times$.
	Then $\sigma(u) = u+\pi_L^{s+1}y$ for some $y \in \mathcal{O}_L$, so
	\begin{align*}
		\frac{\sigma(\pi_Lu)}{\pi_Lu} &= \frac{(\pi_L + \pi_L^{s+1}x)(u+\pi_L^{s+1}y)}{\pi_Lu} \\
		&= (1+\pi_L^sx)(1+\pi_L^{s+1}u^{-1}y) \\
		&\equiv (1+\pi_L^s x) = \frac{\sigma(\pi_L)}{\pi_L} \mod U_L^{(s+1)}
	\end{align*}
	So $\phi$ is independent of the choice of $\pi_L$.
	
	It's a homomorphism:
	\begin{align*}
		\phi(\sigma\tau) &= \frac{\sigma(\tau(\pi_L))}{\pi_L} \\
		&= \frac{\sigma(\tau(\pi_L))}{\tau(\pi_L)} \frac{\tau(\pi_L)}{\pi_L} \\
		&\equiv \frac{\sigma(\pi_L)}{\pi_L} \frac{\tau(\pi_L)}{\pi_L} = \phi(\sigma)\phi(\tau) \mod U_L^{s+1}
	\end{align*}
	
	We have
	\begin{align*}
		\Ker\phi &= \{\sigma \in G_s(L/K) \,|\, v_L(\sigma(\pi_L) - \pi_L) \geq s+2 \} \\
		&\subseteq \{\sigma \in G_s(L/K) \,|\, v_L(\sigma(z) - z) \geq s+2 \ \forall \in \mathcal{O}_L \}\\
		&= G_{s+1}(L/K)
	\end{align*}
	Conversely, let $x \in \mathcal{O}_L$ and write $x = \sum_{n=0}^\infty[x_n]\pi_L^n$, $x_n \in k_L$.
	Write $\sigma(\pi_L)=\pi_L + \pi_L^{s+2}y,\ y \in \mathcal{O}_L$.
	Let $\sigma \in \Ker \phi \subseteq I(L/K)$.
	
	By Lemma \ref{82},
	\begin{align*}
		\sigma(x)-x &= \sum_{n=1}^\infty[x_n]((\pi_L + \pi_L^{s+2}y)^n - \pi_L^n) \\
		&= \pi_L^{s+2}y \sum_{n=1}^\infty[x_n]((\pi_L + \pi_L^{s+2}y)^{n-1} + (\pi_L + \pi_L^{s+2}y)^{n-2}\pi_L + \dots + \pi_L^n)
	\end{align*}
	so $v_L(\sigma(x) -x) \geq s+2$, so $\sigma \in G_{s+1}(L/K)$.
\end{proof}

\begin{corollary}
	$\Gal(L/K)$ is soluble.
\end{corollary}
\begin{proof}
	Note that $\bigcap_s G_s(L/K) = \{id\}$,
	so $(G_s(L/K))_{s \in \mathbb{Z}_{\geq -1}}$ is a subnormal series of $\Gal(L/K)$
	and $\frac{G_s(L/K)}{G_{s+1}(L/K)}$ is abelian.
\end{proof}

Let $L/K$ be a finite Galois extension of local fields.
Then $G_1(L/K)$ is a $p$-group
(since $\frac{G_s(L/K)}{G_{s+1}(L/K)} \hookrightarrow k_L \ \forall s \in \mathbb{Z}_\geq 1$)
and $\frac{G_0(L/K)}{G_1(L/K)} \hookrightarrow k_L^\times$,
which has order prime to $p$.

$\implies G_1(L/K)$ is the unique Sylow $p$-subgroup of $G_0(L/K)$.

$G_1(L/K)$ is called the \textbf{wild inertia group}
and $\frac{G_0(L/K)}{G_1(L/K)}$ is called the \textbf{tame quotient}.

\begin{prop}
	Let $M/L/K$ be finite extensions of local fields, $M/K$ Galois.
	Then $G_s(M/K)\cap\Gal(M/L) = G_s(M/L)$.
\end{prop}
\begin{proof}
	\begin{align*}
		G_s(M/L) &= \{\sigma \in \Gal(M/L) \,|\, v_M(\sigma(x) - x) \geq s+1 \} \\
		&= G_s(M/K) \cap \Gal(M/L)
	\end{align*}
\end{proof}

\subsection{Quotients}
Let $L/K$ be a finite Galois extension of local fields.
Pick $\alpha \in \mathcal{O}_L$ such that $\mathcal{O}_L = \mathcal{O}_K[\alpha]$.
set $i_{L/K}(\sigma) = v_L(\sigma(\alpha) - \alpha)$ for $\sigma \in \Gal(L/K)$.

If $g(x) = \sum_{i=0}^m b_i x^i \in \mathcal{O}_K[x]$, then 
$$v_L(\sigma(g(\alpha)) - g(\alpha)) = v_L\left(\sum_{i=1}^{m}b_i(\sigma(\alpha)^i - \alpha^i)\right) \geq v_L(\sigma(\alpha) - \alpha)$$
$\implies i_{L/K}(\sigma)$ is independent of $\alpha$, and
$$G_s(L/K) = \{\sigma \in \Gal(L/K) \,|\, i_{L/K}(\sigma) \geq s+1 \}$$

\begin{prop}
	Let $M/L/K$ be finite extension of local fields,
	$M/K$ and $L/K$ Galois.
	Then
	$$(*) \qquad i_{L/K}(\sigma) = e_{M/L}^{-1} \sum_{\mathclap{\substack{\tau \in \Gal(M/K) \\ \tau|_L = \sigma}}} i_{M/K}(\tau) \ \forall \sigma \in \Gal(L/K)$$
	\label{87}
\end{prop}
\begin{proof}
	If $\sigma = 1$, both sides $= \infty$. Assume $\sigma \neq 1$.
	Let $\mathcal{O}_M = \mathcal{O}_K[\alpha]$, 
	$\mathcal{O}_L = \mathcal{O}_K[\beta]$,
	$\alpha \in \mathcal{O}_M$, 
	$\beta \in \mathcal{O}_L$.
	
	$\implies e_{M/L}i_{L/K}(\sigma) = e_{M/L} v_L(\sigma(\beta)-\beta) = v_M(\sigma(\beta)-\beta)$.
	
	$\tau \in \Gal(M/K) \implies i_{M/K}(\tau) = v_M(\tau(\alpha) - \alpha)$.
	
	Fix $\tau$ such that $\tau|_L = \sigma$.
	Set $H = \Gal(M/L)$. Then
	$$(\text{RHS of } *)\cdot e_{M/L} = \sum_{g \in H}(\tau(g(\alpha)) - \alpha) = v_M(\prod_{g \in H}(\tau(g(\alpha)) - \alpha))$$
	Set $b=\sigma(\beta)-\beta = \tau(\beta) - \beta$
	and $a = \prod_{g \in H}(\tau(g(\alpha))) - \alpha)$.
	We want to prove $v_M(b) = v_M(a)$.
	
	General observation:
	let $z \in \mathcal{O}_L$,
	write $z = \sum_{i=0}^h z_i \beta^i$, $z_i \in \mathcal{O}_K$.
	Then $\tau(z)-z = \sum_{i=1}^n z_i(\tau(\beta)^i-\beta^i)$ is divisible by $\tau(\beta)-\beta = b$.
	
	Now let $F(x) \in \mathcal{O}_L[x]$ be the minimal polynomial of $\alpha$ over $L$.
	Explicitly, $F(x) = \prod_{g \in H}(x - g(\alpha))$.
	
	We have $(\tau F)(x) = \prod_{g \in H}(x - \tau(g(\alpha)))$
	[$\tau F$ is the polynomial obtained from $F$ by applying $\tau$ to all coefficients],
	then all coefficients of $\tau F - F$ are of the form $\tau(z) - z$ for some $z \in \mathcal{O}_L$
	$\implies$ they are divisible by $b$.
	
	$$\implies b | (\tau F -F)(a) = \pm a \implies b | a$$
	
	Conversely, pick $f \in \mathcal{O}_K[x]$ such that $f(\alpha) = \beta$.
	Since $f(\alpha) - \beta = 0$,
	$f(x) - \beta = F(x)h(x)$ for some $h(x) \in \mathcal{O}_L[x]$.
	
	Then $(f-\tau(\beta))(x) = (\tau F - \tau(\beta))(x) = (\tau F)(x)(\tau(h))(x)$.
	Set $x = \alpha$: $-b = \beta - \tau(\beta) = (\pm a)\tau h(\alpha) \implies a | b$.
\end{proof}

Let $L/K$ be a finite Galois extension of local fields.
Define $\eta_{L/K}: [-1, \infty) \to [-1, \infty)$ by
$$\eta_{L/K}(s) = \int_{0}^{s} \frac{dx}{\abs{G_0(L/K):G_x(L/K)}}$$
When $-1 \leq x < 0 $, our convention is that
$\frac{1}{\abs{G_0{L/K}:G_x{L/K}}} = \abs{G_x(L/K) : G_0(L/K)}$ which is just $=1$ when $-1 < x < 0$.

$\implies \eta_{L/K}(s)=s$ if $-1 \leq s \leq 0$.

\begin{prop}
	Let $G=\Gal(L/K)$.
	Then $\eta_{L/K}(s) = \left(e_{L/K}^{-1} \sum_{\sigma \in G}\min(i_{L/K}(\sigma), s+1)\right) - 1$,
	for $s \in [-1, \infty)$.
	\label{88}
\end{prop}
\begin{proof}
	Let RHS = $\theta(s)$.
	Look at $s \mapsto \min(i_{L/K}, s+1)$.
	
	$\implies \theta(s)$ is piecewise linear and break points are integers (same for $\eta_{L/K}$).
	
	Have
	$$\theta(0) = \frac{\#\{\sigma \in G \,|\, i_{L/K}(\sigma) \geq 1 \}}{e_{L/K}} - 1 = 0 = \eta_{L/K}(0)$$
	
	If $s \in [-1, \infty) \backslash \mathbb{Z}$,
	$$\theta'(s) = e_{L/K}^{-1} \# \{\sigma \in G \,|\, i_{L/K}(\sigma) \geq s+1 \} = \frac{1}{\abs{G_0{L/K}:G_s{L/L}}} = \eta_{L/K}'(s)$$
	$\implies \theta(s) = \eta_{L/K}(s)$.
\end{proof}

\begin{theorem}[Herbrand]
	Let $M/L/K$ be finite extensions of local fields,
	$M/K$ and $L/K$ Galois.
	Set $H=\Gal(M/L)$ and $t = \eta_{L/K}(s)$, $s \in [-1, \infty)$.
	
	Then $\frac{G_s(M/K)H}{H} = G_t(L/K)$.
	\label{89}
\end{theorem}
\begin{proof}
	Put $G=\Gal(M/K)$.
	Choose $\tau \in G$ such that $i_{M/K}(\tau) \geq i_{M/K}(\tau g)$ for all $g \in H$.
	Put $m = i_{M/K}(\tau)$, $\sigma = \tau|_L$.
	
	Claim: $i_{L/K}(\sigma) - 1 = \eta_{M/L}(m-1)$.
	
	If $g \in G_{m-1}(M/L) \leq H$, then $i_{M/K}(g) \geq m$, so
	\begin{align*}
		i_{M/K}(\tau g) &= v_M(\tau g(\alpha) - \alpha) \\
		&= v_M(\tau g(\alpha) - g(\alpha) + g(\alpha) - \alpha) \\
		&\geq \min (v_M(\tau g(\alpha) - g(\alpha)), v_M(g(\alpha) - \alpha)) \\
		&= \min(i_{M/K}(\tau g), i_{M/K}(g)) = m
	\end{align*}
	If $g \in H \backslash G_{m-1}(M/L)$,
	then $i_{M/K}(g) < m$ and $i_{M/K}(\tau g) = i_{M/K}(g)$.
	In either case, $i_{M/K}(\tau g) = \min(m, i_{M/K}(g))$.
	By Proposition \ref{87}, $i_{L/K}(\sigma) = e_{M/L}^{-1} \sum_{g \in H}\min(m, i_{M/K}(g))$.
	
	By Proposition \ref{88},
	$$\eta_{M/L}(m-1) = \left(e_{M/L}^{-1} \sum_{g \in H} \min(i_{M/K}, m)\right) - 1 = i_{L/K}(\sigma) - 1$$
	This proves the claim.
	
	Now
	\begin{align*}
		\sigma &\in \frac{G_s(M/K)H}{H} \iff \tau \in G_s(M/K) \iff i_{M/K}(\tau) - 1 \geq s \\
		&\iff \eta_{M/L}(i_{M/K}(\tau) - 1) \geq \eta_{M/L}(s) = t \text{ since $\eta_{M/L}$ strictly increasing} \\
		&\iff i_{L/K}(\sigma) - 1 \geq t \iff \sigma \in G_t(L/K)
	\end{align*}
\end{proof}

Let $L/K$ be a Galois extension of local fields.
$\eta_{L/K}: [-1, \infty) \to [-1, \infty)$ is continuous, strictly increasing,
$\eta_{L/K}(-1) = -1$ and $\eta_{L/K}(s) \to \infty$ as $s \to \infty$,
so it is invertible.
Set $\chi_{L/K} = \eta_{L/K}^{-1}$.

\begin{definition}
	$L/K$ as before.
	The \textbf{upper numbering} of the ramification groups of $L/K$ is defined by
	$$G^t(L/K) = G_{\chi_{L/K}(t)}(L/K)$$
	for $t \in [-1, \infty)$.
	The previous numbering is called the \textbf{lower numbering}.
\end{definition}

\begin{lemma}
	Let $M/L/K$ be finite extension of local fields, $M/K$ and $L/K$ Galois.
	Then $\eta_{M/K}=\eta{L/K}\circ\eta{M/L}$,
	hence $\chi_{M/K}=\chi_{M/L}\circ\chi_{L/K}$.
	\label{91}
\end{lemma}
\begin{proof}
	Let $s \in [-1, \infty)$, set $t=\eta_{M/L}(s)$ and $H=\Gal(M/L)$.
	
	By Theorem \ref{89},
	\begin{align*}
	G_t(L/K) &\cong \frac{G_s(M/K)H}{H} \\
	&\cong \frac{G_s(M/K)}{H \cap G_s(M/K)} \\
	&=\frac{G_s(M/K)}{G_s(M/L)}
	\end{align*}
	Thus
	$$\frac{\#G_s(M/K)}{e_{M/K}} = \frac{\#G_t(L/K)}{e_{L/K}} \cdot \frac{\#G_s(M/L)}{e_{M/L}}$$
	so
	\begin{align*}
		\eta'_{M/K}(s) &= \frac{\#G_s(M/K)}{e_{M/K}} \\
		&= \frac{\# G_t(L/K)}{e_{L/K}} \cdot \frac{\#G_s(M/L)}{e_{M/L}}\\
		&=\eta'_{L/K}(t)\eta'_{M/L}(s) = (\eta_{L/K} \circ \eta_{M/L})'(s)
	\end{align*}
	whenever these derivatives make sense.
	
	Since $\eta_{L/K}(\eta_{M/L}(0)) = \eta_{L/K}(0) = 0 = \eta_{M/K}(0)$,
	we get $\eta_{M/K} = \eta_{L/K}\circ\eta_{M/L}$.
\end{proof}

\begin{corollary}
	Keep the notation of Lemma \ref{91} and its proof.
	Let $t \in [-1, \infty)$.
	Then $$\frac{G^t(M/K)H}{H} = G^t(L/K)$$
\end{corollary}
\begin{proof}
	Put $s = \chi_{L/K}(t)$.
	Then, by Theorem \ref{89} and Lemma \ref{91},
	\begin{align*}
		\frac{G^t(M/K)H}{H} &\overset{\text{def}}{=} \frac{G_{\chi_{M/K}(t)}(M/K)H}{H} \\
		&\overset{89}{=} G_{\eta_{M/L}(\chi_{M/K}(t))}(L/K) \\
		&\overset{91}{=} G_s(L/K) \overset{\text{def}}{=} G^t(L/K)
	\end{align*}
\end{proof}

\section{Local Class Field Theory}
This is the study of abelian extensions (i.e. extensions with abelian Galois groups) of local fields.

\subsection{Infinite Galois Theory}
\begin{definition}
	Let $L/K$ be an algebraic field extension.
	We say that $L/K$ is \textbf{seperable} if,
	for every $\alpha \in L$,
	the minimal polynomial $f_\alpha \in K[x]$ is seperable.	
	We say $L/K$ is \textbf{normal} if
	$f_\alpha$ splits into linear factors in $L[x]$ for every $\alpha \in L$.
	
	$L/K$ is \textbf{Galois} if it is normal and seperable.
	If so, we write $\Gal(L/K) = \Aut_K(L)$.
\end{definition}

\begin{definition}
	Let $M/K$ be a Galois extension.
	$U \subseteq \Gal(M/K)$ is open if for every $\sigma \in U$,
	$\exists L/K$ a finite subextension of $M/K$ such that $\sigma\Gal(M/K) \subseteq U$.
	
	These sets form the open sets of a topology on $\Gal(M/K)$ called the \textbf{Krull topology}.
	$G=\Gal(M/K)$ is a topological group w.r.t. the Krull topology.
\end{definition}

\begin{prop}
	Let $M/K$ be a Galois extension.
	Then $\Gal(M/K)$ is compact and Hausdorff,
	and if $U \subseteq \Gal(M/K)$ is an open subset such that $1 \in U$,
	then there exists an open normal subgroup $N \subseteq \Gal(M/K)$ such that $N \subseteq U$.
	\label{95}
\end{prop}

\begin{remarks}
	\begin{enumerate}
		\item When $M/K$ is finite, the Krull topology is discrete.
		\item Topological groups with the properties in Proposition \ref{95} are called \textbf{profinite}.
		\item Last part: by definition, $\exists L/K$ a finite subextension of $M/K$ such that $\Gal(M/L) \subseteq U$.
		Let $L'$ be the Galois closure of $L$ over $K$,
		then $\Gal(M/L') \subseteq \Gal(M/L) \subseteq U$,
		and $\Gal(M/L')$ is open and normal.
	\end{enumerate}
\end{remarks}

\begin{definition}
	Let $I$ be a set with a partial order $\leq$.
	We say that $I$ is a \textbf{directed system} if
	$\forall i,j \in I\ \exists I$ such that $I \leq k$ and $j \leq k$.
\end{definition}

\begin{definition}
	Let $I$ be a directed system.
	An \textbf{inverse system} (of topological groups) indexed by $I$
	is a collection of topological groups $G_i$, $i \in I$
	and continuous homomorphisms $f_{ij}: G_j \to G_i$ $\forall i,j \in I$ with $i \leq j$ such that
	\begin{enumerate}
		\item $f_{ii} = id_{G_i}$
		\item $f_{ik} = f_{ij} \circ f_{jk}$ when $i \leq j \leq k$
	\end{enumerate}
	We define the \textbf{inverse limit} of the system $(G_i, f_{ij})$ to be
	$$ \varprojlim_{i \in I} G_i = \left\{(g_i) \in \prod_{i \in I} G_i \,|\, f_{ij}(g_j) = g_i\ \forall i \leq j \right\} \subseteq \prod_{i \in I} G_i $$
	
	It's a group under coordinate-wise multiplication and a topological space when given the subspace topology of the product topology on $\prod_{i \in} G_i$.
	This makes $\varprojlim_{i \in I} G_i$ into a topological group.
\end{definition}

\begin{prop}
	Let $M/K$ be a Galois extension.
	The set $I$ of finite Galois subextensions $L/K$ of $M/K$ is a directed system under inclusion.
	If $L, L' \in I$ with $L \subseteq L'$,
	then we have a map $\cdot|_L^{L'}: \Gal(L'/K) \to \Gal(L/K)$.
	Then $(\Gal(L/K), \cdot|_L^{L'})_{L \in I,\, L \subseteq L'}$ is an inverse system,
	and the map
	\begin{align*}
		\Gal(M/K) & \to \varprojlim_{L \in I} \Gal(L/K) \\
		\sigma &\mapsto (\sigma|_L)_{L \in I}
	\end{align*}
	is an isomorphism of topological groups.
\end{prop}

\begin{theorem}[Fundamental Theorem of Galois Theory]
	Let $M/K$ be Galois.
	The map $L \mapsto \Gal(M/L)$ defines a bijection between subextensions $L/K$ of $M/K$ and closed subgroups of $\Gal(N/K)$,
	with inverse $H \mapsto M^H$.
	
	Moreover, $L/K$ is finite $\iff \Gal(M/L)$ is open,
	and $L/K$ Galois $\iff \Gal(M/L)$ is normal, and then
	\begin{align*}
		\sigma &\mapsto \sigma|_L \\
		\frac{\Gal(M/K)}{\Gal(M/L)} &\overset{\sim}{\to} \Gal(L/K)
	\end{align*}
	
	and $Gal(M/L)$ is closed.
\end{theorem}

\subsection{Unramified Extensions and Weil Groups}

\begin{definition}
	Let $K$ be a local field, $M/K$ an algebraic extension.
	$M/K$ is \textbf{unramified} (or \textbf{totally ramified})
	if $L/K$ is unramified (or totally ramified) for every finite subextension $L/K$ of $M/K$.
	
	In general, an algebraic extension $M/K$ has a maximal unramified subextension $T=T_{M/K}/K$, which is Galois.
\end{definition}

If $L/K$ is a finite unramified extension of local fields with $q = \# k_K$,
then $\Gal(L/K) \overset{\sim}{\to} \Gal(k_L/k_K) \ni x \mapsto x^q$,
so $\Gal(L/K)$ is cyclic with a canonical generator $\Frob_{L/K}$,
which is a lift of $x \mapsto x^q$.
This is called the (arithmetic) \textbf{Frobenius element} of $L/K$.

$\Frob$ is compatible in towers:
if $M/L/K$ are finite unramified extensions of local fields,
then $\Frob_{M/K}|_L = \Frob_{L/K}$
($x \mapsto x^q$ on $k_M$ restricts to $x \mapsto x^q$ on $k_L$, $q = \# k_K$).

$\implies$ for $M/K$ an arbitrary unramified extension, we get
$$\Frob_{L/K} \in \varprojlim_{\mathclap{\substack{L/K \\ \text{finite subexts} \\ \text{of } M/K}}} \Gal(L/K) \cong \Gal(M/K)$$
so we get an element $\Frob_{M/K} \in \Gal(M/K)$.
It is the unique lift of $x \mapsto x^{\# k_K}$ on $k_M/k_K$.

\begin{remarks}
	Let $K$ be a local field, $M/K$ unramified.
	\begin{center}
		\begin{tikzcd}
			\Gal(M/K) \ar{r}{\text{red.}} \ar{d}[rotate=90,anchor=center,yshift=1ex]{\sim}& \Gal(k_M/k_K) \ar{d}[rotate=90,anchor=center,yshift=1ex]{\sim}\\
			\varprojlim \Gal(L/K) \ar{r}{\text{red.}} & \varprojlim \Gal(k_L/k_K)
		\end{tikzcd}
	\end{center}
	$\implies \Gal(M/K) \overset{\sim}{\to} \varprojlim \Gal(k_L/k_K)$
\end{remarks}

Note that finite subextensions of $M/K$ biject with finite subextensions of $k_M/k_K$.
So $\Frob_{M/K}$ is the unique lift of $x \mapsto x^{\# k_K}$ on $k_M$.

\begin{definition}
	Let $K$ be a local field, $M/K$ Galois, $T = T_{M/K}/K$ the maximal unramified subextension of $M/K$.
	The \textbf{Weil Group} $W(M/K)$ of $M/K$ is
	$$W(M/K) = \{\sigma \in \Gal{M/K} \,|\, \sigma|_T = \Frob_{T/K}^n, \text{ some } n \in \mathbb{Z} \}$$
	We define a topology on $W(M/K)$ by saying that
	$U$ is open $\iff \forall \sigma \in U\ \exists L/T$ a finite extension such that $\sigma \Gal(L/T) \subset U$.
\end{definition}

\begin{center}
	\begin{tikzcd}
		\Gal(M/T) \ar{r} \ar{rd} & W(M/K) \ar{r} \ar[hookrightarrow]{d} & \Frob_{T/K}^\mathbb{Z} \ar[hookrightarrow]{d}\\
		& \Gal(M/K) \ar{r} & \Gal(T/K)
	\end{tikzcd}
\end{center}

Discrete topology on $\Frob_{T/K}^\mathbb{Z} \rightsquigarrow$ topology of $W(M/K)$.

\begin{prop}
	Let $K$ be a local field, $M/K$ Galois.
	Then $W(M/K)$ is dense in $\Gal(M/K)$.
	If $L/K$ is a finite subextension of $M/K$,
	then $W(M/L) = W(M/K) \cap \Gal(M/L)$.
	If $L/K$ is also Galois,
	then $\frac{W(M/K)}{W(M/L)} \overset{\sim}{\longrightarrow} \Gal(L/K)$,
	via restriction.
\end{prop}

\begin{proof}
	Density: need to sho that,
	for every finite Galois subextension $L/K$ of $M/K$,
	$W(M/K)$ surjects onto $\Gal(L/K)$ (via restriction).
	
	Let $T = T_{M/K}$, then $T_{L/K} = T \cap L$. Then
	\begin{center}
		\begin{tikzcd}
			\Gal(M/T) \ar{r} \ar[two heads]{d}& W(M/K) \ar{r} \ar{d}& \Frob_{T/K}^\mathbb{Z} \ar[draw=none, sloped, yshift=-1ex, xshift=2ex]{r}{\cong} \ar[two heads]{d} & {(x \mapsto x^{\# k_K})}^\mathbb{Z}\ar[two heads]{d}\\
			\Gal(T/L\cap T) \ar{r} & \Gal(L/K) \ar{r} & \Gal(T \cap L /K) \ar[draw=none, sloped, yshift=-1ex]{r}{\cong} & \langle x \mapsto x^{\# k_K} \rangle
		\end{tikzcd}
	\end{center}
	Chasing the diagram implies surjectivity in the middle.
	
	Second part: let $L$ be as in the first part.
	$L T_{M/K} \subseteq T_{M/L}$.
	
	\begin{center}
		\begin{tikzcd}
			\Frob_{T_{M/K}/K}^\mathbb{Z} \ar[draw=none, sloped, yshift=-1ex]{r}{\subseteq} & \Gal(T_{M/K}/K) \ar[draw=none, sloped, yshift=-1ex]{r}{\cong} & \Gal(k_M/k_K) \\
			\Frob_{T_{M/L}/L}^\mathbb{Z} \ar[hookrightarrow]{u}  \ar[draw=none, sloped, yshift=-1ex]{r}{\subseteq} & \Gal(T_{M/L}/L) \ar[hookrightarrow]{u} \ar[draw=none, sloped, yshift=-1ex]{r}{\cong} & \Gal(k_M/k_L) \ar[hookrightarrow]{u}
		\end{tikzcd}
	\end{center}
	$\implies \Frob^\mathbb{Z}_{T_{M/L}/L} = \Frob^\mathbb{Z}_{T_{M/K}/K} \cap \Gal(T_{M/L}/L)$
	(and $T_{M/L} = L\cdot T_{M/K}$).
	
	If $\sigma \in \Gal(M/L)$, then
	\begin{align*}
		\sigma \in W(M/K) &\iff \sigma|_{T_{M/L}} \in \Frob_{T_{M/L}/L}^\mathbb{Z} \\
		&\overset{\text{above}}{\iff} \sigma|_{T_{M/K}} \in \Frob_{T_{M/K}/K}^\mathbb{Z} \\
		&\iff \sigma \in W(M/K)
	\end{align*}
	
	Third part: now $L/K$ is Galois as well.
	
	$\Gal(M/L)$ is normal in $\Gal(M/K) \implies W(M/L)$ is normal in $W(M/K)$ by the second part.
	\begin{align*}
	\frac{W(M/K)}{W(M/L)} &= \frac{W(M/K)}{W(M/K)\cap\Gal(M/K)} \\
	&\cong \frac{W(M/K)\Gal(M/L)}{\Gal(M/L)} \\
	&= \frac{\Gal(M/K)}{\Gal(M/L)} \\
	&\cong \Gal(L/K)
	\end{align*}
	Since $W(M/K)\Gal(M/L) = \Gal(M/K)$ by density (first part).
\end{proof}

\subsection{Main Theorems of Local Class Field Theory}
Let $K$ be a local field.
A Galois extension $L/K$ is called \textbf{abelian} if $\Gal(L/K)$ is abelian.

Fix an algebraic closure $\bar{K}$ of $K$,
and all algebraic extensions considered are subfields of $\bar{K}$.
Let $K^{sep}$ be the separable closure of $K$ inside $\bar{K}$.

If $L/K$ and $M/K$ are Galois,
then $LM/K$ is Galois and
\begin{align*}
	\Gal(LM/K) &\hookrightarrow \Gal(L/K) \times \Gal(M/K) \\
	\sigma &\mapsto (\sigma|_L,\, \sigma_M)
\end{align*}
In particular, $L/K$ and $M/K$ abelian $\implies LM/K$ is abelian.

$\implies \exists$ maximal abelian extension $K^{ab}$ of $K$.

Notes that $K^{ur} := T_{K^{sep}/K} \subseteq K^{ab}$. Put $\Frob_K = \Frob_{K^{ur}/K}$.

\begin{theorem}[Local Artin Reciprocity]
	There exists a unique topological isomorphism $\Art_L : K^\times \overset{\sim}{\longrightarrow} W(K^{ab}/K)$, characterised by
	\begin{enumerate}
		\item $\Art_K(\pi_K)|_{K^{ur}} = \Frob_K$ ($\pi_K$ any uniformiser)
		\item $\Art_K(N_{L/K}(x))|_L = id_L\ \forall L/K$ finite abelian, $x \in L^\times$
	\end{enumerate}
	Moreover, if $M/K$ is finite, then $\Art_M(x)|_{K^{ab}} = \Art_K(N_{M/K}(x))\ \forall x \in M^\times$,
	and $\Art_K$ induces an isomorphism
	$$\frac{K^\times}{N_{M/K}(M^\times)} \overset{\sim}{\longrightarrow} \Gal((M \cap K^{ab})/K)$$
	\label{103}
\end{theorem}

Write $N(L/K) = N_{L/K}(L^\times)$ for $L/K$ finite.

\begin{theorem}
	$L/K$ finite $\implies N(L/K) = N((L \cap K^{ab})/K)$,
	and $[K^\times:N(L/K)] \leq [L:K]$
	with equality $\iff L/K$ abelian.
	\label{104}
\end{theorem}

\begin{proof}
	Put $M=L \cap K^{ab}$. Have
	$$\frac{K^\times}{N(L/K)} \underset{\Art_K}{\overset{\sim}{\longrightarrow}} \Gal(M/K) \underset{\Art_K}{\overset{\sim}{\longleftarrow}} \frac{K^\times}{N(M/K)}$$
	Since $N(L/K) \subseteq N(M/K)$, we are done.
\end{proof}

\begin{theorem}
	Let $L/K$ be a finite extension, $M/K$ abelian.
	Then $N(L/K) \subseteq N(M/K) \iff M \subseteq L$.
\end{theorem}
\begin{proof}
	By Theorem \ref{104}, wlog $L/K$ abelian (replace it with $L\cap K^{ab}$).
	$\impliedby$ is clear. Assume that $N(L/K) \subseteq N(M/K)$ and let $\sigma \in \Gal(K^{ab}/L)$.
	
	Then $W(K^{ab}/L) = \Art_K(N(L/K)) \subseteq \Art_K(N(M/K)) \implies \exists m \in M^\times$ such that $\sigma = \Art_K(N_{M/K}(x))$.
	
	Then $\sigma|_M = id_M$ by Theorem \ref{103}.
\end{proof}
\end{document}