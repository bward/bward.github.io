\documentclass[a4paper]{article}
\title{Part III Category Theory}
\author{Based on lectures by Prof P.T. Johnstone}
\date{Michaelmas 2016\\University of Cambridge}
\usepackage{mathtools}
\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{textcomp}
\usepackage{enumerate}
\usepackage{graphicx}
\usepackage{tikz-cd}
\usepackage{enumitem}
\newtheorem{definition}{Definition}
\newtheorem{remark}[definition]{Remark}
\newtheorem{lemma}[definition]{Lemma}
\newtheorem{corollary}[definition]{Corollary}
\numberwithin{definition}{section}
\renewcommand{\baselinestretch}{1.3}
\newcommand*\conj[1]{\overline{#1}}
\newcommand*\dom[1]{\textnormal{dom}\,#1}
\newcommand*\cod[1]{\textnormal{cod}\,#1}
\newcommand*\ob[1]{\textnormal{ob}\,#1}
\newcommand*\mor[1]{\textnormal{mor}\,#1}
\DeclareMathOperator{\Set}{\textbf{Set}}
\begin{document}
\maketitle
\tableofcontents

\section{Definitions and Examples}
\begin{definition}[Category]
	A category $\mathcal{C}$ consists of 
	\begin{enumerate}[label=\alph*.]
		\item a collection $\ob{\mathcal{C}}$ of \textbf{objects} $A$, $B$, $C$, \dots
		\item a collection $\mor{\mathcal{C}}$ of \textbf{morphisms} $f$, $g$, $h$, \dots
		\item two operations \dom, \cod from morphisms to objects. We write $f:A\to B$ or $A\overset{f}{\to}B$ to mean '$f$ is a morphism and $\dom{f}=A$ and $\cod{f}=B$'
		\item an operation assigning to each object $A$ a morphism $1_A:A\to A$
		\item a partial binary operation $(f, g) \mapsto gf$, s.t. $gf$ is defined $\iff \dom{g}=\cod{f}$, and then $gf:\dom{f}\to\cod{g}$
	\end{enumerate}
	satisfying
	\begin{enumerate}[label=\alph*.]
		\setcounter{enumi}{5}
		\item $f 1_A = f$ and $1_B f=f$ $\forall f: A \to B$
		\item $h(fg) = (hg)f$ whenever $gf$ and $hg$ are defined
	\end{enumerate}
\end{definition}

\begin{definition}[Functor]
	Let $\mathcal{C}$ and $\mathcal{D}$ be categories. A \textbf{functor} $\mathcal{C}\to\mathcal{D}$ consists of
	\begin{enumerate}[label=\alph*.]
		\item a mapping $A \to FA$ from $\ob{\mathcal{C}}$ to $\ob{\mathcal{D}}$
		\item a mapping $f \to Ff$ from $\mor{\mathcal{C}}$ to $\mor{\mathcal{D}}$
	\end{enumerate}
	satisfying $\dom{Ff}=F\dom{f}$, $\cod{Ff}=F\cod{f}$ for all $f$, $F(1_A)=1_{FA}$ for all $A$, and $F(gf)=(Fg)(Ff)$ whenever $gf$ is defined.
\end{definition}

\begin{definition}
	By a \textbf{contravariant functor} $\mathcal{C} \to \mathcal{D}$ we mean a functor $\mathcal{C} \to \mathcal{D}^{op}$ (or equivalently $\mathcal{C}^{op} \to \mathcal{D}$). A functor $\mathcal{C} \to \mathcal{D}$ is sometimes said to be \textbf{covariant}.
\end{definition}

\begin{definition}[Natural transformation]
	Let $\mathcal{C}$ and $\mathcal{D}$ be two categories and $F, G: \mathcal{C} \rightrightarrows \mathcal{D}$ two functors. A \textbf{natural transformation} $\alpha:F\to G$ assigns to each $A \in \ob{\mathcal{C}}$ a morphism $\alpha_A:FA\to GA$ in $\mathcal{D}$, such that
	\begin{center}
		\begin{tikzcd}
			FA \arrow[r, "Ff"] \arrow[d, "\alpha_A"] & FB \arrow[d, "\alpha_B"]\\
			GA \arrow[r, "Gf"]& GB
		\end{tikzcd}
	\end{center}
	commutes.
\end{definition}

We can compose natural transformations: given $\alpha: F \to G$ and $\beta: G \to H$, the mapping $A \mapsto \beta_A \alpha_A$ is the $A$-component of a natural transformation $\beta\alpha: F \to H$.

\begin{definition}
	Given categories $\mathcal{C}, \mathcal{D}$, we write $[\mathcal{C},\mathcal{D}]$ for the category of all functors $\mathcal{C} \to \mathcal{D}$ and natural transformations between them.
\end{definition}

\begin{lemma}
	Given $F,G: \mathcal{C} \to \mathcal{D}$ and $\alpha: F \to G$, $\alpha$ is an isomorphism in $[\mathcal{C}, \mathcal{D}] \iff$ each $\alpha_A$ is an isomorphism in $\mathcal{D}$.
\end{lemma}

\begin{definition}[Faithful and full]
	Let $F: \mathcal{C} \to \mathcal{D}$ be a functor.
	\begin{enumerate}[label=\alph*.]
		\item We say that $F$ is \textbf{faithful} if, given $f, g \in \mor{\mathcal{C}}$, the equations $\dom{f}=\dom{g}$, $\cod{f}=\cod{g}$ and $Ff = Fg$ imply $f=g$.
		\item $F$ is \textbf{full} if, given any $g: FA \to FB$ in $\mathcal{D}$, there exists $f: A \to B$ in $\mathcal{C}$ with $Ff =g$.
		\item We say a subcategory $\mathcal{C}'$ of $\mathcal{C}$ is \textbf{full} if the inclusion $\mathcal{C}' \hookrightarrow \mathcal{C}$ is a full functor.
	\end{enumerate}
\end{definition}

For example, \textbf{Gp} is a full subcategory of the category \textbf{Mon} of monoids, but \textbf{Mon} is a non-full subcategory of the category \textbf{Sgp} of semigroups.

\begin{definition}[Equivalence of categories]
	Let $\mathcal{C}$ and $\mathcal{D}$ be categories. An \textbf{equivalence} between $\mathcal{C}$ and $\mathcal{D}$ is a pair of functors $F: \mathcal{C} \to \mathcal{D}$, $G: \mathcal{D} \to \mathcal{C}$ together with natural isomorphisms $\alpha: 1_\mathcal{C} \to GF$, $\beta: FG \to 1_\mathcal{D}$. We write $\mathcal{C} \simeq \mathcal{D}$ to mean that $\mathcal{C}$ and $\mathcal{D}$ are equivalent.
	
	We say a property $P$ of categories is \textbf{categorical} if whenever $\mathcal{C}$ has $P$ and $\mathcal{C}\simeq\mathcal{D}$ then $\mathcal{D}$ has $P$.
\end{definition}

For example, being a groupoid is a categorical property, but being a group is not.

\begin{definition}[Slice category]
	Given an object $B$ of a category $\mathcal{C}$, define the \textbf{slice category} $\mathcal{C}/B$ to have morphisms $A \overset{f}{\to} B$ as objects, and morphisms $(A \overset{f}{\to} B) \to (A' \overset{f'}{\to} B)$ are morphisms $h: A \to A'$ making
	\begin{center}
		\begin{tikzcd}[column sep=tiny]
				A \arrow[rr, "h"] \arrow[rd, "f"] & & A'\arrow[ld, "f'"]\\
				& B &
		\end{tikzcd}
	\end{center}
	commute.
\end{definition}

\begin{lemma}
	Let $F: \mathcal{C} \to \mathcal{D}$ be a functor. Then $F$ is part of an equivalence $\mathcal{C} \simeq \mathcal{D} \iff$ F is full, faithful and \textbf{essentially surjective}, i.e. for every $B \in \ob \mathcal{D}$, there exists $A \in \ob \mathcal{C}$ s.t. $FA \cong B$.
\end{lemma}

\begin{definition}
	\begin{enumerate}[label=\alph*.]
		\item A \textbf{skeleton} of a category $\mathcal{C}$ is a full subcategory $\mathcal{C}'$ containing exactly one object from each isomorphism class of objects of $\mathcal{C}$.
		\item We say $\mathcal{C}$ is \textbf{skeletal} if it's a skeleton of itself. Equivalently, any isomorphism $f$ in $\mathcal{C}$ satisfies $\dom f = \cod f$.
	\end{enumerate}
\end{definition}

For example, $\text{\textbf{Mat}}_K$ is skeletal. The full subgategory of standard vector spaces $K^n$ is a skeleton of $\text{\textbf{fd Mod}}_K$.

\begin{remark}
	The following statements are each equivalent to the Axiom of Choice:
	\begin{enumerate}
		\item Every small category has a skeleton
		\item Any small category is equivalent to each of its skeletons
		\item Any two skeletons of a given small category are isomorphic
	\end{enumerate}
\end{remark}

\begin{definition}
	Let $f: A \to B$ be a morphism in a category $\mathcal{C}$.
	\begin{enumerate}[label=\alph*.]
		\item $f$ is a \textbf{monomorphism} if, given $g,h:D \rightrightarrows A$, the equation $fg = fh$ implies $g=h$. We write $A \rightarrowtail B$ if $f$ is monic.
		\item Dually, $f$ is an \textbf{epimorphism} if, given $k,l: B \rightrightarrows C$, $kf = lf$ implies $k=l$. We write $A \twoheadrightarrow B$ if $f$ is epic.
		\item $\mathcal{C}$ is a \textbf{balanced} category if every $f \in \mor \mathcal{C}$ which is both monic and epic is an isomorphism.
	\end{enumerate}
\end{definition}

\section{The Yoneda Lemma}
\begin{definition}
	A category $\mathcal{C}$ is \textbf{locally small} if, for any two objects $A, B$ of $\mathcal{C}$, the morphism $A \to B$ are parametrised by a set $\mathcal{C}(A, B)$.
\end{definition}

Given local smallness, $B \mapsto \mathcal{C}(A,B)$ becomes a functor $\mathcal{C}(A, -): \mathcal{C} \to \Set$: if $g: B \to B'$, the mapping $f \mapsto gf : \mathcal{C}(A, B) \to \mathcal{C}(A, B')$ is functorial since $h(gf) = (hg)f$ for any $h: B' \to B''$.

Similarly, $A \mapsto \mathcal{C}(A, B)$ becomes a functor $\mathcal{C}^{op} \to \Set$.

\begin{lemma}[Yoneda]
	Let $\mathcal{C}$ be a locally small category, $A \in \ob \mathcal{C}$ and $F: \mathcal{C} \to \Set$. Then
	\begin{enumerate}[label=\roman*.]
		\item There is a bijection between natural transformations $\mathcal{C}(A, -) \to F$ and elements of $FA$.
		\item Moreover, this bijection is natural in both $A$ and $F$.
	\end{enumerate}
\end{lemma}
\begin{proof}
	Bijection: given $\alpha : \mathcal{C}(A, -) \to F$, define $\Phi(\alpha) = \alpha_A(1_A) \in FA$.
	
	Given $x \in FA$, define $\Psi(x): \mathcal{C}(A, -) \to F$ by $$\Psi(x)_B(A \overset{f}{\to} B) = (Ff)(x) \in FB$$ $\Psi(x)$ is natural: given $g: B \to C$, we have
	\begin{align*}
	\Psi(x)_C(\mathcal{C}(A, g)(f)) &= \Psi(x)_C(gf) \\
	&= F(gf)(x) \\
	&= (Fg)(Ff)(x) \\
	&= (Fg)\Psi(x)_B(f)
	\end{align*}
	
	$\Phi\Psi(x) = x$ since $F(1_A)(x) = x$, and $\Psi\Phi(\alpha) = \alpha$ since, for any $f: A \to B$,
	\begin{align*}
	\Psi\Phi(\alpha)_B(f) &= Ff(\Phi(\alpha)) \\
	&= Ff(\alpha_A(1_A)) \\
	&= \alpha_B(\mathcal{C}(A,f)(1_A)) \\
	&= \alpha_B(f)
	\end{align*}
\end{proof}

\begin{corollary}
	The mapping $A \to \mathcal{C}(A, -)$ is a full and faithful functor $\mathcal{C}^{op} \to [\mathcal{C}, \Set]$.
\end{corollary}
\begin{proof}
	Given two objects $A,B$, 2.2(i) gives us a bijection from $\mathcal{C}(B,A)$ to the collection of natural transformations $\mathcal{C}(A, -) \to \mathcal{C}(B, -)$ (by taking $F: C \mapsto \mathcal{C}(B, C)$). We need to show this is functorial, but given $f \in \mathcal{C}(B, A)$, $\Psi(F)_A$ sends $1_A$ to $\mathcal{C}(B, f)(1_A) = f$, so it's the natural transformation $g \mapsto gf$.
	
	Hence, given $e: C \to B$, $\Psi(fe)(g) = g(fe) = (gf)(e) = \Psi(e)\Psi(f)g$
\end{proof}

We call this functor the \textbf{Yoneda embedding}. Hence any locally small category $\mathcal{C}$ is equivalent to a full subcategory of $[\mathcal{C}^{op}, \Set]$.

\begin{definition}
	A functor $\mathcal{C} \to \Set$ is \textbf{representable} if it's isomorphic to $\mathcal{C}(A, -)$ for some $A$.
	
	A \textbf{representation} of $F: \mathcal{C} \to \Set$ is a pair $(A, x)$ where $A \in \ob \mathcal{C}$, $x \in FA$ and $\Psi(x): \mathcal{C}(A, -) \to F$ is an isomorphism. We also call $x$ a \textbf{universal element} of $F$.
\end{definition}

\begin{corollary}['Representations are unique up to unique isomorphism']
	If $(A, x)$ and $(B, y)$ are both representations of $F: \mathcal{C} \to \Set$, then there's a unique isomorphism $f: A \to B$ s.t $Ff(x)=y$.
\end{corollary}
\end{document}