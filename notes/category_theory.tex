\documentclass[a4paper]{article}
\title{Part III Category Theory}
\author{Based on lectures by Prof P.T. Johnstone}
\date{Michaelmas 2016\\University of Cambridge}
\usepackage{mathtools}
\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{textcomp}
\usepackage{enumerate}
\usepackage{graphicx}
\usepackage{tikz-cd}
\usepackage{enumitem}
\theoremstyle{definition}
\newtheorem{definition}{Definition}
\theoremstyle{remark}
\newtheorem{remark}[definition]{Remark}
\theoremstyle{default}
\newtheorem{lemma}[definition]{Lemma}
\newtheorem{corollary}[definition]{Corollary}
\newtheorem{theorem}[definition]{Theorem}
\numberwithin{definition}{section}
\renewcommand{\baselinestretch}{1.3}
\newcommand*\conj[1]{\overline{#1}}
\newcommand*\dom[1]{\textnormal{dom}\,#1}
\newcommand*\cod[1]{\textnormal{cod}\,#1}
\newcommand*\ob[1]{\textnormal{ob}\,#1}
\newcommand*\mor[1]{\textnormal{mor}\,#1}
\newcommand*\circbox[1]{\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {#1}}}}
\newcommand*\parallelpair[2]{\overset{#1}{\underset{#2}{\rightrightarrows}}}
\newcommand*\rightleft[2]{\overset{#1}{\underset{#2}{\rightleftarrows}}}
\DeclareMathOperator{\Set}{\textbf{Set}}
\DeclareMathOperator{\Sub}{\textbf{Sub}}
\DeclareMathOperator{\Adj}{\textbf{Adj}}
\DeclareMathOperator{\coeq}{coeq}
\begin{document}
\maketitle
\tableofcontents

\section{Definitions and Examples}
\begin{definition}[Category]
	A category $\mathcal{C}$ consists of 
	\begin{enumerate}[label=\alph*.]
		\item a collection $\ob{\mathcal{C}}$ of \textbf{objects} $A$, $B$, $C$, \dots
		\item a collection $\mor{\mathcal{C}}$ of \textbf{morphisms} $f$, $g$, $h$, \dots
		\item two operations \dom, \cod from morphisms to objects. We write $f:A\to B$ or $A\overset{f}{\to}B$ to mean '$f$ is a morphism and $\dom{f}=A$ and $\cod{f}=B$'
		\item an operation assigning to each object $A$ a morphism $1_A:A\to A$
		\item a partial binary operation $(f, g) \mapsto gf$, s.t. $gf$ is defined $\iff \dom{g}=\cod{f}$, and then $gf:\dom{f}\to\cod{g}$
	\end{enumerate}
	satisfying
	\begin{enumerate}[label=\alph*.]
		\setcounter{enumi}{5}
		\item $f 1_A = f$ and $1_B f=f$ $\forall f: A \to B$
		\item $h(fg) = (hg)f$ whenever $gf$ and $hg$ are defined
	\end{enumerate}
\end{definition}

\begin{definition}[Functor]
	Let $\mathcal{C}$ and $\mathcal{D}$ be categories. A \textbf{functor} $\mathcal{C}\to\mathcal{D}$ consists of
	\begin{enumerate}[label=\alph*.]
		\item a mapping $A \to FA$ from $\ob{\mathcal{C}}$ to $\ob{\mathcal{D}}$
		\item a mapping $f \to Ff$ from $\mor{\mathcal{C}}$ to $\mor{\mathcal{D}}$
	\end{enumerate}
	satisfying $\dom{Ff}=F\dom{f}$, $\cod{Ff}=F\cod{f}$ for all $f$, $F(1_A)=1_{FA}$ for all $A$, and $F(gf)=(Fg)(Ff)$ whenever $gf$ is defined.
\end{definition}

\begin{definition}
	By a \textbf{contravariant functor} $\mathcal{C} \to \mathcal{D}$ we mean a functor $\mathcal{C} \to \mathcal{D}^{op}$ (or equivalently $\mathcal{C}^{op} \to \mathcal{D}$). A functor $\mathcal{C} \to \mathcal{D}$ is sometimes said to be \textbf{covariant}.
\end{definition}

\begin{definition}[Natural transformation]
	Let $\mathcal{C}$ and $\mathcal{D}$ be two categories and $F, G: \mathcal{C} \rightrightarrows \mathcal{D}$ two functors.
	A \textbf{natural transformation} $\alpha:F\to G$ assigns to each $A \in \ob{\mathcal{C}}$ a morphism $\alpha_A:FA\to GA$ in $\mathcal{D}$, such that
	\begin{center}
		\begin{tikzcd}
			FA \arrow[r, "Ff"] \arrow[d, "\alpha_A"] & FB \arrow[d, "\alpha_B"]\\
			GA \arrow[r, "Gf"]& GB
		\end{tikzcd}
	\end{center}
	commutes.
\end{definition}

We can compose natural transformations: given $\alpha: F \to G$ and $\beta: G \to H$, the mapping $A \mapsto \beta_A \alpha_A$ is the $A$-component of a natural transformation $\beta\alpha: F \to H$.

\begin{definition}
	Given categories $\mathcal{C}, \mathcal{D}$, we write $[\mathcal{C},\mathcal{D}]$ for the category of all functors $\mathcal{C} \to \mathcal{D}$ and natural transformations between them.
\end{definition}

\begin{lemma}
	Given $F,G: \mathcal{C} \to \mathcal{D}$ and $\alpha: F \to G$, $\alpha$ is an isomorphism in $[\mathcal{C}, \mathcal{D}] \iff$ each $\alpha_A$ is an isomorphism in $\mathcal{D}$.
\end{lemma}

\begin{definition}[Faithful and full]
	Let $F: \mathcal{C} \to \mathcal{D}$ be a functor.
	\begin{enumerate}[label=\alph*.]
		\item We say that $F$ is \textbf{faithful} if, given $f, g \in \mor{\mathcal{C}}$, the equations $\dom{f}=\dom{g}$, $\cod{f}=\cod{g}$ and $Ff = Fg$ imply $f=g$.
		\item $F$ is \textbf{full} if, given any $g: FA \to FB$ in $\mathcal{D}$, there exists $f: A \to B$ in $\mathcal{C}$ with $Ff =g$.
		\item We say a subcategory $\mathcal{C}'$ of $\mathcal{C}$ is \textbf{full} if the inclusion $\mathcal{C}' \hookrightarrow \mathcal{C}$ is a full functor.
	\end{enumerate}
\end{definition}

For example, \textbf{Gp} is a full subcategory of the category \textbf{Mon} of monoids, but \textbf{Mon} is a non-full subcategory of the category \textbf{Sgp} of semigroups.

\begin{definition}[Equivalence of categories]
	Let $\mathcal{C}$ and $\mathcal{D}$ be categories.
	An \textbf{equivalence} between $\mathcal{C}$ and $\mathcal{D}$ is a pair of functors $F: \mathcal{C} \to \mathcal{D}$, $G: \mathcal{D} \to \mathcal{C}$ together with natural isomorphisms $\alpha: 1_\mathcal{C} \to GF$, $\beta: FG \to 1_\mathcal{D}$.
	We write $\mathcal{C} \simeq \mathcal{D}$ to mean that $\mathcal{C}$ and $\mathcal{D}$ are equivalent.
	
	We say a property $P$ of categories is \textbf{categorical} if whenever $\mathcal{C}$ has $P$ and $\mathcal{C}\simeq\mathcal{D}$ then $\mathcal{D}$ has $P$.
\end{definition}

For example, being a groupoid is a categorical property, but being a group is not.

\begin{definition}[Slice category]
	Given an object $B$ of a category $\mathcal{C}$,
	define the \textbf{slice category} $\mathcal{C}/B$ to have morphisms $A \overset{f}{\to} B$ as objects,
	and morphisms $(A \overset{f}{\to} B) \to (A' \overset{f'}{\to} B)$ are morphisms $h: A \to A'$ making
	\begin{center}
		\begin{tikzcd}[column sep=tiny]
				A \arrow[rr, "h"] \arrow[rd, "f"] & & A'\arrow[ld, "f'"]\\
				& B &
		\end{tikzcd}
	\end{center}
	commute.
\end{definition}

\begin{lemma}
	Let $F: \mathcal{C} \to \mathcal{D}$ be a functor.
	Then $F$ is part of an equivalence $\mathcal{C} \simeq \mathcal{D} \iff$ F is full, faithful and \textbf{essentially surjective},
	i.e. for every $B \in \ob \mathcal{D}$, there exists $A \in \ob \mathcal{C}$ s.t. $FA \cong B$.
\end{lemma}

\begin{definition}
	\begin{enumerate}[label=\alph*.]
		\item A \textbf{skeleton} of a category $\mathcal{C}$ is a full subcategory $\mathcal{C}'$ containing exactly one object from each isomorphism class of objects of $\mathcal{C}$.
		\item We say $\mathcal{C}$ is \textbf{skeletal} if it's a skeleton of itself. Equivalently, any isomorphism $f$ in $\mathcal{C}$ satisfies $\dom f = \cod f$.
	\end{enumerate}
\end{definition}

For example, $\text{\textbf{Mat}}_K$ is skeletal. The full subgategory of standard vector spaces $K^n$ is a skeleton of $\text{\textbf{fd Mod}}_K$.

\begin{remark}
	The following statements are each equivalent to the Axiom of Choice:
	\begin{enumerate}
		\item Every small category has a skeleton
		\item Any small category is equivalent to each of its skeletons
		\item Any two skeletons of a given small category are isomorphic
	\end{enumerate}
\end{remark}

\begin{definition}
	Let $f: A \to B$ be a morphism in a category $\mathcal{C}$.
	\begin{enumerate}[label=\alph*.]
		\item $f$ is a \textbf{monomorphism} if, given $g,h:D \rightrightarrows A$, the equation $fg = fh$ implies $g=h$. We write $A \rightarrowtail B$ if $f$ is monic.
		\item Dually, $f$ is an \textbf{epimorphism} if, given $k,l: B \rightrightarrows C$, $kf = lf$ implies $k=l$. We write $A \twoheadrightarrow B$ if $f$ is epic.
		\item $\mathcal{C}$ is a \textbf{balanced} category if every $f \in \mor \mathcal{C}$ which is both monic and epic is an isomorphism.
	\end{enumerate}
\end{definition}

\section{The Yoneda Lemma}
\begin{definition}
	A category $\mathcal{C}$ is \textbf{locally small} if, for any two objects $A, B$ of $\mathcal{C}$, the morphism $A \to B$ are parametrised by a set $\mathcal{C}(A, B)$.
\end{definition}

Given local smallness, $B \mapsto \mathcal{C}(A,B)$ becomes a functor $\mathcal{C}(A, -): \mathcal{C} \to \Set$: if $g: B \to B'$,
the mapping $f \mapsto gf : \mathcal{C}(A, B) \to \mathcal{C}(A, B')$ is functorial since $h(gf) = (hg)f$ for any $h: B' \to B''$.

Similarly, $A \mapsto \mathcal{C}(A, B)$ becomes a functor $\mathcal{C}^{op} \to \Set$.

\begin{lemma}[Yoneda]
	Let $\mathcal{C}$ be a locally small category, $A \in \ob \mathcal{C}$ and $F: \mathcal{C} \to \Set$. Then
	\begin{enumerate}[label=\roman*.]
		\item There is a bijection between natural transformations $\mathcal{C}(A, -) \to F$ and elements of $FA$.
		\item Moreover, this bijection is natural in both $A$ and $F$.
	\end{enumerate}
\end{lemma}
\begin{proof}
	Bijection: given $\alpha : \mathcal{C}(A, -) \to F$, define $\Phi(\alpha) = \alpha_A(1_A) \in FA$.
	
	Given $x \in FA$, define $\Psi(x): \mathcal{C}(A, -) \to F$ by $$\Psi(x)_B(A \overset{f}{\to} B) = (Ff)(x) \in FB$$ $\Psi(x)$ is natural: given $g: B \to C$, we have
	\begin{align*}
	\Psi(x)_C(\mathcal{C}(A, g)(f)) &= \Psi(x)_C(gf) \\
	&= F(gf)(x) \\
	&= (Fg)(Ff)(x) \\
	&= (Fg)\Psi(x)_B(f)
	\end{align*}
	
	$\Phi\Psi(x) = x$ since $F(1_A)(x) = x$, and $\Psi\Phi(\alpha) = \alpha$ since, for any $f: A \to B$,
	\begin{align*}
	\Psi\Phi(\alpha)_B(f) &= Ff(\Phi(\alpha)) \\
	&= Ff(\alpha_A(1_A)) \\
	&= \alpha_B(\mathcal{C}(A,f)(1_A)) \\
	&= \alpha_B(f)
	\end{align*}
\end{proof}

\begin{corollary}
	The mapping $A \to \mathcal{C}(A, -)$ is a full and faithful functor $\mathcal{C}^{op} \to [\mathcal{C}, \Set]$.
\end{corollary}
\begin{proof}
	Given two objects $A,B$, 2.2(i) gives us a bijection from $\mathcal{C}(B,A)$ to the collection of natural transformations $\mathcal{C}(A, -) \to \mathcal{C}(B, -)$ (by taking $F: C \mapsto \mathcal{C}(B, C)$).
	We need to show this is functorial, but given $f \in \mathcal{C}(B, A)$, $\Psi(F)_A$ sends $1_A$ to $\mathcal{C}(B, f)(1_A) = f$, so it's the natural transformation $g \mapsto gf$.
	
	Hence, given $e: C \to B$, $\Psi(fe)(g) = g(fe) = (gf)(e) = \Psi(e)\Psi(f)g$
\end{proof}

We call this functor the \textbf{Yoneda embedding}. Hence any locally small category $\mathcal{C}$ is equivalent to a full subcategory of $[\mathcal{C}^{op}, \Set]$.

\begin{definition}
	A functor $\mathcal{C} \to \Set$ is \textbf{representable} if it's isomorphic to $\mathcal{C}(A, -)$ for some $A$.
	
	A \textbf{representation} of $F: \mathcal{C} \to \Set$ is a pair $(A, x)$ where $A \in \ob \mathcal{C}$, $x \in FA$ and $\Psi(x): \mathcal{C}(A, -) \to F$ is an isomorphism.
	We also call $x$ a \textbf{universal element} of $F$.
\end{definition}

\begin{corollary}['Representations are unique up to unique isomorphism']
	If $(A, x)$ and $(B, y)$ are both representations of $F: \mathcal{C} \to \Set$, then there's a unique isomorphism $f: A \to B$ s.t $Ff(x)=y$.
\end{corollary}

\begin{definition}[Product and coproduct]
	Given two objects $A, B$ of a locally small category $\mathcal{C}$, we define their \textbf{product} to be a representation of the functor
	$$\mathcal{C}(-,A) \times \mathcal{C}(-, B): \mathcal{C}^{op} \to \Set$$
	i.e. an object $A \times B$ equipped with morphisms $\pi_1 : A \times B \to A$, $\pi_2: A \times B \to B$
	s.t. given any pair $(f:C \to A, g: C \to B)$, there exists a unique $h: C \to A \times B$
	s.t. $\pi_1h=f$ and $\pi_2h=g$.
	
	More generally, we can define the product $\prod_{i \in I} A_i$ of a family $\{A_i \,|\, i \in I\}$ of objects,
	or the product of the empty family, i.e. a \textbf{terminal object} 1 s.t. for every $A$ there's a unique $A \to 1$.
	
	Dualizing, we get the notion of \textbf{coproduct} or \textbf{sum}.
\end{definition}

\begin{definition}[Equaliser and coequaliser]
	Given a parallel pair $f, g: A \rightrightarrows B$ in a locally small category $\mathcal{C}$,
	the assignment $C \mapsto FC = \{h: C \to A \,|\, fh=gh\}$ is a subfunctor $F$ of $\mathcal{C}(-, A)$.
	A representation of $F$ is called an \textbf{equaliser} of $(f, g)$.
	
	In elementary terms, it's an object $E$ equipped with $e: E \to A$ s.t. $fe=ge$,
	s.t. any $h$ with $fh = gh$ factors uniquely as $h=ek$
	
	Dually, we have the notion of \textbf{coequaliser},
	i.e. a morphism $q:B \to Q$ satisfying $qf=qg$, and universal among such.
\end{definition}

\begin{definition}
	\begin{enumerate}[label=\alph*.]
		\item We say a monomorphism is \textbf{regular} if it occurs as an equaliser (dually, regular epimorphism).
		\item We say $f: A \to B$ is a \textbf{split monomorphism} if there exists $g: B \to A$ with $gf = 1_A$.
	\end{enumerate}
\end{definition}

Every split monomorphism is regular:
if $gf = 1_A$, $f$ is an equaliser of $(1_B, fg)$ [see sheet 1, q2].

\begin{definition}
	Let $\mathcal{C}$ be a (locally small) category, $\mathcal{G}$ a collection of objects of $\mathcal{C}$.
	\begin{enumerate}[label=\alph*.]
		\item Say $\mathcal{G}$ is a \textbf{separating family} if the functors $\mathcal{C}(G, -),\, G \in \mathcal{G}$ are jointly faithful,
		i.e. if given $f,g : A \rightrightarrows B$ with $f \neq g$,
		there exists $G \in \mathcal{G}$ and $h: G \to A$ with $fh \neq gh$.
		\item Say $\mathcal{G}$ is a \textbf{detecting family} if the $\mathcal{C}(G, -),\, G \in \mathcal{G}$ jointly reflect isomorphisms,
		i.e. if given $f: A \to B$ s.t. every $g: G \to B$ with $G \in \mathcal{G}$ factors uniquely through $f$,
		$f$ is an isomorphism.
	\end{enumerate}
\end{definition}

\begin{lemma}
	\begin{enumerate}[label=\roman*.]
		\item If $\mathcal{C}$ is balanced, then any separating family is detecting
		\item If $\mathcal{C}$ has equalisers, then every detecting family is separating
	\end{enumerate}
\end{lemma}

\begin{definition}
	An object $P$ is \textbf{projective} if $\mathcal{C}(P, -)$ preserves epimorphisms, i.e. if given
	\begin{center}
		\begin{tikzcd}
			& P \arrow[d, "f"] \\
			A \arrow[r, twoheadrightarrow, "e"] & B
		\end{tikzcd}
	\end{center}
	there exists $g: P \to A$ with $eg = f$.
	
	Dually, $P$ is \textbf{injective} in $\mathcal{C}$ if it's projective in $\mathcal{C}^{op}$.
	
	If $P$ satisfies this property $\forall e$ in some class $\mathcal{E}$ of epimorphisms,
	we call it $\mathcal{E}$-projective.
\end{definition}

\begin{corollary}
	Representable functors are (pointwise) projective in $[\mathcal{C}, \Set]$
\end{corollary}
\begin{proof}
	Given
	\begin{center}
		\begin{tikzcd}
			& \mathcal{C}(A, -) \arrow[d, "\beta"] \\
			F \arrow[r, twoheadrightarrow, "\alpha"] & G
		\end{tikzcd}
	\end{center}
	$\beta$ corresponds to some $y \in GA$. 
	$\alpha_A$ is surjective, so $\exists x \in FA$ with $\alpha_A(x)=y$.
	$x$ corresponds to $\gamma: \mathcal{C}(A, -) \to F$ with $\alpha\gamma = \beta$.
\end{proof}

\section{Adjunctions}
\begin{definition}[D.M. Khan, 1958]
	Let $\mathcal{C}$ and $\mathcal{D}$ be categories and $F: \mathcal{C} \to \mathcal{D}$, $G: \mathcal{D} \to \mathcal{C}$ be two functors.
	An \textbf{adjunction} between $F$ and $G$ is a bijection between morphisms $FA \to B$ in $\mathcal{D}$ and morphisms $A \to GB$ in $\mathcal{C}$, 
	which is natural in $A$ and $B$.

	(If $\mathcal{C}$ and $\mathcal{D}$ are locally small,
	this says that $(A, B) \to \mathcal{D}(FA, B)$ and $(A, B) \to \mathcal{C}(A, GB)$
	are naturally isomorphic functors $\mathcal{C}^{op} \times \mathcal{D} \to \Set$).
	
	We say $F$ is \textbf{left adjoint} to $G$,
	or $G$ is \textbf{right adjoint} to $F$,
	and write $F \dashv G$.
\end{definition}

\begin{theorem}
	Let $G: \mathcal{D} \to \mathcal{C}$ be a functor.
	Given $A \in \ob \mathcal{C}$,
	let $(A \downarrow G)$ be the category whose objects are pairs $(B, f)$
	with $B \in \ob \mathcal{D}$,
	$f: A \to GB$ and whose morphisms $(B, f) \to (B', f')$
	are morphisms $g: B \to B'$ in $\mathcal{D}$ such that
	\begin{center}
		\begin{tikzcd}
			A \arrow[r, "f"] \arrow[rd, "f'"] & GB \arrow[d, "Gg"] \\
			& GB'
		\end{tikzcd}
	\end{center}
	commutes.
	Then specifying a left adjoint for $G$ is equivalent to specifying an initial object of $(A \downarrow G)$ for each $A$.
	\label{33}
\end{theorem}

\begin{proof}
	First suppose $G$ has a left adjoint $F$.
	Let $\eta_A: A \to GFA$ be the morphism corresponding to $1_{FA}:FA \to FA$.
	The pair $(FA, \eta_A)$ is an object of $(A \downarrow G)$.
	We'll show it's initial.
	
	Given $g: FA \to B$,
	the composite
	\begin{tikzcd}A \arrow[r, "\eta_A"]& GFA \arrow[r, "Gg"]& GB\end{tikzcd}
	must correspond to
	\begin{tikzcd}FA \arrow[r, "1"] & FA \arrow[r, "g"] & B\end{tikzcd}
	under the adjunction.
	
	So, for any object $(B, f)$ of $(A \downarrow G)$,
	the unique morphism $(FA, \eta_A) \to (B, f)$ in $(A \downarrow G)$ is the morphism $FA \to B$ corresponding to $f$.
	
	Conversely, suppose we're given an initial object $(FA, \eta_A)$ of $(A \downarrow G)$ for each $G$.
	Given $f: A \to A'$,
	the composite
	\begin{tikzcd}A \arrow[r, "f"] & A' \arrow[r, "\eta_{A'}"] & GFA'\end{tikzcd}
	is an object of $(A \downarrow G)$,
	so there's a unique morphism $Ff: FA \to FA'$ making
	\begin{center}
		\begin{tikzcd}
			A \arrow[r, "\eta_A"] \arrow[d, "f"] & GFA \arrow[d, "GFf"] \\
			A' \arrow[r, "\eta_{a'}"] & GFA'
		\end{tikzcd}
	\end{center}
	commute.
	
	$f \mapsto Ff$ is functorial:
	given $f': A' \to A''$,
	then $(Ff')(Ff)$ and $F(f'f)$ are both morphisms $(FA, \eta_A) \to (FA'', \eta_{A''}f'f)$ in $(A \downarrow G)$,
	so they're equal.
	
	Finally, given $f: A \to GB$,
	the morphism $g: FA \to B$ corresponding to it is the unique morphism $(FA, \eta_A) \to (B, f)$ in $(A \downarrow G)$.
	
	The naturality of this bijection is given by naturality of $\eta$,
	and naturality in $B$ is immediate.
\end{proof}

\begin{corollary}
	If $F,\, F'$ are both left-adjoint to $G$,
	then there's a canonical natural isomorphism $F \to F'$.
\end{corollary}
\begin{proof}
	For each $A$,
	$(FA, \eta_A)$ and $(F'A, \eta'_A)$ are both initial in $(A \downarrow G)$,
	so there's a unique isomorphism $\alpha_A: (FA, \eta_A) \to (F'A, \eta'_A)$.
	
	$\alpha$ is natural: given $f: A \to A'$,
	$\alpha_{A'}f$ and $(Ff)\alpha_A$ are both morphisms $(FA, \eta_A) \to (F'A', \eta'_{A'}f)$ in $(A \downarrow G)$.
	So they're equal.
\end{proof}

\begin{lemma}
	Given
	\begin{tikzcd}
		\mathcal{C} \arrow[r, "F", shift left] & \mathcal{D} \arrow[r, "H", shift left] \arrow[l, "G", shift left] & \mathcal{E} \arrow[l, "K", shift left]
	\end{tikzcd},
	if $F \dashv G$ and $H \dashv K$ then $HF \dashv GK$.
\end{lemma}
\begin{proof}
	We have bijections
	$$\mathcal{E}(HFA, C) \cong \mathcal{D}(FA, KC) \cong \mathcal{C}(A, GKC)$$
	which are natural in $A$ and $C$.
\end{proof}

\begin{corollary}
	Given a commutative square
	\begin{tikzcd}
		\mathcal{C} \arrow[r, "F"]  \arrow[d, "G"] & \mathcal{D} \arrow[d, "H"] \\
		\mathcal{E} \arrow[r, "K"] & \mathcal{F}
	\end{tikzcd}
	of categories and functors,
	suppose all the functors in the diagram have left adjoints.
	Then the diagram
	\begin{tikzcd}
		\mathcal{F} \arrow[r] \arrow[d] & \mathcal{E} \arrow[d] \\
		\mathcal{D} \arrow[r] & \mathcal{C}
	\end{tikzcd}
	of left adjoints commutes up to natural isomorphism.
\end{corollary}

Given $F \dashv G$,
we have a natural transformation $\eta: 1_\mathcal{C} \to GF$
defined as in 3.2. We call $\eta$ the \textbf{unit} of the adjunction.

Dually, we have $\epsilon: FG \to 1_\mathcal{D}$, the \textbf{counit}.
$\epsilon_B: FGB \to B$ corresponds to $1_{GB}: GB \to GB$.

\begin{theorem}
	Suppose we're given $F: \mathcal{C} \to \mathcal{D}$ and $G: \mathcal{D} \to \mathcal{C}$.
	Specifying an adjunction $F \dashv G$ is equivalent to specifying natural transformations
	$\eta: 1_\mathcal{C} \to GF$ and $\epsilon: FG \to 1_\mathcal{D}$ such that
	\begin{center}
	\begin{tikzcd}
		F \arrow[r, "F\eta"] \arrow[rd, "1_F"] & FGF \arrow[d, "\epsilon_F"] & \text{and} & G \arrow[r, "\eta_G"] \arrow[rd, "1_G"]  & GFG \arrow[d, "G\epsilon"] \\
		                                       &  F                          &            &                                          &  G
	\end{tikzcd}
	\end{center}
	commute.
	(We say $\eta$ and $\epsilon$ satisfy the \textbf{triangular identities}).
\end{theorem}
\begin{proof}
	Given $F \dashv G$, we define $\eta$ and $\epsilon$ as already described.
	Since $\epsilon_{FA}: FGFA \to FA$ corresponds to $1_{GFA}$,
	the composite $\epsilon_{FA}(F\eta_A)$ corresponds to
	\begin{tikzcd}A \arrow[r, "\eta_A"] & GFA \arrow[r, "1_{GFA}"] & GFA \end{tikzcd},
	so it must be $1_{FA}$.
	
	Similarly for the other identity.
	
	Conversely, given $\eta$ and $\epsilon$ satisfying the $\triangle^r$ identities,
	we map $f: A \to GB$ to the composite
	\begin{tikzcd}FA \arrow[r, "Ff"] & FGB \arrow[r, "\epsilon_B"] & B\end{tikzcd}
	and $g: FA \to B$ to the composite
	\begin{tikzcd}A \arrow[r, "\eta_A"] & GFA \arrow[r, "Gg"] & GB\end{tikzcd}.
	
	We have
	\begin{align*}
	\Phi(\begin{tikzcd}[ampersand replacement=\&] A \arrow[r, "f"]\& GB\end{tikzcd}) &=
		\begin{tikzcd}[ampersand replacement=\&]FA \arrow[r, "Ff"] \& FGB \arrow[r, "\epsilon_B"] \& B\end{tikzcd} \\
	\Psi(\begin{tikzcd}[ampersand replacement=\&] FA \arrow[r, "g"]\& B\end{tikzcd}) &=
		\begin{tikzcd}[ampersand replacement=\&]A \arrow[r, "\eta_A"] \& GFA \arrow[r, "Gg"] \& GB\end{tikzcd}
	\end{align*}
	
	So
	\begin{align*}
		\Psi\Phi(f) & =
			\begin{tikzcd}[ampersand replacement=\&] A \arrow[r, "\eta_A"] \& GFA \arrow[r, "GFf"] \& GFGB \arrow[r, "G\epsilon_B"] \& GB\end{tikzcd} \\
			&= \begin{tikzcd}[ampersand replacement=\&] A \arrow[r, "f"] \& GB \arrow[r, "\eta_{GB}"] \& GFGB \arrow[r, "G\epsilon_B"] \& GB\end{tikzcd} \\
			&= f
	\end{align*}
	
	And dually $\Phi\Psi(g) = g$.
	
	Naturality of $\Phi$ in $A$ is immediate from its definition,
	and naturality in $B$ follows from that of $\epsilon$.
\end{proof}

\begin{lemma}
	Suppose given
	\begin{tikzcd}
		\mathcal{C} \arrow[r, "F", shift left] & \mathcal{D} \arrow[l, "G", shift left]
	\end{tikzcd}
	and natural isomorphisms $\alpha: 1_\mathcal{C} \to GF$,
	$\beta: FG \to 1_\mathcal{D}$.
	Then there exist natural isomorphisms $\alpha',\,\beta'$ 
	which additionally satisfy the triangular identities.
	In particular ($F \dashv G$).
\end{lemma}
\begin{proof}
	We define $\alpha' = \alpha$ and take $\beta'$ to be the composite
	\begin{center}
		\begin{tikzcd}
			FG \arrow[r, "\beta_{FG}^{-1}"] & FGFG \arrow[r, "F_{\alpha_G}^{-1}"] & FG \arrow[r, "\beta"] & 1_\mathcal{D}
		\end{tikzcd}
	\end{center}
	Note that, since
	\begin{tikzcd}
		FGFG \arrow[r, "FG\beta"] \arrow[d, "\beta_{FG}"] & FG \arrow[d, "\beta"] \\
		FG \arrow[r, "\beta"] & 1_\mathcal{D}
	\end{tikzcd}
	commutes and $\beta$ is monic,
	we have $FG\beta = \beta_FG$.
	
	Similarly, $GF\alpha = \alpha_{GF}: GF \to GFGF$.
	
	Now
	\begin{align*}
		\beta_F' \circ F_{\alpha'} &=
			\begin{tikzcd}[ampersand replacement=\&]F \arrow[r, "F\alpha"]\& FGF \arrow[r, "\beta_{FGF}^{-1}"]\& FGFGF \arrow[r, "F\alpha_{GF}^{-1}"]\& FGF \arrow[r, "\beta_F"] \& F\end{tikzcd} \\
		&= \begin{tikzcd}[ampersand replacement=\&]F \arrow[r, "\beta_F^{-1}"]\& FGF \arrow[r, "FGF\alpha"]\& FGFGF \arrow[r, "FGF\alpha^{-1}"]\& FGF \arrow[r, "\beta_F"] \& F\end{tikzcd} \\
		&= 1_F
	\end{align*}
	and
	\begin{align*}
	G\beta' \circ \alpha'_G &=
	\begin{tikzcd}[ampersand replacement=\&]G \arrow[r, "\alpha_G"]\& GFG \arrow[r, "GFG\beta^{-1}"]\& GFGFG \arrow[r, "GF^{-1}_{\alpha_G}"]\& GFG \arrow[r, "G\beta"] \& G\end{tikzcd} \\
	&= \begin{tikzcd}[ampersand replacement=\&]G \arrow[r, "G\beta^{-1}"]\& GFG \arrow[r, "\alpha_{GFG}"]\& GFGFG \arrow[r, "\alpha_{GFG}^{-1}"]\& GFG \arrow[r, "\beta_F"] \& G\end{tikzcd} \\
	&= 1_G
	\end{align*}
\end{proof}

\begin{lemma}
	Suppose
	\begin{tikzcd}
		\mathcal{C} \arrow[r, "F", shift left] & \mathcal{D} \arrow[l, "G", shift left]
	\end{tikzcd},
	($F \dashv G$) is an adjunction with counit $\epsilon$.
	Then
	\begin{enumerate}[label=\roman*.]
		\item $\epsilon$ is (pointwise) epic $\iff$ $G$ is faithful
		\item $\epsilon$ is an isomorphism $\iff$ $G$ is full and faithful
	\end{enumerate} 
\end{lemma}
\begin{proof}
	\begin{enumerate}[label=\roman*.]
		\item Given $g: B \to B'$,
		the morphism $Gg: GB \to GB'$ corresponds to
		\begin{center}
			\begin{tikzcd} FGB \arrow[r, "\epsilon_B"] & B \arrow[r, "g"] & B' \end{tikzcd}
		\end{center}
		So, for fixed $B$,
		composition with $\epsilon_B$ is injective on morphisms $B \to B'$
		$\iff$ $(g \mapsto Gg)$ is injective on morphisms $B \to B'$.
		
		Hence $G$ is faithful $\iff \epsilon_B$ is epic $\forall B$.
		
		\item Similarly, $\epsilon_B$ is 0 $\forall B$
		$\implies G$ is bijective on morphisms with given domain and codomain,
		i.e. $G$ is full and faithful.
		
		Conversely, if $G$ is full and faithful,
		$1_{FGB}$ factors uniquely as \newline
		\begin{tikzcd}FGB \arrow[r, "\epsilon_B"] & B \arrow[r, "g"] & FGB\end{tikzcd},
		so $\epsilon_B$ is split monic.
		But it's epic by (i), hence an isomorphism.
	\end{enumerate}
\end{proof}

\begin{definition}
	\begin{enumerate}[label=\roman*.]
		\item A \textbf{reflection} is an adjunction satisfying the conditions of 3.8(ii).
		\item A \textbf{reflective} subcategory of $\mathcal{C}$ is a full subcategory $\mathcal{C}'$
		for which the inclusion $\mathcal{C}' \hookrightarrow \mathcal{C}$ has a left adjoint.
	\end{enumerate}
	
	Dually, \textbf{coreflection} and \textbf{coreflective} subcategory.
\end{definition}

\section{Limits}
\begin{definition}
	\begin{enumerate}[label=\alph*.]
		\item Let $J$ be a category (almost always small, often finite).
		A \textbf{diagram of shape J} in a category $\mathcal{C}$ is a functor $D: J \to \mathcal{C}$.
		
		E.g. if $J$ is the finite category
		\begin{tikzcd}
			\cdot \arrow[r] \arrow[d] \arrow[rd] & \cdot \arrow[d]\\
			\cdot \arrow[r] & \cdot
		\end{tikzcd}
		, a diagram of shape $J$ is a commutative square.
		If $J$ is the category
		\begin{tikzcd}
			\cdot \arrow[r] \arrow[d] \arrow[rd, shift left] \arrow[rd, shift right] & \cdot \arrow[d]\\
			\cdot \arrow[r] & \cdot
		\end{tikzcd}
		, a diagram of shape $J$ is a not-necessarily-commutative square.
		
		The objects $D(j),\,j \in \ob J$ are called \textbf{vertices} of $D$,
		and the morphisms $D(\alpha),\, \alpha \in \mor J$ are called \textbf{edges} of $D$.
		
		\item Let $D: J \to \mathcal{C}$ be a diagram in $\mathcal{C}$.
		A \textbf{cone over D} is a pair $(A,\, (\lambda_j \,|\, j \in \ob J))$ where $\lambda_j: A \to D(j)\ \forall j$,
		and
		\begin{tikzcd}[column sep=tiny]
			& A \arrow[ld, "\lambda_j"] \arrow[rd, "\lambda_{j'}"] & \\
			D(j) \arrow[rr, "D(\alpha)"]&& D(j')
		\end{tikzcd}
		commutes for each $\alpha: j \to j'$ in $J$.
		
		$A$ is called the \textbf{apex} of the cone,
		and the $\lambda_j$ are its \textbf{legs}.
		
		Equivalently, $\lambda$ is a natural transformation $\triangle A \to D$,
		where $\triangle A$ is the \textbf{constant diagram} with all vertices A and all edges $1_A$.
		
		A \textbf{morphism}
		$f: (A, (\lambda_j)) \to (B, (\mu_j))$ of cones over $D$ is a morphism $f: A \to B$ s.t.
		\begin{tikzcd}[column sep=tiny]
		A \arrow[rr, "f"] \arrow[rd, "\lambda_j"] && B \arrow[ld, "\mu_j"]\\
		& D(j) &
		\end{tikzcd}
		commutes for each $j$.
		We have a category \textbf{Cone}($D$) of cones over $D$.
		
		Note that $A \mapsto \triangle A$ is a functor $\mathcal{C} \to [J, \mathcal{C}]$ and
		\textbf{Cone}(D) is in fact the category $(\triangle \downarrow D)$.
		
		A cocone over $D: J \to \mathcal{C}$ is a cone over $D: J^{op} \to \mathcal{C}^{op}$.
		We write \textbf{Cocone}$(D)$ for the category of cocones over D.
	\end{enumerate}
\end{definition}
\begin{definition}
	\begin{enumerate}[label=\roman*.]
		\item A \textbf{limit} (resp. \textbf{colimit}) for a diagram $D: J \to \mathcal{C}$ is a terminal object of \textbf{Cone}(D) (respectively an initial object of \textbf{Cocone}(D)).
		\item We say $\mathcal{C}$ has limits (resp. colimits) of shape $J$ if $\triangle: \mathcal{C} \to [J, \mathcal{C}]$ has a right (resp. left) adjoint.
		
		(This is equivalent to making a choice of limit (resp. colimit) for every diagram of shape J).
	\end{enumerate}
\end{definition}

\begin{definition}[Pullback]
	Let $J$ be
	\begin{tikzcd}& \cdot \arrow[d] \\ \cdot \arrow[r] & \cdot\end{tikzcd}.
	A diagram of shape J looks like 
	\begin{tikzcd}& A \arrow[d, "f"] \\ B \arrow[r, "g"] & C\end{tikzcd}.
	A cone over it consists of
	\begin{tikzcd}D \arrow[r, "h"] \arrow[rd, "l"] \arrow[d, "k"] & A \\ C & B\end{tikzcd}
	satisfying $fh=l=gk$.
	Equivalently, it's a pair
	\begin{tikzcd}D \arrow[r, "h"] \arrow[d, "k"] & A \\ C &\end{tikzcd}
	completing the diagram to a commutative square.
	
	A universal such pair is called a \textbf{pullback} (or \textbf{fibre product});
	in $\Set$ it can be defined as $\{(a,b) \in A \times B \,|\, f(a)=g(b)\}$.
	A colimit of shape $J^{op}$ is called a \textbf{pushout}.
\end{definition}

\begin{theorem}
	Let $\mathcal{C}$ be a category.
	\begin{enumerate}[label=\roman*.]
		\item If $\mathcal{C}$ has equalisers and all finite (resp. all small) products,
		then $\mathcal{C}$ has all finite (resp. all small) limits.
		\item If $\mathcal{C}$ has pullbacks and a terminal object, 
		then $\mathcal{C}$ has all finite limits.
	\end{enumerate}
\end{theorem}
\begin{proof}
	\begin{enumerate}[label=\roman*.]
	\item 
	Given $D: J \to \mathcal{C}$, first form the products
	\begin{center}
	\begin{tabular}{ccc}
	$P = \prod_{j \in \ob J} D(j)$ & and & $Q = \prod_{\alpha \in \mor J} D(\cod \alpha)$
	\end{tabular}
	\end{center}
	
	Define
	\begin{tikzcd}P \ar[r, "f", shift left] \ar[r, "g" below, shift right] & Q\end{tikzcd}
	by $\pi_\alpha f = \pi_{\cod \alpha}: P \to D(\cod \alpha)$ and
	$\pi_\alpha g = D(\alpha) \circ \pi_{\dom \alpha}: P \to D(\dom \alpha) \to D(\cod \alpha)$,
	and let $e:E \to P$ be the equaliser of $(f, g)$.
	
	Claim $(E, (\pi_je \,|\, j \in \ob J))$ is a limit cone for $D$.
	It is a cone since, for any $\alpha: j \to j'$,
	$D(\alpha)\pi_je = \pi_\alpha ge = \pi_\alpha fe = \pi_{j'} e$.
	
	Given any cone $(C, (\lambda_j \,|\, j \in \ob J))$,
	the $\lambda_j$ define a unique $\lambda: C \to P$,
	and $f\lambda = g\lambda$ since $\pi_\alpha f\lambda = \pi_\alpha g \lambda \ \forall \alpha$.
	So $\lambda$ factors uniquely through $e$.
	
	\item
	Let 1 be a terminal object of $\mathcal{C}$.
	For any pair of objects $(A, B)$ the pullback of
	\begin{tikzcd}& A \ar[d]\\ B \ar[r]& 1\end{tikzcd}
	has the universal property of a product $A \times B$,
	so $\mathcal{C}$ has binary products.
	Then we can define any finite product $\prod_{i=1}^n A_i$ as $(((A_1 \times A_2)\times A_3) \times \dots) \times A_n$.
	
	So we need to show $\mathcal{C}$ has equalisers.
	Given \begin{tikzcd}A \ar[r, "f", shift left] \ar[r, "g" below, shift right] & B\end{tikzcd},
	consider the pullback of
	\begin{tikzcd}
		& B \ar[d, "{(1_A, f)}"] \\
		A \ar[r, "{(1_A, g)}"] & A \times B
	\end{tikzcd}.
	
	It consists of
	\begin{tikzcd}P \ar[r, "h"] \ar[d, "k"]& B \\ A\end{tikzcd}
	satisfying $1_Ah=1_Ak$ and $fh = gk$,
	and universal among such.
	
	But this forces $h=k$, and $h$ has the universal property of an equaliser for $(f, g)$.
	So by (i), $\mathcal{C}$ has all finite limits.
	\end{enumerate}
\end{proof}

\begin{definition}
	Let $F: \mathcal{C} \to \mathcal{D}$ be a functor.
	\begin{enumerate}[label=\alph*.]
		\item We say $F$ \textbf{preserves} limits of shape $J$ if,
		given $D: J \to \mathcal{C}$ and a limit cone $(L, (\lambda_j: j \in \ob J))$ for $D$,
		the cone $(FL, (F\lambda_j : j \in \ob J))$ is a limit for $FD: J \to \mathcal{D}$.
		\item We say $F$ \textbf{reflects} limits of shape $J$ if,
		given $D: J \to \mathcal{C}$ and a cone $(L, (\lambda_j))$ such that $(FL, (F\lambda_j))$ is a limit for $FD$,
		then $(L, (\lambda_j))$ is a limit for $D$.
		\item We say $F$ \textbf{creates} limits of shape $J$ if,
		given $D: J \to \mathcal{C}$ and a limit $(M, (\mu_j))$ for $FD$,
		there exists a cone $(L, \lambda_j)$ over $D$ whose image is isomorphic to $(M, (\mu_j))$,
		and any such cone is a limit for $D$.
	\end{enumerate}
\end{definition}

\begin{lemma}
	Suppose $\mathcal{D}$ has limits of shape $J$.
	Then $[\mathcal{C}, \mathcal{D}]$ has limits of shape $J$,
	and they're constructed pointwise
	(i.e. the forgetful functor $[\mathcal{C}, \mathcal{D}] \to \mathcal{D}^{\ob \mathcal{C}}$ creates them).
\end{lemma}
\begin{proof}
	Consider a functor $D: J \times \mathcal{C} \to \mathcal{D}$.
	For each $A \in \ob \mathcal{C}$,
	let $(LA, (\lambda_{j,A}: LA \to D(j, A) \,|\, j \in \ob J))$
	be a limit for the diagram $D(-, A): J \to \mathcal{D}$.
	
	Given any $f:A \to B$ in $\mathcal{C}$, the composites
	\begin{center}
	\begin{tikzcd}LA \ar{r}{\lambda_{j,A}} & D(j, A) \ar{r}{D(j,f)} & D(j, B)\end{tikzcd}
	\end{center}
	form a cone over $D(-, B)$,
	so they induce a unique $Lf: LA \to LB$ such that
	\begin{center}
		\begin{tikzcd}
			LA \ar{r}{Lf} \ar{d}{\lambda_{j, A}} & LB \ar{d}{\lambda_{j,B}}\\
			D(j,A) \ar{r}{D(j,f)} & D(j,B)
		\end{tikzcd}
	\end{center}
	commutes for all $j$.
	Uniqueness assures $L(gf)=L(g)L(f)$,
	so $L$ is a functor $\mathcal{C} \to \mathcal{D}$,
	and the $\lambda_{j,-}$ are natural transformations $L \to D(j, -)$.
	
	Suppose we're given any cone over $D$ in $[\mathcal{C}, \mathcal{D}]$ with apex $M$ and legs $\mu_j: M \to D(j, -)$.
	Then $(MA, (\mu_{j,A}: MA \to D(j, A) \,|\, j \in \ob J))$
	is a cone over $D(-, A)$ in $\mathcal{D}$,
	so we get a unique $\nu_A: MA \to LA$ s.t. $\lambda_{j,A}\nu_A = \mu_{j, A}$ for all $j$.
	
	Uniqueness tells us that
	\begin{center}
		\begin{tikzcd}
			MA \ar{r}{Mf} \ar{d}{\nu_A} & MB \ar{d}{\nu_B} \\
			LA \ar{r}{Lf} & LB
		\end{tikzcd}
	\end{center}
	commutes for all $f \in \mor \mathcal{C}$,
	so $\nu: M \to L$ in $[\mathcal{C}, \mathcal{D}]$,
	so it's the unique factorisation of the $\mu_{j,-}$ through the $\lambda_{j,-}$.
\end{proof}

\begin{lemma}
	A morphism $f: A \to B$ is monic $\iff$
	\begin{center}
	\begin{tikzcd}
		A \ar{r}{1_A} \ar{d}{1_A} & A \ar{d}{f}\\
		A \ar{r}{f} & B
	\end{tikzcd}
	\end{center}
	is a pullback.
\end{lemma}
\begin{proof}
	$f$ is monic $\iff$ any cone (g,h) over $(f, f)$ has $g=h$
	$\iff (g, h)$ factors uniquely through $(1_A, 1_A)$.
\end{proof}

Hence, provided $\mathcal{D}$ has pullbacks,
a morphism $\alpha: F \to G$ in $[\mathcal{C}, \mathcal{D}]$
is monic $\iff \alpha_A: FA \to GA$ is monic for each $A$.

\begin{theorem}
	If $G: \mathcal{D} \to \mathcal{C}$ has a left adjoint,
	then $G$ preserves all limits which exist in $\mathcal{D}$.
	\label{410}
\end{theorem}
\begin{proof}
	Suppose $\mathcal{C}$ and $\mathcal{D}$ both have limits of shape J and let $(F \dashv G)$.
	The diagram
	\begin{center}
		\begin{tikzcd}
			\mathcal{C} \ar{r}{F} \ar{d}{\triangle} & \mathcal{D} \ar{d}{\triangle} \\
			{[J, \mathcal{C}]} \ar{r}{{[J, F]}} & {[J, \mathcal{D}]}
		\end{tikzcd}
	\end{center}
	commutes and $[J, F]$ has a right adjoint $[J, G]$.
	So by 3.5 the diagram of right adjoints
	\begin{center}
		\begin{tikzcd}
			{[J, \mathcal{D}]} \ar{r}{{[J, G]}} \ar{d}{\lim_J} & {[J, \mathcal{C}]} \ar{d}{\lim_J} \\
			\mathcal{D} \ar{r}{G} & \mathcal{C}
		\end{tikzcd}
	\end{center}
	commutes up to isomorphism,
	i.e. $G$ preserves limits of shape $J$.
\end{proof}
\begin{proof}
	Let $D:J \to \mathcal{D}$ be a diagram with limit $(L, (\lambda_j \,|\, j \in \ob J))$.
	Given a cone $(A, (\mu_j: A \to GD(j) \,|\, j \in \ob J))$ in $\mathcal{C}$,
	we get a cone $(FA, (\bar{\mu_j} : FA \to D(j) \,|\, j \in \ob J))$ in $\mathcal{D}$,
	and hence a unique $\bar{\nu}:FA \to L$ such that $\lambda_j\bar{\nu} = \bar{\mu_j}$ for all $j$.
	
	Then $\nu: A \to GL$ is the unique morphism such that $(G\lambda_j)\nu = \mu_j \forall j$.
\end{proof}

The `primeval' Adjoint Functor Theorem says that if $\mathcal{D}$ has and $G: \mathcal{D} \to \mathcal{C}$ preserves all limits,
then $G$ has a left adjoint.

This depends on two ideas:
\begin{lemma}
	$\mathcal{C}$ has an initial object $\iff 1_\mathcal{C}: \mathcal{C} \to \mathcal{C}$ has a limit.
	\label{411}
\end{lemma}
\begin{proof}
	Suppose $\mathcal{C}$ has an initial object 0.
	The morphisms $(0 \to A \,|\, A \in \ob \mathcal{C})$ form a cone over $1_\mathcal{C}$.
	If we had another, say $(L, (\lambda_A \,|\, A \in \ob \mathcal{C}))$,
	then $\lambda_0: L \to 0$ would make
	\begin{center}
		\begin{tikzcd}[column sep=tiny]
			L \ar{rr}{\lambda_0} \ar{rd}{\lambda_A} && 0 \ar{ld} \\
			& A &
		\end{tikzcd}
	\end{center}
	commute for all $A$, and it's the only morphism which does.
	
	Conversely, suppose $(I, (\lambda_A: I \to A \,|\, A \in \ob \mathcal{C}))$ is a limit for $1_\mathcal{C}$.
	
	If $f: I \to A$, then
	\begin{center}
		\begin{tikzcd}[column sep=tiny]
			I \ar{rr}{\lambda_I} \ar{rd}{\lambda_A} && I \ar{ld}{f}\\
			& A &
		\end{tikzcd}
	\end{center}
	commutes. In particular, $\lambda_A \lambda_I = \lambda_A$ for all $A$,
	so $\lambda_I = 1_I$ since both are factorisations of the limit cone through itself.
	So $f = \lambda_A$, and hence $I$ is initial.
\end{proof}

\begin{lemma}
	Suppose $\mathcal{D}$ has and $G: \mathcal{D} \to \mathcal{C}$ preserves limits of shape $J$.
	Then, for each $A \in \ob \mathcal{C}$,
	$(A \downarrow G)$ has limits of shape $J$ and the forgetful functor $(A \downarrow G) \to \mathcal{D}$ creates them.
	\label{412}
\end{lemma}
\begin{proof}
	Suppose given $D: J \to (A \downarrow G)$.
	Write $D(j)$ as $(UD(j), f_j: A \to GUD(j))$ for each $j$.
	Let $(L, (\lambda_j \,|\, j \in \ob J))$ be a limit for $UD$,
	then $(GL, (G\lambda_j \,|\, j \in \ob J))$ is a limit for $GUD$.
	But the $f_j$ form a cone over $GUD$ with apex $A$,
	so there's a unique $h: A \to GL$ such that
	\begin{center}
		\begin{tikzcd}
			A \ar{r}{h} \ar{rd}{f_j} & GL \ar{d}{G\lambda_j} \\
			& GUD(j)
		\end{tikzcd}
	\end{center}
	commutes for all $j$.
	So there's a unique lifting of the cone over $D$ in $(A \downarrow G)$.
	
	Suppose we're given a cone $((B, g), (\mu_j \,|\, j \in \ob J))$ over $D$.
	Then
	\begin{center}
		\begin{tikzcd}
			A \ar{r}{g} \ar{rd}{h} & GB \ar{d}{G_k} \\
			& GL
		\end{tikzcd}
	\end{center}
	commutes since both ways round are factorisations of $(f_j \,|\, j \in \ob J)$ through the limit $GL$.
\end{proof}

Combining \ref{412} and \ref{411} with \ref{33},
we've proved the primeval Adjoint Functor Theorem.
However, this requries $\mathcal{D}$ to have limits for diagrams `as big as $\mathcal{D}$ itself',
and the only such categories are preorders (c.f. Q6, sheet 2).

In practice, the most we can hope for is that $\mathcal{D}$ has all small limits.
We call such a $\mathcal{D}$ \textbf{complete}.

\begin{theorem}[General Adjoint Functor Theorem]
	Suppose that $\mathcal{D}$ is complete and locally small.
	Then a functor $G: \mathcal{D} \to \mathcal{C}$ has a left adjoint if and only if
	it preserves all small limits and satisfies the `solution set condition':
	for any $A \in \ob \mathcal{C}$,
	there is a set $\{f_i: A \to GB_i \,|\, i \in I\}$ of objects of $(A \downarrow G)$
	such that any $h: A \to GC$ factors as
	\begin{center}
		\begin{tikzcd}
			A \ar{r}{f_i} & GB_i \ar{r}{Gg} & Gc
		\end{tikzcd}
	\end{center}
	for some $i \in I$ and $g: B_i \to C$.
	\label{413}
\end{theorem}
\begin{proof}
	If $G$ has a left adjoint,
	then it preserves small limits by \ref{410},
	and $\{\eta_A: A \to GFA \}$ is a singleton solution set at $A$.
	
	Conversely, each $(A \downarrow G)$ is complete by \ref{412},
	and locally small since it admits a faithful functor to $\mathcal{D}$.
	So we need to show:
	if $\mathcal{A}$ is complete and locally small,
	and has a weakly initial set of objects $\{S_i \,|\, i \in I\}$,
	then $\mathcal{A}$ has an initial object.
	
	First form $P = \prod_{i \in I} S_i$: then $P$ is weakly initial.
	
	Now form the limit
	\begin{tikzcd}I \ar{r}{a} & P\end{tikzcd}
	of the diagram
	\begin{tikzcd}P \ar[shift left]{r} \ar{r} \ar[shift right]{r} & P \end{tikzcd}
	whose edges are all morphism $P \to P$ in $\mathcal{A}$.
	
	Claim $I$ is initial:
	it's weakly initial since it admits a morphism to $P$.
	
	Suppose we had
	\begin{tikzcd}I \ar[shift left]{r}{f} \ar[shift right]{r}[below]{g} & A \end{tikzcd}.
	Let $b: E \to I$ be an equaliser for $(f, g)$:
	then there exists $c: P \to E$.
	
	Now
	\begin{tikzcd}P \ar{r}{c} & E \ar{r}{b} & I \ar{r}{a} & P\end{tikzcd}
	is an edge of the diagram whose limit is $I$,
	but so is $1_P$;
	so $abca = 1_Pa = a$.
	But $a$ is monic, so $bca = 1_I$.
	So $b$ is (split) epic,
	and $f=g$.
	So all the $(A \downarrow G)$ have initial objects,
	hence by \ref{33} $G$ has a left adjoint.
\end{proof}

The Special Adjoint Functor Theorem imposes additional conditions on $\mathcal{C}$ and $\mathcal{D}$
which ensure that every functor $\mathcal{D} \to \mathcal{C}$ preserving small limits has a left adjoint.

\begin{definition}
	\begin{enumerate}[label=\alph*.]
		\item A \textbf{subobject} of an object $A$ is a monomorphism $A' \rightarrowtail A$.
		We write $\Sub_\mathcal{C}(A)$ for the full subcategory of $\mathcal{C}/A$ whose objects are subobjects of $A$:
		note that this category is a preorder.
		\item We say $\mathcal{C}$ is \textbf{well-powered} if each $\Sub_\mathcal{C}(A)$ is equivalent to a small category,
		i.e. up to isomorphism each object has only a set of subobjects.
		
		Dually, $\mathcal{C}$ is \textbf{well-copowered} if $\mathcal{C}^{op}$ is well-powered.
	\end{enumerate}
\end{definition}

\begin{lemma}
	Suppose given a pullback
	\begin{center}
		\begin{tikzcd}
			P \ar{r}{k} \ar{d}{h} & A \ar[tail]{d}{f} \\
			B \ar{r}{g} & C
		\end{tikzcd}
	\end{center}
	with $f$ monic.
	Then $h$ is monic.
	\label{416}
\end{lemma}
\begin{proof}
	Suppose
	\begin{tikzcd}D \ar[shift left]{r}{x} \ar[shift right]{r}[below]{y} & P\end{tikzcd}
	satisfy $hx = hy$.
	Then $fkx = fky = ghx = ghy$ and $f$ is monic so $kx = ky$.
	
	Now $x=y$ since both are factorisations of the same cone through the pullback.
\end{proof}

\begin{theorem}[Special Adjoint Functor Theorem]
	Suppose both $\mathcal{C}$ and $\mathcal{D}$ are locally small,
	and $\mathcal{D}$ is complete, well-powered and has a separating set.
	Then $G: \mathcal{D} \to \mathcal{C}$ has a left adjoint $\iff$ $G$ preserves all small limits.
\end{theorem}
\begin{proof}
	The forward implication is \ref{410} again.
	
	Conversely, we first show that $(A \downarrow G)$ has the properties we've assumed for $\mathcal{D}$:
	it's complete by \ref{412}, and locally small as in \ref{413}.
	It's well-powered since subobjects of $(B, f)$ in $(A \downarrow G)$ are in bijection with subobjects $B' \rightarrowtail B$
	such that $f$ factors through $GB' \rightarrowtail GB$.
	
	It has a coseparating set:
	if $\{S_i \,|\, i \in I \}$ is a coseparating set for $\mathcal{D}$,
	then $\{(S_i, f) \,|\, i \in I,\, f:A \to GS_i \}$ is a coseperating set for $(A \downarrow G)$,
	since if
	\begin{tikzcd}{(B, f)} \ar[shift left]{r}{g} \ar[shift right]{r}[below]{g'} & {(B', f')}\end{tikzcd}
	satisfies $g \neq g'$,
	there exists $h: B' \to S_i$ for some $i$ with $hg \neq hg'$,
	and then $h$ is a morphism $(B', f') \to (S_i, (Gh)f')$ in $(A \downarrow G)$.
	
	Now we show that if $\mathcal{A}$ is complete, locally small and well-powered and has a coseperating set,
	then it has an initial object.
	
	First form $P=\prod_{i \in I}S_i$,
	where $\{ S_i \,|\, i \in I\}$ is a coseparating set.
	
	Consider the diagram
	\begin{center}
		\begin{tikzcd}[row sep=tiny]
			P' \ar[tail]{rd}& \\
			P'' \ar[tail]{r}& P\\
			\vdots &\\
			P^{(n)} \ar[tail]{ruu}&
		\end{tikzcd}
	\end{center}
	whose edges are a representative set of subobjects of $P$.
	
	Form its limit
	\begin{center}
		\begin{tikzcd}[row sep=tiny]
			& P' \\
			I \ar{ur} \ar{r} \ar{rdd} & P'' \\
			& \vdots \\
			& P^{(n)}
		\end{tikzcd}
	\end{center}
	by the argument of \ref{416} the legs $I \to P^{(-)}$ are monic,
	so $I \rightarrowtail P$ is monic and it's the least subobject of $P$.
	
	Hence in particular $I$ has no proper subobjects,
	so any two maps
	\begin{tikzcd}I \ar[shift left]{r}{f} \ar[shift right]{r}[below]{g} & A\end{tikzcd}
	must be equal, since their equaliser is an isomorphism.
	
	Now given $A \in \mathcal{A}$, form the product $Q = \prod_{i,f:A \to S_i}S_i$.
	The canonical morphism $h: A \to Q$ defined by $\pi_{i,f}h=f$ is monic since the $S_i$ form a coseparating set.
	
	We also have $k: P \to Q$ defined by $\pi_{i, f}k = \pi_i$,
	and we can form the pullback
	\begin{center}
		\begin{tikzcd}
			I \ar{r} \ar[tail]{rd} & B \ar{r}{m} \ar[tail]{d}{l} & A \ar[tail]{d}{h} \\
			& P \ar{r}{k} & Q
		\end{tikzcd}
	\end{center}
	
	By \ref{416} $l$ is monic and hence isomorphic to an edge of the diagram defining $I$,
	so $I \rightarrowtail P$ factors through it.
	So there exists a morphism $I \to A$, hence $I$ is initial.
\end{proof}

\section{Monads}
Suppose given an adjunction
\begin{tikzcd}\mathcal{C} \ar[shift left]{r}{F} & \mathcal{D} \ar[shift left]{l}{G}\end{tikzcd},
$F \dashv G$.
How much of this can we describe purely in terms of $\mathcal{C}$?

We have the composite $T=GF: \mathcal{C} \to \mathcal{C}$,
and the unit $\eta: 1_\mathcal{C} \to T$.
We also have $G\epsilon_F : GFGF \to GF$,
which we'll denote $\mu: TT \to T$.

These satisfy the commutative diagrams
\begin{center}
	\begin{tikzcd}[row sep=tiny, column sep=tiny]
		T \ar{rr}{T\eta} \ar{rrdd}{1_T} && TT \ar{dd}{\mu} && T \ar{ll}{\eta_T} \ar{lldd}{1_T} && \text{and} && TTT \ar{rr}{T\mu} \ar{dd}{\mu_T} && TT \ar{dd}{\mu} \\
		\circbox{1} &  &&  &\circbox{2}&&&&& \circbox{3}\\
		&& T && && && TT \ar{rr}{\mu} && T
	\end{tikzcd}
\end{center}
from the $\triangle^r$ identities and naturality of $\epsilon$.

\begin{definition}
	A \textbf{monad} $\mathbb{T}=(T, \eta, \mu)$ on a category $\mathcal{C}$ consists of
	a functor $T: \mathcal{C} \to \mathcal{C}$
	and natural transformations $\eta: 1_\mathcal{C} \to T$,
	$\mu: TT \to T$ satisfying the commutative diagrams \textnormal{\circbox{1}, \circbox{2} and \circbox{3}}.
\end{definition}

\begin{definition}
	Let $\mathbb{T}$ be a monad on $\mathcal{C}$.
	A \textbf{$\boldsymbol{\mathbb{T}}$-algebra} is a pair $(A, \alpha)$
	where $A \in \ob \mathcal{C}$,
	and $\alpha: TA \to A$ satisfies
	\begin{center}
		\begin{tikzcd}[row sep=tiny, column sep=tiny]
			A \ar{rr}{\eta_A} \ar{rrdd}{1_A} && TA \ar{dd}{\alpha} && \text{and} && TTA \ar{rr}{T\alpha} \ar{dd}{\mu_A} && TA \ar{dd}{\alpha} \\
			\textnormal{\circbox{4}} && && &&& \textnormal{\circbox{5}} \\
			&& A &&&& TA \ar{rr}{\alpha}&& A
		\end{tikzcd}
	\end{center}
	
	A \textbf{homomorphism} $f: (A, \alpha) \to (B, \beta)$ of $\mathbb{T}$-algebras is a morphism $f: A \to B$ such that
	\begin{center}
		\begin{tikzcd}[row sep=tiny, column sep=tiny]
			TA \ar{rr}{Tf} \ar{dd}{\alpha}&& TB \ar{dd}{\beta}\\
			& \textnormal{\circbox{6}} \\
			A \ar{rr}{f} && B
		\end{tikzcd}
	\end{center}
	commutes.
	We write $\mathcal{C}^\mathbb{T}$ for the category of $\mathbb{T}$-algebras.
\end{definition}

\begin{lemma}
	The forgetful functor $G: \mathcal{C}^\mathbb{T} \to \mathcal{C}$ has a left adjoint $F$,
	and the adjunction $(F \dashv G)$ induces the monad $\mathbb{T}$.
\end{lemma}
\begin{proof}
	We define $FA = (TA, \mu_A)$ (which is an algebra by \circbox{2} and \circbox{3}),
	and $F(A \overset{f}{\to} B) = Tf$ (which is a homomorphism by naturality of $\mu$).
	
	Clearly $GF = T$ and $\eta: 1_\mathcal{C} \to GF$.
	
	We define $\epsilon: FG \to 1_{\mathcal{C}^\mathbb{T}}$ by
	$\epsilon_{(A, \alpha)} = \alpha: (TA, \mu_A) \to (A, \alpha)$
	(which is a homomorphism by \circbox{5}).
	
	The triangular identities for $\eta$ and $\epsilon$ follow from \circbox{4} and \circbox{1},
	so $(F \dashv G)$.
	
	Finally, $G_{\epsilon_{FA}} = \mu_A$ by the definitions of $FA$ and $\epsilon$,
	so the adjunction incudes $\mathbb{T}$.
\end{proof}

Note that if
\begin{tikzcd} \mathcal{C} \ar[shift left]{r}{F} & \mathcal{D} \ar[shift left]{l}{G} \end{tikzcd}
induces $\mathbb{T}$,
then so does
\begin{tikzcd} \mathcal{C} \ar[shift left]{r}{F} & \mathcal{D}' \ar[shift left]{l}{G/\mathcal{D}'} \end{tikzcd}
where $\mathcal{D}'$ is the full subcategory of objects of the form $FA$.
So in seeking to construct $\mathcal{D}$, we may require $F$ to be bijective on objects.
But then morphisms $FA \to FB$ in $\mathcal{D}$ correspond bijectively to morphisms $A \to GFB = TB$ in $\mathcal{C}$.

\begin{definition}
	Given a monad $\mathbb{T}$ on $\mathcal{C}$,
	the \textbf{Kleisi category} $\mathcal{C}_\mathbb{T}$ is defined by:
	$\ob \mathcal{C}_\mathbb{T} = \ob\mathcal{C}$,
	morphisms $A \textcolor{red}{\to} B$ in $\mathcal{C}_\mathbb{T}$ are morphisms $A \to TB$ in $\mathcal{C}$,
	the identity $A \textcolor{red}{\to} A$ is $A \overset{\eta_A}{\to} TA$,
	and the composite of $A \textcolor{red}{\overset{f}{\to}} B \textcolor{red}{\overset{g}{\to}} C$ is 
	$A \overset{f}{\to} TB \overset{Tg}{\to} TTC \overset{\mu_C}{\to} C$.
	
	We check
	\begin{align*}
	A \textcolor{red}{\overset{1_A}{\to}} A \textcolor{red}{\overset{f}{\to}} B &= A \overset{\eta_A}{\to} TA \overset{Tf}{\to} TTB \overset{\mu_B}{\to} B \\
	&= A \overset{f}{\to} TA \overset{\eta_{TB}}{\to} TTB \overset{\mu_B}{\to} B \\
	&= \textcolor{red}{f} \text{ by \textnormal{\circbox{2}}}
	\end{align*}
	\begin{align*}
	A \textcolor{red}{\overset{f}{\to}} B \textcolor{red}{\overset{1_B}{\to}} B &= A \overset{f}{\to} TB \overset{T_{\eta_B}}{\to} TTB \overset{\mu_B}{\to} B \\
	&= \textcolor{red}{f} \text{ by \textnormal{\circbox{1}}}
	\end{align*}

	Given $A\textcolor{red}{\overset{f}{\to}} B \textcolor{red}{\overset{g}{\to}} C \textcolor{red}{\overset{h}{\to}} D$,
	\begin{align*}
		\textcolor{red}{(hg)f} &= A \overset{f}{\to} TB \overset{Tg}{\to} TTC \overset{TTh}{\to} TTTD \overset{T\mu_D}{\to} TTD \overset{\mu_D}{\to} TD \\
		&= A \overset{f}{\to} TB \overset{Tg}{\to} TTC \overset{TTh}{\to} TTTD \overset{\mu_{TD}}{\to} TTD \overset{\mu_D}{\to} TD \text{ by \textnormal{\circbox{3}}} \\
		&= A \overset{f}{\to} TB \overset{Tg}{\to} TTC \overset{\mu_C}{\to} TC \overset{T_h}{\to} TTD \overset{\mu_D}{\to} TD \\
		&= \textcolor{red}{h(gf)}
	\end{align*}
\end{definition}

\begin{lemma}
	There exists an adjunction
	\begin{tikzcd}\mathcal{C} \ar[shift left]{r}{F} & \mathcal{C}_\mathbb{T} \ar[shift left]{l}{G}\end{tikzcd}
	inducing $\mathbb{T}$.
\end{lemma}
\begin{proof}
	We define $FA=A$ and $F(A \textcolor{red}{\overset{f}{\to}} B) = A \overset{f}{\to} B \overset{\eta_B}{\to} TB$.
	This clearly preserves identities, and
	\begin{align*}
		\textcolor{red}{(Fg)(Ff)} &= A \overset{f}{\to} B \overset{\eta_B}{\to} TB \overset{Tg}{\to} TC \overset{T\eta_C}{\to} TTC \overset{\mu_C}{\to} TC \\
		&= A \overset{f}{\to} B \overset{g}{\to} C \overset{\eta_C}{\to} TC \text{ by \circbox{1} and naturality of } \eta \\
		&= \textcolor{red}{F(gf)}
	\end{align*}
	
	We define $GA = TA$ and $G(A\textcolor{red}{\overset{f}{\to}} B) = TA \overset{Tf}{\to} TTB \overset{\mu_B}{\to} TB$.
	G preserves identities by \circbox{1} and
	\begin{align*}
		G(A \textcolor{red}{\overset{f}{\to}} B \textcolor{red}{\overset{g}{\to}} C) &= TA \overset{Tf}{\to} TTB \overset{TTg}{\to} TTTC \overset{T\mu_C}{\to} TTC \overset{\mu_C}{\to} TC \\
		&= TA \overset{Tf}{\to} TTB \overset{TTg}{\to} TTTC \overset{\mu_{TC}}{\to} TTC \overset{\mu_C}{\to} TC \text{ by \circbox{3}} \\
		&= TA \overset{Tf}{\to} TTB \overset{\mu_B}{\to} TB \overset{Tg}{\to} TTC \overset{\mu_C}{\to} TC \text{ by naturality of } \mu \\
		&= (Gg)(Gf)
	\end{align*}
	
	Clearly $GFA = TA$ and
	\begin{align*}
	GF(A \overset{f}{\to} B) &= TA \overset{Tf}{\to} TB \overset{T\eta_B}{\to} TTB \overset{\mu_B}{\to} T B \\
	&= Tf \text{ by \circbox{1}}
	\end{align*}
	so $GF = T$ and $\eta: 1_\mathcal{C} \to GF$.
	
	We define $FGA \textcolor{red}{\overset{\epsilon_A}{\to}} A$ to be $TA \overset{\eta_{TA}}{\to} TA$.
	To verify naturality of $\textcolor{red}{\epsilon}$, consider
	\begin{center}
		\begin{tikzcd}
			FGA \ar[color=red]{r}{FGf} \ar[color=red]{d}{\epsilon_A} & FGB \ar[color=red]{d}{\epsilon_B} \\
			A \ar[color=red]{r}{f} & B
		\end{tikzcd}
	\end{center}
	The top and right edges yield
	$$TA \overset{Tf}{\to} TTB \overset{\mu_B}{\to} TB \overset{\eta_{TB}}{\to} TTB \overset{1_{TTB}}{\to} TTB \overset{\mu_B}{\to} TB$$
	and the left and bottom yield
	$$TA \overset{1_{TA}}{\to} TA \overset{Tf}{\to} TTB \overset{\mu_B}{\to} TB$$
	
	For the $\triangle^r$ identities,
	$$GA \overset{\eta_{GA}}{\to} GFGA \overset{G\epsilon_A}{\to} GA = TA \overset{\eta_{TA}}{\to} TTA \overset{1_{TTA}}{\to} TTA \overset{\mu_A}{\to} TA = 1_{TA}$$
	and
	\begin{align*}
		FA \overset{F\eta_A}{\to} FGFA \overset{\epsilon_{FA}}{\to} FA &= A \overset{\eta_A}{\to} TA \overset{\eta_{TA}}{\to} TTA \overset{1_{TTA}}{\to} TTA \overset{\mu_A}{\to} TA \\
		&= A \overset{\eta_A}{\to} TA\ (= FA \overset{1_{FA}}{\to} FA)
	\end{align*}
	
	Finally, $G\epsilon_{FA} = TTA \overset{1_{TTA}}{\to} TTA \overset{\mu_A}{\to} TA = \mu_A$,
	so the adjunction induces the monad $\mathbb{T}$.
\end{proof}

\begin{theorem}
	Given a monad $\mathbb{T}$ on $\mathcal{C}$,
	let $\Adj(\mathbb{T})$ be the category whose objects are adjunctions $\mathcal{C}\underset{G}{\overset{F}{\rightleftarrows}} \mathcal{D}$ inducing $\mathbb{T}$,
	and whose morphisms $(\mathcal{C}\underset{G}{\overset{F}{\rightleftarrows}} \mathcal{D}) \to (\mathcal{C}\underset{G'}{\overset{F'}{\rightleftarrows}} \mathcal{D}')$
	are functors $K: \mathcal{D} \to \mathcal{D}'$ satisfying $KF=F'$ and $G'K=G$.
	
	Then the Kleisi category $\mathcal{C}_\mathbb{T}$ is initial in $\Adj(\mathbb{T})$,
	and the Eilenberg-Moore category $\mathcal{C}^\mathbb{T}$ is terminal.
\end{theorem}
\begin{proof}
	Given $(\mathcal{C}\underset{G}{\overset{F}{\rightleftarrows}} \mathcal{D})$ in $\Adj(\mathbb{T})$,
	we define the \textbf{Eilenberg-Moore comparison functor} $K: \mathcal{D} \to \mathcal{C}^\mathbb{T}$
	by $KB=(GB, G\epsilon_B)$
	(note that $G\epsilon_B$ is an algebra structure on $GB$:
	the unit condition \circbox{4} follows from a $\triangle^r$ identity,
	and \circbox{5} follows from the naturality of $\epsilon$).
	
	$K(B \overset{g}{\to} B') = Gg: (GB, G\epsilon_B) \to (GB', G\epsilon_{B'})$
	(a homomorphism since $\epsilon$ is natural).
	
	It's clear that $K$ is a functor,
	that $G^\mathbb{T}K=G$ and that $KFA = (GFA, G\epsilon_{FA}) = (TA, \mu_A) = F^\mathbb{T}A$ and $KF(A \overset{f}{\to} B) = Tf = F^\mathbb{T}f$.
	
	Uniqueness: suppose $\bar{K}$ also satisfies $G^\mathbb{T}\bar{K} = G$ and $\bar{K}F = F^\mathbb{T}$.
	Then $\bar{K}B$ is of the form $(GB, \beta_B)$ for some algebra structure $\beta_B$,
	and that $\beta_{FA} = \mu_A = G\epsilon_{FA}$ for all $A$.
	
	Given any $B$, consider the diagram
	\begin{center}
		\begin{tikzcd}
			GFGFGB \ar{r}{GFG\epsilon_B} \ar{d}{\mu_{GB}} & GFGB \ar{d}{\beta_B}\\
			GFGB \ar{r}{G\epsilon_B} & GB
		\end{tikzcd}
	\end{center}
	which must commute, since $G\epsilon_B$ is an algebra homomorphism.
	But it would also commute with $G\epsilon_B$ in place of $\beta_B$,
	and $GFG\epsilon_B$ is (split) epic,
	so $\beta_B = G\epsilon_B$.
	
	For the \textbf{Kleisi comparison functor} $K: \mathcal{C}_\mathbb{T} \to \mathcal{D}$,
	we define $KA=FA$,
	$K(A \textcolor{red}{\overset{f}{\to}} B) = FA \overset{Ff}{\to} FGFB \overset{\epsilon_{FB}}{\to} FB$.
	
	To verify this is functorial, consider
	\begin{align*}
		K(A \textcolor{red}{\overset{f}{\to}} B \textcolor{red}{\overset{g}{\to}} C) &=
			FA \overset{Ff}{\to} FGFB \overset{FGFg}{\to} FGFGFC \overset{FG\epsilon_{FC}}{\to} FGFC \overset{\epsilon_{FC}}{\to} FC \\
			&= FA \overset{Ff}{\to} FGFB \overset{FGFg}{\to} FGFGFC \overset{\epsilon_{FGFC}}{\to} FGFC \overset{\epsilon_{FC}}{\to} FC \\
			&= FA \overset{Ff}{\to} FGFB \overset{\epsilon_{FB}}{\to} FB \overset{Fg}{\to} FGFC \overset{\epsilon_{FC}}{\to} FC \\
			&= (K\textcolor{red}{g})(K\textcolor{red}{f})
	\end{align*}
	
	$GKA = GFA = TA = G_\mathbb{T}A$
	
	$GK(A \textcolor{red}{\overset{f}{\to}} B) = TA \overset{Tf}{\to} TTB \overset{\mu_B}{\to} TB = G_\mathbb{T}(\textcolor{red}{f})$
	
	And $KF_\mathbb{T}A = FA$,
	
	$KF_\mathbb{T}(A \overset{f}{\to} B) = \begin{tikzcd} FA \ar{r}{Ff} & FB \ar{r}{F\eta_B} \ar{rd}{1_{FB}} & FGFB \ar{d}{\epsilon_{FB}} \\ && FB\end{tikzcd}$
	
	So $K$ is a morphism of $\Adj(\mathbb{T})$.
	
	Uniqueness: suppose $\bar{K}$ is any other morphism $\mathcal{C}_\mathbb{T} \to \mathcal{D}$ in $\Adj(\mathbb{T})$.
	Then $\bar{K}A = FA = KA$ for all $A$;
	since $\bar{K}$ commutes with both the $F$s and the $G$s,
	we have $\bar{K}(\epsilon_A) = \epsilon_{FA}$.
	
	We can write $A \textcolor{red}{\overset{f}{\to}} B$ as
	$A \textcolor{red}{\overset{F_\mathbb{T}f}{\to}} F_\mathbb{T}G_\mathbb{T} \textcolor{red}{\overset{\epsilon_B}{\to}} B$,
	so $\bar{K}(\textcolor{red}{f}) = \bar{K}(\textcolor{red}{\epsilon_B})Ff=K(\textcolor{red}{f})$.
\end{proof}

The Kleisi category $\mathcal{C}_\mathbb{T}$ inherits coproducts from $\mathcal{C}$ if $\mathcal{C}$ has them,
but it has few other limits or colimits in general.

\begin{theorem}
	\begin{enumerate}[label=\roman*.]
		\item The forgetful functor $G: \mathcal{C}^\mathbb{T} \to \mathcal{C}$ creates all limits which exist in $\mathcal{C}$.
		\item If $T: \mathcal{C} \to \mathcal{C}$ preserves colimits of shape $J$,
		then $G: \mathcal{C}^\mathbb{T} \to \mathcal{C}$ creates them.
	\end{enumerate}
	\label{58}
\end{theorem}
\begin{proof}
	\begin{enumerate}[label=\roman*.]
		\item 
		Let $D: J \to \mathcal{C}^\mathbb{T}$ be a diagram,
		write $D(j) = (GD(j), \delta_j)$.
		
		Let $(L, (\lambda_j : L \to GD(j)))$ be a limit for $GD$.
		The composites $TL \overset{T\lambda_j}{\to} TGD(j) \overset{\delta_j}{\to} GD(j)$
		form a cone over $GD$,
		since the edges of $GD$ are algebra homomorphisms.
		
		So they induce a unique $l: TL \to L$ such taht
		\begin{center}
			\begin{tikzcd}
				TL \ar{r}{T\lambda_j} \ar{d}{l} & TGD(j) \ar{d}{\delta_j} \\
				L \ar{r}{\lambda_j}& GD(j)
			\end{tikzcd}
		\end{center}
		commutes for each $j$.
		
		$l$ is an algebra structure:
		$l\eta_L = l_L$ since both are factorisations of $(\lambda_j)$ through itself,
		and $lTl = l\mu_L$ since they're factorisations of the same cone through $L$.
		
		So $((L,l), (\lambda_j))$ is the unique lifting of $(L, (\lambda_j))$ to a cone over $D$ in $\mathcal{C}^\mathbb{T}$.
		
		Any cone over $D$ in $\mathcal{C}^\mathbb{T}$ factors uniquely through $L$,
		and the factorisation is an algebra homomorphism.
		
		\item
		Similarly, given $D:J \to \mathcal{C}^\mathbb{T}$ as before and a colimit $(L, (\lambda_j: GD(j) \to L))$ for $GD$,
		we get a unique $l: TL \to L$ making
		\begin{center}
			\begin{tikzcd}
				TGD(j) \ar{r}{T\lambda_j} \ar{d}{\delta_j} & TL \ar{d}{l} \\
				GD(j) \ar{r}{\lambda_j} & L
			\end{tikzcd}
		\end{center}
		commute, since $(TL, (T\lambda_j))$ is a colimit.
		The rest of the proof is similar to (i).
	\end{enumerate}
\end{proof}

\begin{definition}
	An adjunction $(\mathcal{C} \overset{F}{\underset{G}{\rightleftarrows}} \mathcal{D})$, $(F \dashv G)$,
	is \textbf{monadic} if the comparison functor 
	$K: \mathcal{D} \to \mathcal{C}^\mathbb{T}$
	is part of an equivalence,
	where $\mathbb{T}$ is the monad induced by $(F \dashv G)$.
	We also say $G: \mathcal{D} \to \mathcal{C}$ is monadic if it has a left adjoint and the adjunction is monadic.
\end{definition}

Note that $K$ preserves all limits which exist in $\mathcal{D}$,
since $G$ preserves them and $G^\mathbb{T}$ creates them.

\begin{lemma}
	Suppose given $(\mathcal{C} \overset{F}{\underset{G}{\rightleftarrows}} \mathcal{D})$, $(F \dashv G)$
	inducing a monad $\mathbb{T}$ on $\mathcal{C}$.
	Suppose, for each $\mathbb{T}$-algebra $(A, \alpha)$, the pair
	$FGFA \overset{F\alpha}{\underset{\epsilon_{FA}}{\rightrightarrows}} FA$
	has a coequaliser in $\mathcal{D}$.
	Then $K: \mathcal{D} \to \mathcal{C}^\mathbb{T}$ has a left adjoint $L$.
	\label{510}
\end{lemma}
\begin{proof}
	We define $L(A, \alpha) = \coeq(FGFA \parallelpair{F\alpha}{\epsilon_{FA}} FA)$.
	
	Given $(A, \alpha) \overset{f}{\to} (B, \beta)$, we get
	\begin{center}
		\begin{tikzcd}
			FGFA \ar{d}{FGFf} \ar[shift left]{r}{F\alpha} \ar[shift right]{r}[below]{\epsilon_{FA}}& FA \ar{r} \ar{d}{Ff} & L(A, \alpha) \ar[dashrightarrow]{d}{Lf}\\
			FGFB \ar[shift left]{r}{F\beta} \ar[shift right]{r}[below]{\epsilon_{FB}} & FB \ar{r}& L(B, \beta)
		\end{tikzcd}
	\end{center}
	So $\exists! Lf$ making the right hand square commute.
	Uniqueness ensures $L$ is functorial.
	
	Morphisms $L(A, \alpha) \to B$ in $\mathcal{D}$ correspond bijectively to morphisms
	$f: FA \to B$ such that $f(F\alpha) = f(\epsilon_{FA})$ and hence to morphisms
	$\bar{f}:A \to GB$ such that $f\bar{\alpha} = Gf|_{GFA} = G\epsilon_B \circ GF\bar{f}$,
	i.e. to algebra homomorphisms $(A, \alpha) \to (GB, G\epsilon_B) = KB$.
	
	So $(L \dashv K)$.
\end{proof}

\begin{definition}
	\begin{enumerate}[label=\alph*.]
		\item A parallel pair $A \overset{f}{\underset{g}{\rightrightarrows}} B$ is \textbf{reflexive}
		if $\exists r: B \to A$ such that $fr = gr = 1_B$.
		
		Note that $FGFA \parallelpair{F\alpha}{\epsilon_{FA}} FA$ is reflexive,
		with common splitting $FA \overset{F\eta_A}{\to} FGFA$.
		
		A \textbf{reflexive coequaliser} is the coequaliser of a reflexive pair.
		
		\item A \textbf{split coequaliser diagram} is a diagram
		\begin{center}
			\begin{tikzcd}
				A \ar[shift left]{r}{f} \ar[shift right]{r}[below]{g} & B \ar{r}{h} \ar[bend left=50]{l}{t} & C \ar[bend left=30]{l}{s}
			\end{tikzcd}
		\end{center}
		satisfying $hf=hg$, $hs=1_C$, $gt = 1_B$ and $ft = sh$.
		
		If these equations hold, $h$ \textbf{is} a coequaliser of $f$ and $g$:
		given $k: B \to D$ with $kf = kg$, we have $k=kgt=kft=ksh$,
		so $k$ factors through $h$, uniquely since $h$ is split epic.
		
		Note that \textbf{any} functor preserves split equalisers.
		
		\item Given $G: \mathcal{D} \to \mathcal{C}$,
		a pair $A \parallelpair{f}{g} B$ in $\mathcal{D}$ is \textbf{G-split}
		if there exists a split coequaliser
		\begin{center}
			\begin{tikzcd}
				GA \ar[shift left]{r}{Gf} \ar[shift right]{r}[below]{Gg} & GB \ar{r} \ar[bend left=50]{l}{t} & C \ar[bend left=30]{l}{s}
			\end{tikzcd}
		\end{center}
		in $\mathcal{C}$.
	\end{enumerate}
\end{definition}

The pair $FGFA \overset{F\alpha}{\underset{\epsilon_{FA}}{\rightrightarrows}} FA$ of \ref{510} is $G$-split:
\begin{center}
	\begin{tikzcd}
		GFGFA \ar[shift left]{r}{Gf\alpha} \ar[shift right]{r}[below]{G\epsilon_{FA}} & GFA \ar{r}{\alpha} \ar[bend left=50]{l}{\eta_{GFA}} & A \ar[bend left=30]{l}{\eta_A}
	\end{tikzcd}
\end{center}
is a split coequaliser diagram.

\begin{theorem}[Precise Monadicity Theorem]
	$G: \mathcal{D} \to \mathcal{C}$ is monadic $\iff$ $G$ has a left adjoint, and c reates coequalisers of $G$-split pairs.
	\label{512}
\end{theorem}

\begin{theorem}[Crude Monadicity Theorem]
	Suppose $G: \mathcal{C} \to \mathcal{C}$ has a left adjoint,
	that $\mathcal{D}$ has and $G$ preserves reflexive coequalisers,
	and $G$ reflects isomorphisms.
	Then $G$ is monadic.
	\label{513}
\end{theorem}

\begin{proof}
	For the forward implication in \ref{512},
	it's enough to show that $G^\mathbb{T}: \mathcal{C}^\mathbb{T} \to \mathcal{C}$ creates coequalisers of $G^\mathbb{T}$-split pairs.
	This follows from \ref{58},
	given that $T$ and $TT$ both preserve split coequalisers.
	
	Conversely in either case, $K: \mathcal{D} \to \mathcal{C}^\mathbb{T}$ has a left adjoint $L$ by \ref{510}.
	Now $LKB = \coeq(FGFGB \parallelpair{FG\epsilon_B}{\epsilon_{FGB}} FGB)$
	and the counit $LKB \to B$ is the factorisation of $FGB \overset{\epsilon_{FGB}}{\underset{\epsilon_B}{\rightrightarrows}} B$ through this coequaliser.
	
	But
	\begin{tikzcd}GFGFGB \ar[shift left]{r} \ar[shift right]{r}& GFGB \ar{r} \ar[bend left=30]{l}{\eta_{GFGB}} & GB \ar[bend left=30]{l}{\eta_{GB}}\end{tikzcd}
	is a split coequaliser diagram.
	
	So either set of hypotheses ensures that $LKB \to B$ is an isomorphism.
	
	$KL(A, \alpha) = K(\coeq(FGFA \parallelpair{F\alpha}{\epsilon_{FA}} FA))$.
	Either hypothesis implies that $G=G^\mathbb{T}K$ preserves this coequaliser, but
	\begin{center}
		\begin{tikzcd}
			GFGFGA \ar[shift left]{r}{GF\alpha} \ar[shift right]{r}[below]{G\epsilon_{FA}} & GFA \ar{r}{\alpha} \ar[bend left=50]{l}{\eta_{GFA}} & A \ar[bend left=30]{l}{\eta_{A}}
		\end{tikzcd}
	\end{center}
	is a split coequaliser, so $GL(A, \alpha) \cong A$.
	
	The unit $(A, \alpha) \to KL(A, \alpha)$ is mapped to this isomorphism by $G^\mathbb{T}$,
	so it's an isomorphism in $\mathcal{C}^\mathbb{T}$.
\end{proof}

\begin{remark}
	Let $\mathcal{C} \rightleft{F}{G} \mathcal{D}$ be an adjunction,
	and suppose $\mathcal{D}$ has reflexive coequalisers.
	The \textbf{monadic tower} of $(F \dashv G)$ is the diagram
	\begin{center}
		\begin{tikzcd}[column sep=small, row sep=tiny]
			&&&& \textcolor{white}{a}\\
		&&& (\mathcal{C}^\mathbb{T})^\mathbb{S} \ar[shift left]{ddl} \ar[shift left]{dlll} \ar[dotted, no head]{ur}\\
		\mathcal{D} \ar[shift left]{ddr}{G} \ar[shift left]{drr}{K} \ar[shift left]{urrr}\\
		&& \mathcal{C}^\mathbb{T} \ar[shift left]{dl}{G^\mathbb{T}} \ar[shift left]{uur} \ar[shift left]{ull}{L}\\[20pt]
		& \mathcal{C} \ar[shift left]{ur}{F^\mathbb{T}} \ar[shift left]{uul}{F}
		\end{tikzcd}
	\end{center}
	where $\mathbb{T}$ is the monad induced by $(F \dashv T)$, 
	$K$ is the Eilenberg-Moore comparison functor,
	$(L \dashv K)$ (\ref{510}),
	$\mathbb{S}$ is the monad induced by $(L \dashv K)$, etc.
	
	We say $(F \dashv G)$ has \textbf{monadic length} $n$ if we reach an equivalence after $n$ steps.
	$\text{\textbf{Top}} \to \Set$ has monadic length $\infty$.
\end{remark}
\end{document}