\documentclass[a4paper]{article}
\title{Part III Combinatorics}
\author{Based on lectures by Prof B. Bollob\'{a}s}
\date{Michaelmas 2016\\University of Cambridge}
\usepackage{mathtools}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{textcomp}
\usepackage{enumitem}
\usepackage{graphicx}
\usepackage{tikz-cd}
\usepackage{enumitem}
\theoremstyle{definition}
\newtheorem*{definition}{Definition}
\theoremstyle{remark}
\newtheorem*{remark}{Remark}
\theoremstyle{default}
\newtheorem*{conjecture}{Conjecture}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{prop}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\renewcommand{\baselinestretch}{1.3}
\newcommand*\conj[1]{\overline{#1}}
\newcommand*\dom[1]{\textnormal{dom}\,#1}
\newcommand*\cod[1]{\textnormal{cod}\,#1}
\newcommand*\ob[1]{\textnormal{ob}\,#1}
\newcommand*\mor[1]{\textnormal{mor}\,#1}
\newcommand*\abs[1]{\left|#1\right|}
\newcommand*\norm[1]{\abs{\abs{#1}}}
\begin{document}
\maketitle
\tableofcontents
\newpage
\section{Introduction}
Let $X, Y, \dots$ be sets
\begin{definition}
	We call $\mathcal{A}\subset \mathcal{P}(X)$ a \textbf{set system} or \textbf{family of sets}.
	$\mathcal{A}$ is naturally identified with a bipartite graph $G_\mathcal{A}(U,W)$ with $U=\mathcal{A}$, $W=\bigcup_{A\in\mathcal{A}}A$ or $W=X$.
	Indeed, $Ax\in E(G_\mathcal{A}) \iff x \in A$.
\end{definition}

\begin{definition}
	Given $\mathcal{A}\in\mathcal{P}(X)$, a \textbf{set of distinct representatives} (SDR) is an injection $f:\mathcal{A}\to X$ s.t. $f(A)\in A$ $\forall A \in \mathcal{A}$.
	In its bipartite graph, an SDR corresponds to a complete matching $U \to W$.
\end{definition}

\begin{theorem}[Hall, 1935]
	A set system $\mathcal{A}$ has an SDR if $\forall \mathcal{A}'\subset\mathcal{A}$, $\abs{\cup_{A\in\mathcal{A}'}A} \geq \abs{\mathcal{A}}'$.
\end{theorem}
\setcounter{theorem}{0}
\renewcommand{\thetheorem}{\arabic{theorem}'}
\begin{theorem}
	A bipartite graph $G(U,W)$ has a complete matching $U \to W$ if $\forall S \subset U$, $\abs{\Gamma(S)} \geq \abs{S}$
\end{theorem}
\renewcommand{\thetheorem}{\arabic{theorem}}
\begin{corollary}
	Suppose $G(U, W)$ bipartite, $d(u) \geq d(w)$ $\forall u \in U,\ w \in W$. Then $\exists$ a complete matching $U \to W$.
\end{corollary}

\begin{definition}
	A bipartite graph $G(U,W)$ is $(r,s)$\textbf{-regular} if $d(u)=r$ and $d(w)=s$ $\forall u\in U$, $w \in W$.
\end{definition}

Instant from Cor 2: if $G(U,W)$ is $(r,s)$-regular then $\exists$ a complete matching from $U$ to $W$ if $\abs{U} \leq \abs{W}$.

\begin{corollary}
	Let $0 \leq i,j \leq n$, ${n \choose i} \leq {n \choose j}$. Then $\exists$ a complete matching $f: [n]^{(i)} \to [n]^{(j)}$ s.t. $f(A) \subset A$ if $j \leq i$, and $f(A) \supset A$ if $i \leq j$.
\end{corollary}

\begin{theorem}
	Let $G=G(U,W)$ be a connected $(r,s)$-regular graph. Then for $\emptyset \neq A \subset U$,
	$$\frac{\abs{\Gamma(A)}}{\abs{W}} \geq \frac{\abs{A}}{\abs{U}}$$
	Also, equality holds iff $A=U$.
\end{theorem}

The \textbf{cube} $Q^n \cong \mathcal{P}(n) \cong [2]^n =$ set of all 0, 1 sequences of length $n$. $Q^n$ is also a graph: $AB$ is an edge if $\abs{A \vartriangle B}=1$. It is also a poset: $A<B$ if $A \subset B$.

$Q^n$ has a natural orientation: $\overrightarrow{AB}$ if $A=B \cup \{a\}$.

\begin{center}
	\begin{tikzcd}
		& 123 \arrow[ld] \arrow[d] \arrow[rd]& \\
		12 \arrow[d] \arrow[rd] & 13 \arrow[ld] \arrow[rd] & 23 \arrow[ld] \arrow[d] \\
		1 \arrow[rd] & 2 \arrow[d] & 3 \arrow[ld] \\
		& \emptyset &
	\end{tikzcd}
\end{center}

The order on $Q^n \cong \mathcal{P}(n)$ is induced by this oriented graph.
\section{Sperner Systems}
\setcounter{theorem}{0}
\begin{definition}
	A set system $\mathcal{A} \subset \mathcal{P}(n)$ is \textbf{Sperner} if $A,B \in \mathcal{A}$, $A \neq B \implies A \not\subset B$
\end{definition}
\begin{theorem}[Sperner, 1928]
	If $\mathcal{A} \subset \mathcal{P}(n)$ is Sperner then $$\abs{\mathcal{A}} \leq {n \choose \lfloor\frac{n}{2}\rfloor}$$
\end{theorem}
\begin{definition}
	The \textbf{weight} $w(A)$ of a set $A \in \mathcal{P}(n)$ is $w(A) = \frac{1}{{n \choose \abs{A}}}$
\end{definition}
\begin{theorem}
	Let $\mathcal{A}$ be a Sperner system on $X$, $\abs{X}=n$. Then $$w(\mathcal{A}) = \sum_{A \in \mathcal{A}}w(A) \leq 1$$
\end{theorem}

\begin{corollary}
	If $\mathcal{A} \in \mathcal{P}(n)$ is a Sperner system then $\abs{\mathcal{A}} \leq {n \choose {\lfloor \frac{n}{2} \rfloor}}$, with equality $\iff \mathcal{A}$ is $X^{\lfloor n/2 \rfloor}$ or $X^{\lceil n/2 \rceil}$.
\end{corollary}

\begin{definition}
	$\mathcal{A} \in \mathcal{P}(n)$ is \textbf{k-Sperner} if it does not contain $$A_1 \subsetneq A_2 \subsetneq \dots \subsetneq A_{k+1}$$
\end{definition}

Note that Sperner = 1-Sperner.

\begin{corollary}[Erd\H{o}s, 1945]
If $\mathcal{A} \subset \mathcal{P}(n)$ is $k$-Sperner then $\abs{\mathcal{A}}$ is at most the sum of the $k$ largest binomial coefficients.	
\end{corollary}

\begin{theorem}[Erd\H{o}s, 1945]
	Let $x_1, \dots, x_n \in \mathbb{R}$, $x_i \geq 1$.
	Then the number of sums $\sum_1^n \pm x_i$ in an open interval $J$ of length $2k$ is at most the sum of the $k$ largest binomial coefficients.
\end{theorem}

\begin{definition}
	A chain $A_o \subset A_1 \subset \dots \subset A_k$ is \textbf{symmetric} if $\abs{A_{i+1}} = \abs{A_i} + 1\ \forall i$ and $\abs{A_o} + \abs{A_k} = n$.
\end{definition}

\begin{theorem}[Kleitman and Katona]
	$\mathcal{P}(n)$ has a decomposition into symmetric chains.
\end{theorem}

Take such a partition $\mathcal{P}(n) = \bigcup_{i=1}^k \mathcal{C}_i$, $j = {n \choose {\lfloor\frac{n}{2}\rfloor}}$.
There is one chain of length $n+1$, $n-1$ chains of length $n-1$, etc:
there are ${n \choose i} - {n \choose {i-1}}$ chains of length $n+1-2i$.

Let $E$ be a normed space, let $x_1, \dots, x_n \in E$, $\norm{x_i} \geq 1 \ \forall i$, for $A \in \mathcal{P}(n)$ let $x_A = \sum{i \in A} x_i$.
\begin{conjecture}[Erd\H{o}s, 1945]
	If $\mathcal{A} \in \mathcal{P}(n)$ s.t. $\norm{x_A - x_B} < 1$ then $\abs{\mathcal{A}} \leq {n \choose {\lfloor\frac{n}{2}\rfloor}}$
\end{conjecture}

\begin{definition}
	Call $\mathcal{D} \in \mathcal{P}(n)$ \textbf{scattered} if $\norm{x_A - x_B} \geq 1 \ \forall A,B \in \mathcal{D}$.
	Call a partition $\mathcal{P}(n) = \bigcup_{i=1}^s \mathcal{D}_i$ \textbf{symmetric}
	if there are precisely ${n \choose i} - {n \choose i-1}$ sets $\mathcal{D}_i$ of cardinality $n+1-2i$.
\end{definition}

\begin{theorem}(Kleitman, 1970)
	$E, (x_i)_1^n$ as before. Then $\mathcal{P}(n)$ has a symmetric partition into scattered sets.
\end{theorem}

\begin{theorem}(Kleitman, 1970)
	If $\mathcal{A} \in \mathcal{P}(n)$ s.t. $\norm{x_A-x_B} < 1$ then $\abs{\mathcal{A}} \leq {n \choose {\lfloor\frac{n}{2}\rfloor}}$
\end{theorem}

\section{The Kruskal-Katona Theorem}
\setcounter{theorem}{0}
We know: if $\mathcal{A} \subset X^{(r)}$ then $\partial \mathcal{A}$ (the \textbf{lower shadow} of $\mathcal{A}$),
defined by $$\partial \mathcal{A} = \{B \in X^{(r-1)} \,|\, B \subset A \text{ for some } A \in \mathcal{A}\}$$ satisfies
\begin{align*}
\abs{\partial \mathcal{A}} &\geq \abs{\mathcal{A}} \frac{{n \choose r-1}}{{n \choose r}} \\
&= \abs{\mathcal{A}}\frac{r}{n-r+1}
\end{align*}
with equality $\iff \mathcal{A}$ is $\emptyset$ or $X^{(r)}$.

What about in between?
What is $\mathcal{B} \in X^{(r)}$ s.t. $\abs{\mathcal{B}} = \abs{\mathcal{A}}$ and $\abs{\partial\mathcal{B}} \leq \abs{\partial\mathcal{A}}$?

$\exists \mathcal{B}_1, \mathcal{B}_2, \dots \in X^{(r)}$ s.t. $\abs{\mathcal{B}_m} = m$ and $\abs{\partial \mathcal{B}_m} \leq \abs{\partial \mathcal{A}} \ \forall \mathcal{A} \subset X^{(r)}$ where $\abs{\mathcal{A}} = m$.

Incredibly luckily, we have a sequence of nested extremal sets.
Equivalently, $\exists$ total order on $X^{(r)}$ s.t. the first $m$ sets form $\mathcal{B}_m$.

\begin{definition}
	Define the \textbf{colex} total order on $X^{(r)}$ by $A<B$ if $\max(A \Delta B) \in B$.
\end{definition}

Aim: given $m$ and $r$, would like to find $\mathcal{B} \subset X^{(r)}$, $\abs{\mathcal{B}} = m$ s.t. $\abs{\partial\mathcal{B}} \leq \abs{\partial\mathcal{A}}\ \forall \mathcal{A} \subset X^{(r)}$, $\abs{\mathcal{A}} = m$.

Define $\mathcal{B}^{(r)}(m_r, \dots, m_s),\, m_r > m_{r-1} > \dots > m_s \geq s$ as follows:
\begin{align*}
\mathcal{B}^{(r)} = [m_r]^{(r)} &\cup ([m_{r-1}]^{(r-1)} + \{m_{r} + 1\}) \\
								&\cup ([m_{r-2}]^{(r-2)} + \{m_{r-1} +1, m_r + 1\}) \\
								&\cup \dots \\
								&\cup ([m_{s}]^{(s)} + \{m_{s+1} +1, m_{s+2} + 1, \dots, m_r + 1\}) \\
\end{align*}

Set $b^{(r)}(m_r, \dots, m_s) = \abs{\mathcal{B}^{(r)}(m_r, \dots, m_s)} = \sum_{j=s}^r {m_j \choose j}$.

$$\partial\mathcal{B}^{(r)}(m_r, \dots, m_s) = \mathcal{B}^{(r-1)}(m_r, \dots, m_s)$$

This has cardinality $b^{(r-1)}(m_r, \dots, m_s) = \sum_{j=s}^r {m_j \choose j-1}$.

\begin{lemma}
	For $l, r \in \mathbb{N}$ $\exists!\ m_r > \dots > m_s$  s.t. $l = \sum_{j=s}^r {m_j \choose j}$; the initial segment of $X^{(r)}$ in colex, consisting of $l$ sets, is $\mathcal{B}^{(r)}(m_r, \dots, m_s)$.
\end{lemma}

\begin{definition}
	Let $i \neq j \in X$, $A \in \mathcal{P}(X)$. Define the \textbf{ij-compression} $$A_{ij} = C_{ij}(A) = \begin{cases}
	(A\backslash \{j\}) \cup \{i\} & \text{if } j \in A,\, i \not\in A \\
	A & \text{otherwise}
	\end{cases}$$
	Given $\mathcal{A} \subset \mathcal{P}(n), A \in \mathcal{A}$ $$C_{i,j,\mathcal{A}}(A) = \begin{cases}
	A_{ij} & \text{if } A_{ij} \not\in \mathcal{A} \\
	A & \text{otherwise}
	\end{cases}$$
	Also,
	\begin{align*}
	C_{ij}(\mathcal{A}) &= \{C_{i,j,\mathcal{A}} \,|\, A \in \mathcal{A} \} \\
	&= \{C_{ij}(A) \,|\, A \in \mathcal{A}\} \cup \{A \in \mathcal{A} \,|\, C_{ij}(A) \in \mathcal{A}\}
	\end{align*}
	For $\mathcal{A} \in X^{(r)}$,
	\begin{align*}
	\mathcal{A}_{ij} &= \{A \in \mathcal{A} \,|\, \{i,j\} \subset A \} \\
	\mathcal{A}_i &= \{A \in \mathcal{A} \,|\, i \in A,\, j \not\in A \} \\
	\mathcal{A}_\emptyset &= \{A \in \mathcal{A} \,|\, A \cap \{i, j\} = \emptyset \} \\
	\mathcal{A}_j &= \{A \in \mathcal{A} \,|\, i \not\in A,\, j \in A \} \\
	\end{align*}
\end{definition}
$C_{ij}: \mathcal{A} \mapsto C_{ij}(\mathcal{A})$ keeps $\mathcal{A}_\emptyset \cup \mathcal{A}_i \cup \mathcal{A}_{ij}$ fixed, and maps $\mathcal{A}_j$ into sets like those in $\mathcal{A}_i$.

\begin{lemma}
	For $\mathcal{A} \subset X^{(r)}$, $\partial C_{ij}(\mathcal{A}) \subseteq C_{ij}(\partial \mathcal{A})$. In particular, the cardinality decreases.
\end{lemma}
\begin{proof}
	Let $B \in \partial C_{ij}(\mathcal{A})$ and let $A \in \mathcal{A}$ s.t. $B \subset C_{i,j,\mathcal{A}}(A)$.
	\begin{enumerate}[label=\roman*.]
		\item Suppose $B$ meets $\{i,j\}$ in 0 or 2 elements.
		Then $B \subset A$ so $B \in \partial A$ and $B \in C_{ij}(\partial \mathcal{A})$
		
		\item Suppose $i \in B$, $j \not\in B$.
		Then either $B$ or $(B \backslash \{i\}) \cup \{j\}$ belongs to $\partial \mathcal{A}$,
		so $B \in C_{ij}(\partial \mathcal{A})$.
		
		\item Suppose $j \in B$, $i \not\in B$.
		Then both $B$ and $(B \backslash \{j\}) \cup \{i\}$ belong to $\partial\mathcal{A}$,
		so both belong to $C_{ij}(\partial\mathcal{A})$.
	\end{enumerate}
\end{proof}
\begin{definition}
	Call $\mathcal{A} \subset X^{(r)}$ \textbf{left-compressed} if $C_{ij}(\mathcal{A}) = \mathcal{A}\ \forall i < j$.
\end{definition}

\begin{lemma}
	Let $\mathcal{A} \subset X^{(r)}$. Then $\exists$ a left-compressed family $\mathcal{B} \subset X^{r}$ s.t. $\abs{\mathcal{B}}=\abs{\mathcal{A}}$ and $\abs{\partial\mathcal{B}} \leq \abs{\partial\mathcal{A}}$.
\end{lemma}
\begin{proof}
	Define $\mathcal{A}_0 = \mathcal{A}, \mathcal{A}_1, \dots$ as follows:
	having reached $\mathcal{A}_k$,
	if $\mathcal{A}_k$ is not left-compressed,
	pick $i < j$ s.t. $C_{ij}(\mathcal{A}_k) \neq \mathcal{A}_k$,
	and set $\mathcal{A}_{k+1} = C_{ij}(\mathcal{A}_k)$
	
	This sequence has to end because $$\sum_{A \in \mathcal{A}_{k+1}} \sum_{a \in A} a < \sum_{A \in \mathcal{A}_{k}} \sum_{a \in A} a$$
	let $\mathcal{A}_l$ be the last term: this will do for $\mathcal{B}$.
\end{proof}

\begin{theorem}[Kruskal-Katona, 1963 and 1968]
	Let $\mathcal{A} \subset X^{(r)}$, $m = \abs{\mathcal{A}}$. Then
	\begin{align*}
		\abs{\partial\mathcal{A}} &\geq \abs{\partial\mathcal{B}_m^{(r)}} \\
		&= \abs{\partial\mathcal{B}^{(r)}(m_r, m_{r-1}, \dots, m_s)} \\
			&= b^{(r-1)}(m_r, \dots, m_s)
	\end{align*}
\end{theorem}
\begin{proof}
	Induction on $r$ and then $m$ (or on $r+m$). $r=1 \checkmark \ m=1 \checkmark$
	
	Induction step: we may assume that $\mathcal{A}$ is left-compressed.
	Set $Y = X \backslash \{1\}$.
	Then $\mathcal{A} = (\mathcal{A}_1 + \{1\}) \cup \mathcal{A}_0$,
	where $\mathcal{A}_1 \subset Y^{(r-1)}$, $\mathcal{A}_0 \subset Y^{(r)}$.
	
	$m=\abs{\mathcal{A}} = \abs{\mathcal{A}_0} + \abs{\mathcal{A}_1}$, 
	$\partial \mathcal{A}_0 \subset \mathcal{A}_1$,
	$\partial(\mathcal{A}_1 + \{1\}) = \mathcal{A}_1 \cup (\partial\mathcal{A}_1 + \{1\})$.
	
	In particular,
	$\abs{\partial\mathcal{A}} = \abs{\mathcal{A}_1} + \abs{\partial\mathcal{A}_1}$.
	
	For $\mathcal{A} = \mathcal{B}^{(r)}(m_r, \dots, m_s)$, $$\abs{\mathcal{A}_1} = b^{(r-1)}(m_r-1,\dots,m_s-1)$$ $$\abs{\mathcal{A}_0} = b^{(r)}(m_r-1,\dots,m_s-1)$$
	
	Suppose $\abs{\mathcal{A}_0} > b^{(r)}(m_r-1,\dots,m_s-1)$.
	Then by the induction hypothesis,
	$\abs{\partial\mathcal{A}_0} \geq b^{(r-1)}(m_r-1,\dots,m_s-1)$.
	Hence $\abs{\mathcal{A}_1} \geq b^{(r-1)}(m_r-1, \dots, m_s-1)$
	and so $\abs{\partial \mathcal{A}} \geq b^{(r-1)}(m_r, \dots, m_s)$.
	
	But if $\abs{\mathcal{A}_0} \leq b^{(r)}(m_r-1, \dots, m_s-1)$,
	$\abs{\mathcal{A}_1}$ is again $\geq b^{(r-1)}(m_r-1,\dots,m_s-1)$.
	Done as before.
\end{proof}

Soft version:
\begin{theorem}[Lov\'asz, 1979]
	If $\mathcal{A} \subset X^{(r)}$ satisfies $\abs{\mathcal{A}} = {X \choose r}$ then $\abs{\partial\mathcal{A}} \geq {X \choose r-1}$.
\end{theorem}
\begin{proof}
	Induction on $r$ and $m = \abs{\mathcal{A}}$. As before, $\mathcal{A}_0, \mathcal{A}_1$.
	Note that $\mathcal{A}_1 \geq {X-1 \choose r-1}$ since otherwise $\mathcal{A}_0 > {X-1 \choose r}$.
	But then $\abs{\partial\mathcal{A}_0} \geq {X-1 \choose r-1}$,
	contradicting the fact that $\partial\mathcal{A}_0 \subset \mathcal{A}_1$.
	
	But if $\abs{\mathcal{A}_1} \geq {X-1 \choose r-1}$ then $$\abs{\mathcal{A}_1} + \abs{\partial\mathcal{A}_1} \geq {X-1 \choose r-1} + {X-1 \choose r-2} = {X \choose r-1}$$
\end{proof}

\begin{definition}
	Define the \textbf{uniform probability measure} on $X^{(r)}$, $\abs{X}=n$ as $\mathbb{P}_{n,r}(A) = \frac{1}{{n \choose r}}$, and for $\mathcal{A} \subset X^{(r)}$, $\mathbb{P}_{n,r}(\mathcal{A}) = \frac{\abs{\mathcal{A}}}{{n \choose r}}$.
\end{definition}

\begin{definition}
	$\mathcal{A} \subset \mathcal{P}(n)$ is \textbf{monotone decreasing} if $A \subset B \in \mathcal{A} \implies A \in \mathcal{A}$.
\end{definition}

\begin{theorem}
	If $1 \leq s < r \leq n$, $\mathcal{A} \subset \mathcal{P}(n)$ decreasing,
	then $\mathbb{P}_s(\mathcal{A})^r \geq \mathbb{P}_r(\mathcal{A})^s$.
	
	[$\mathbb{P}_k(\mathcal{A}) = \mathbb{P}_k(\mathcal{A}_k)$, $\mathcal{A}_k = \mathcal{A} \cap X^{(k)}$]
\end{theorem}
\begin{proof}
	$\mathbb{P}_k(\mathcal{A}) = \frac{\abs{\mathcal{A}_k}}{{n \choose k}}$,
	if $\abs{\mathcal{A}_r}={X \choose r}$ then we know $\abs{\mathcal{A}_s} \geq {X \choose s}$.
	Hence, the inequality holds if
	$$\prod_{i=0}^{s-1} \left(\frac{X-i}{n-i}\right)^r \geq \prod_{i=0}^{r-1} \left(\frac{X-i}{n-i}\right)^s$$
	since $\frac{{X \choose r}}{{n \choose r}} = \prod_{i=0}^{r-1}\frac{X-i}{n-i}$.
	
	But this is
	$$\prod_{i=0}^{s-1} \left(\frac{X-i}{n-i}\right)^{r-s} \geq \prod_{i=s}^{r-1} \left(\frac{X-i}{n-i}\right)^s$$
	
	Every factor on the left is larger than every factor on the right:
	$$\frac{X-i}{n-i} > \frac{X-j}{n-j}$$
	for $i \leq s-1$, $j \geq s$.
\end{proof}

\begin{definition}[Erd\H{o}s and R\'enyi, 1960]
	Given an increasing family ('property of sets') $\mathcal{A}(n) \subset \mathcal{P}(n)$,
	a function $k^*(n)$ is a \textbf{threshold function} for $\mathcal{A}(n)$
	if $\mathbb{P}_{k(n)}(\mathcal{A}(n)) \to 0$ if $\frac{k}{k^*} \to 0$,
	and $\mathbb{P}_{k(n)}(\mathcal{A}(n)) \to 1$ if $\frac{k}{k^*} \to 1$.
\end{definition}

Erd\H{o}s and R\'enyi: for many monotone increasing graph properties, $\exists$ a threshold.

\begin{corollary}
	Let $\mathcal{A} \subset \mathcal{P}(n)$, $k_1 < k < k_2$
	\begin{enumerate}[label=\roman*.]
		\item If $\mathcal{A}$ is decreasing,
		$\mathbb{P}_{k_2}(\mathcal{A})^{k/k_2} \leq \mathcal{P}_k(\mathcal{A}) \leq \mathcal{P}_{k_1}(\mathcal{A})^{k/k_1}$
		\item If $\mathcal{A}$ is increasing,
		$(1-\mathbb{P}_{k_2}(\mathcal{A}))^{k/k_2} \leq 1-\mathcal{P}_k(\mathcal{A}) \leq (1-\mathcal{P}_{k_1}(\mathcal{A}))^{k/k_1}$
	\end{enumerate}
\end{corollary}
\begin{proof}
	\begin{enumerate}[label=\roman*.]
		\item This is precisely Theorem 6
		\item Set $\mathcal{A}^c = \mathcal{P}(n)\backslash\mathcal{A}$.
		Then $\mathcal{A}^c$ is decreasing and
		$$\mathbb{P}_k(\mathcal{A}^c) = 1 - \mathbb{P}_k(\mathcal{A})$$
		Apply (i) to $\mathcal{A}^c$.
	\end{enumerate}
\end{proof}

\begin{theorem}
	Every monotone increasing function has a threshold.
\end{theorem}
\begin{proof}
	We may assume $\mathcal{A}$ is non-trivial.
	Set $k^*(n) = \max \left\{k \,|\, \mathbb{P}_k(\mathcal{A}) \leq \frac{1}{2}\right\}$.
	
	Then, for $k < k^*$,
	$$\mathbb{P}_k(\mathcal{A}) \leq 1-(1-\mathbb{P}_{k*}(\mathcal{A}))^{k/k^*} \leq 1-2^{-k/k^*}$$
	
	For $k > k^*+1$,
	$$\mathbb{P}_k(\mathcal{A}) \geq 1-(1-\mathbb{P}_{k*}(\mathcal{A}))^{k/(k^*+1)} \geq 1-2^{-k/(k^*+1)}$$
\end{proof}

This is essentially best possible, but only for lop-sided systems $\mathcal{A}$.

\begin{definition}
	$\mathcal{A} \subset \mathcal{P}(n)$ is \textbf{symmetric} if
	$\forall x,y, \in X$ $\exists$ a permutation $\pi$ of $X$ mapping $x$ onto $y$,
	keeping $\mathcal{A}$ invariant.
\end{definition}

\begin{definition}
	Another measure on $\mathcal{P}(n)$: the \textbf{binomial measure}.
	Let $0<p<1$.
	$$\mathbb{P}_{n,p}(A) = \mathbb{P}_p(A) = p^{\abs{A}}(1-p)^{n-\abs{A}}$$
\end{definition}

$\mathbb{P}_{n, p}$ is very similar to $\mathbb{P}_{n,k}$ for $k \sim pn$.

\begin{theorem}[Friedgut and Kaloi, 1996]
	There is an absolute constant $c_0 > 0$ s.t. if $\mathcal{A} \subset \mathcal{P}(n)$ is a symmetric increasing family and $\mathbb{P}_p(\mathcal{A}) > \epsilon > 0$
	then $\mathbb{P}_{p'}(\mathcal{A}) > 1 - \epsilon$
	provided $p' \geq p + c_0 \frac{\log{1/\epsilon}}{\log{n}}$
\end{theorem}

\section{Intersecting Families}
\setcounter{theorem}{0}
\begin{definition}
	$\mathcal{A} \subset \mathcal{P}(n)$ is \textbf{intersecting} if $A \cap B \neq \emptyset\ \forall A, B \in \mathcal{A}$.
\end{definition}

Suppose $\mathcal{A} \subset X^{(r)}$.
If $r > \frac{n}{2}$, $\mathcal{A}$ is intersecting.
If $r = \frac{n}{2}$, we can take families of size $\frac{1}{2}{n \choose r}$.
$r < \frac{n}{2}$?

Let $$X_x^{(r)} = \{A \in X^{(r)} \,|\, x \in A\}$$ for any $x \in X$.

\begin{theorem}[Erd\H{o}s, Ko and Rado 1961]
	Let $n > 2r \geq 4$ and let $\mathcal{A} \subset X^{(r)}$ be an intersecting family.
	Then $\abs{\mathcal{A}} \leq {n-1 \choose r-1}$ with equality $\iff \mathcal{A} = X_x^{(r)}$.
\end{theorem}
\begin{proof}
	We may assume $\abs{\mathcal{A}} \geq {n-1 \choose r-1}$.
	Take $\mathcal{B} = \{X\backslash A \,|\, A \in \mathcal{A}\} \subset X^{(n-r)}$.
	For $A \in \mathcal{A}$ and $B \in \mathcal{B}$ we have $A \not\subset B$.
	
	Let $\mathcal{C} = \partial \dots \partial \mathcal{B}$ (shadow $n-r$ times).
	Then $\mathcal{C} \subset X^{(r)}$ and $\mathcal{C} \cap \mathcal{A} = \emptyset$,
	$\therefore \abs{\mathcal{A}} + \abs{\mathcal{C}} \leq {n \choose r}$.
	
	By Kruskal-Katona, since $\abs{B} \geq {n-1 \choose r-1} = {n-1 \choose n-r}$,
	have $\abs{\mathcal{C}} \geq {n-1 \choose r}$.
	
	Hence $\abs{\mathcal{A}} \leq {n \choose r} - {n -1 \choose r} = {n-1 \choose r-1}$.
\end{proof}

\begin{definition}
	We call $\mathcal{A}$ \textbf{l-intersecting} if $\abs{A \cap B} \geq l\ \forall A, B \in \mathcal{A}$.
\end{definition}

Let $$\mathcal{F}_0 = \{A \in X^{(r)} \,|\, A \supset [l] \}$$

\begin{lemma}
	Let $2 \leq l < r$ and $n \geq \frac{4}{3}lr^3$.
	Let $\mathcal{A} \subset X^{(r)}$ be $l$-intersecting,
	\textbf{not} fixed by an $l$-set (i.e. $\mathcal{A} \not\subset \mathcal{F}' \cong \mathcal{F}_0$).
	Then
	$$\abs{\mathcal{A}} \leq (r-l){n-l-1 \choose r-l-1} + \sum_{t=1}^{t_0} {l \choose t}{r-l \choose t}^2{n-l-2t \choose r-l-t}$$
	where $t_0 = \min\{l, r-l\}$.
\end{lemma}
\begin{proof}
	We may assume $\mathcal{A}$ is maximal $l$-intersecting.
	So $\exists A_1, A_2 \in \mathcal{A}$ s.t. $A_1 \cap A_2 = B$, $\abs{B} = l$.
	
	Let $\mathcal{A}_t = \{A \in \mathcal{A} \,|\, \abs{B \backslash A} = t \}$.
	
	$\abs{\mathcal{A}_0} \leq (r-l){n-l-1 \choose r-l-1}$
	
	$\abs{\mathcal{A}_t} \leq {l \choose t}{r-l \choose t}^2{n-l-2t \choose r-l-t}$
\end{proof}

\begin{theorem}
	Suppose $2 \leq l < r < n$ and $n \geq \frac{3}{2}lr^3$.
	Let $\mathcal{A} \subset X^{(r)}$ be $l$-intersecting.
	Then $\abs{\mathcal{A}} \leq {n-l \choose r-l}$ and equality holds only if
	$$\mathcal{A} \cong \{A \in X^{(r)} \,|\, A \supset L\}$$
	for some $L \in X^{(l)}$.
\end{theorem}
\begin{proof}
	Suppose $\mathcal{A}$ is not fixed by an $l$-set.
	Then by Lemma 2,
	\begin{align*}
		\abs{A} &\leq (r-l){n-l-1 \choose r-l-1} + \sum_{t=1}^{t_0}{l \choose t}{r-l \choose t}^2{n-l-t \choose r-l-t} \\
		&= (r-l){n-l-1 \choose r-l-1} + \sum_{t=1}^{t_0} S_t
	\end{align*}
	Note
	\begin{align*}
		\frac{S_{t+1}}{S_t} &= \frac{l-t}{t+1}\frac{(r-l-t)^2}{(t+1)^2}\frac{r-l-t}{n-l-t} \\
		&\leq \frac{lr^3}{(t+1)^3n} \leq \frac{2}{3(t+1)^3} \leq \frac{1}{12}
	\end{align*}
	
	Thus
	\begin{align*}
		\frac{\abs{\mathcal{A}}}{{n-l \choose r-l}} &\leq (r-l)\frac{r-l}{n-l} + \frac{12}{11}l(r-l)^2\frac{r-l}{n-l} \\
		&= (1+\frac{12}{11}l(r-l)) \frac{(r-l)^2}{n-l} \\
		&< \frac{3}{2}l\frac{r^3}{n} \leq 1
	\end{align*}
	If $r=l+2$ then $<$.
\end{proof}

Suppose $\mathcal{P}(X) \supset \mathcal{A}$ is intersecting.
$\mathcal{A} \leq 2^{n-1}$.
Binomial probability measure:
$$\mathbb{P}_p(A) = p^{\abs{A}}(1-p)^{n-\abs{A}}$$
$$\mathbb{P}_p(\mathcal{A}) = \sum_{A \in \mathcal{A}}\mathbb{P}_p(A)$$
$\mathcal{A}$ intersecting $\implies \mathbb{P}_{\frac{1}{2}}(\mathcal{A}) \leq \frac{1}{2}$.

\begin{theorem}
	Let $0<p\leq \frac{1}{2}$ and let $\mathcal{A} \subset \mathcal{P}(X)$ be intersecting.
	Then $\mathbb{P}_p(\mathcal{A}) \leq p$.
\end{theorem}
\begin{proof}
	Set $N_k = \abs{\mathcal{A}_k}$.
	$A \in \mathcal{A} \implies A^c = X\backslash A \not\in \mathcal{A}$.
	
	Hence $N_k + N_{n-k} \leq {n \choose k}$.
	Also, for $k \leq \frac{n}{2}$, $p^k(1-p)^{n-k} \geq p^{n-k}(1-p)^k$, so
	\begin{align*}
		N_kp^k(1-p)^{n-k} + N_{n-k}p^{n-k}(1-p)^k & \leq {n-1 \choose k-1}p^k(1-p)^{n-k} + \left({n \choose k} - {n-1 \choose k-1}\right)p^{n-k}(1-p)^k \\
		& \leq {n-1 \choose k-1}p^k(1-p)^{n-k} + {n-1 \choose n-k-1}p^{n-k}(1-p)^k
	\end{align*}
	
	Thus
	\begin{align*}
		\mathbb{P}_p(\mathcal{A}) &= \sum_{k=1}^n p^k(1-p)^{n-k} \\
		&\leq p \sum{k=1}^n {n-1 \choose k-1}p^{k-1}(1-p)^{n-k} = p
	\end{align*}
\end{proof}

\begin{definition}
	$\mathcal{A} \subset \mathcal{P}(X)$ is \textbf{k-wise-intersecting} if $A_1 \cap \dots \cap A_k \neq \emptyset\ \forall A_i \in \mathcal{A}$.
\end{definition}

\begin{theorem}
	Let $ks \geq n$,
	let $\mathcal{A} \subset X^{(s)}$ be such that $X$ is \textbf{not} the union of $k$ sets from $\mathcal{A}$.
	Then $\abs{\mathcal{A}} \leq {n-1 \choose s}$.
\end{theorem}
\begin{proof}
	Apply Katona's circle method.
	Let $\Pi$ be the set of all $(n-1)!$ cyclic orders on $X$.
	For $\pi \in \Pi$, let $\mathcal{A}_\pi = \{A \in \mathcal{A} \,|\, A \text{ is a $\pi$-arc}\}$.
	
	Claim: $\abs{\mathcal{A}_\pi} \leq n-s$.
	
	Proof of claim: we may assume $X = \mathbb{Z}_n$ is given by $\pi$;
	we may assume one of the arcs in $\mathcal{A}_\pi$ ends in $n$.
	Associate with each arc its end point,
	except for the one ending in $n$,
	to which we associate all $ks-n+1$ numbers in $[n, ks]$.
	
	Thus, if $l = \abs{\mathcal{A}_\pi}$,
	and $L$ is the set of elements associated with our arcs,
	then $\abs{L} = l+(ks-n)$.
	
	For $1 \leq i \leq s$, let $K_i = \{i, i+s, i+2s, \dots, i+(k-1)s\}$.
	Then $K_1, \dots, K_s$ partition $[ks]$ into $s$ sets of $k$ elements each.
	Can $K_i \subset L$ happen?
	No, as then the corresponding $k$ arcs would cover $X$.
	
	Hence, $\abs{L \cap K_i} \leq k-1 \ \forall i$,
	so $l+ks-n = \abs{L} \leq (k-1)s$,
	i.e. $l \leq n-s.\ \checkmark$
	
	Double counting:
	\begin{align*}
		s!(n-s)!\abs{\mathcal{A}} &= \sum_{A \in \mathcal{A}} \abs{\{\pi \in \Pi: A \text{ is a $\pi$-arc} \}} \\
		&= \sum_{\pi \in \Pi} \abs{\mathcal{A}_\pi} \leq (n-1)!(n-s)
	\end{align*}
\end{proof}

\begin{corollary}[Equivalent to Theorem 5]
	Let $2 \leq k,r < n$, $kr \leq (k-1)n$.
	Let $\mathcal{A} \subset X^{(r)}$ be $k$-wise intersecting.
	Then $\abs{\mathcal{A}} \leq {n-1 \choose r-1}$.
\end{corollary}
\begin{proof}
	Note that $\mathcal{A}^c = \{X \backslash A \,|\, A \in \mathcal{A}\} \subset X^{(s)}$,
	$s= n-r$, satisfies the conditions of Theorem 5,
	so $\abs{\mathcal{A}} = \abs{\mathcal{A}^c} \leq {n-1 \choose s} = {n-1 \choose r-1}$.
\end{proof}

\begin{theorem}
	Let $2 \leq k,r < n$, $kr \leq (k-1)n$;
	let $\mathcal{A} \subset X^{(\leq r)}$ be a $k$-wise intersecting Sperner family.
	Then
	$$\sum_{j=1}^n \abs{\mathcal{A}_j} \bigg/ {n-1 \choose j-1} = \sum_{A \in \mathcal{A}} {n-1 \choose \abs{A}-1}^{-1} \leq 1$$
\end{theorem}
\begin{proof}
	Set $l = \min \{j \,|\, \mathcal{A})j \neq \emptyset\}$,
	$m = \max\{j \,|\, \mathcal{A}_j \neq \emptyset\}$.
	
	Induction on $m-l$: $m=l$ is exactly Corollary 6.
	
	Induction step: $m-l \geq 1$. Let $\mathcal{A}_l^+$ be the upper shadow of $\mathcal{A}_l$ at level $l+1$.
	Then $\mathcal{A}' = (\mathcal{A} \backslash \mathcal{A}_l) \cup \mathcal{A}_l^+$ is again $k-wise$ intersecting Sperner,
	with a smaller difference $m-l$. Thus, we're done if
	$$ \abs{\mathcal{A}_l^+} \bigg/ {n-1 \choose l} \geq \abs{\mathcal{A}_l} \bigg/ {n-1 \choose l-1} $$
	$\mathcal{A}_l^+$ is the cardinality of the lower shadow of $\mathcal{A}_l^c$.
	Set $\abs{\mathcal{A}_l} = {x \choose n-l}$.
	Then, by the weak Kruskal-Katona theorem,
	$\abs{\mathcal{A}_l^+} \geq {x \choose n-l-1}$.
	We know ${x \choose n-l} \geq {n-1 \choose l-1} = {n-1 \choose n-l}$, so $x \leq n-1$.
	
	Would like:
	\begin{align*}
		{x \choose n-l} \bigg/ {n-1 \choose l-1} &\leq {x \choose n-l-1} \bigg/ {n-1 \choose l} \\
		{x \choose n-l} \bigg/ {n-1 \choose n-l} &\overset{?}{\leq} {x \choose n-l-1} \bigg/ {n-1 \choose n-l-1} \\
		x-(n-l)+1 &\overset{?}{\leq} n-(n-l) = l \\
		x &\leq n-1\ \checkmark
	\end{align*}
\end{proof}

\section{Correlation Inequalities}
\setcounter{theorem}{0}
Let $0 < p < 1$, $\mathcal{G}(n,p)$ the probability space of all $2^{{n \choose 2}}$ graphs on $[n]$ such that
$\mathbb{P}_p(G_{n,p} = H) = p^{e(H)}(1-p)^{{n \choose 2} - e(H)}$.

This is really the weighted cube $Q_p^n$. $\mathbf{p} = (p_1, \dots, p_n)$, random subset of $X=[n]$:
$\mathbb{P}_\mathbf{p}(A) = \prod_{i \in A} p_i \prod_{i \not\in A}(1-p_i)$.
For $\mathcal{G}(n,p)$, consider $Q_\mathbf{p}^{{n \choose 2}}$.

\begin{theorem}
	Let $A, B \in Q_\mathbf{p}^n$.
	If both are up-sets or both are down-sets,
	then $\mathbb{P}_\mathbf{p}(A \cap B) \geq \mathbb{P}_\mathbf{p}(A)\mathbb{P}_\mathbf{p}(B)$.
	IF one is an up-set and the other is a down-set, then the inequality reverses.
\end{theorem}
\begin{proof}
	Induction on $n$. $n=1$: $\checkmark$. Let $n \geq 1$.
	
	Let $A_i = \{\mathbf{x} \in \{0, 1\}^{n-1} \,|\, (x_1, \dots, x_{n-1} ,i) \in A\}$,
	similary $B_i$.
	
	Then $\mathbb{P}_\mathbf{p}(A) = (1-p_n)\mathbb{P}_\mathbf{p'}(A_0) + p_n\mathbb{P}_\mathbf{p'}(A_1)\ $
	($\mathbf{p'} = (p_1, p_2, \dots, p_{n-1})$)
	
	Also $(*):\ (\mathbb{P}_\mathbf{p'}(A_1)-\mathbb{P}_\mathbf{p'}(A_0))(\mathbb{P}_\mathbf{p'}(B_1)-\mathbb{P}_\mathbf{p'}(B_0)) \geq 0 - (*)$
	since both are up/down sets.
	
	\begin{align*}
		\mathbb{P}_\mathbf{p}(A \cap B) &= (1-p_n)\mathbb{P}_\mathbf{p'}(A_0 \cap B_0) + p_n\mathbb{P}_\mathbf{p'}(A_1 \cap B_1) \\
		&\geq (1-p_n)\mathbb{P}_\mathbf{p'}(A_0)\mathbb{P}_\mathbf{p'}(B_0) + p_n\mathbb{P}_\mathbf{p'}(A_1)\mathbb{P}_\mathbf{p'}(B_1) \text{ by induction} \\
		&\overset{?}{\geq} ((1-p_n)\mathbb{P}(A_0) + p_n\mathbb{P}(A_1))((1-p_n)\mathbb{P}(B_0)+p_n\mathbb{P}(B_1))
	\end{align*}
	
	This holds if $\mathbb{P}(A_0)\mathbb{P}(B_0)-\mathbb{P}(A_0)\mathbb{P}(B_1)-\mathbb{P}(A_1)\mathbb{P}(B_0)+\mathbb{P}(A_1)\mathbb{P}(B_1) \geq 0$,
	which is exactly $(*)$.
	
	If $A$ is an up-set, $B$ a down-set then
	\begin{align*}
		\mathbb{P}(A \cap B) &= \mathbb{P}(A) - \mathbb{P}(A\cap B^c) \\
		&\leq \mathbb{P}(A)-\mathbb{P}(B)(1-\mathbb{P}(B)) \\
		&= \mathbb{P}(A) \mathbb{P}(B)
	\end{align*}
\end{proof}

\begin{definition}
	Let $A, B \in Q^n = \{0, 1\}^n$.
	\begin{align*}
		A \square B = \{z \in Q^n \,|\, \exists \text{ disjoint } I, J \in [n] \text{ s.t. } &x|I = z|I \implies x\in A,\\ \, &y|J = z|J \implies y \in B \}
	\end{align*}
\end{definition}

If $A$ and $B$ are increasing then
$$A \square B = \{ x+y \,|\, x \in A,\, y \in B\}$$
$$\mathcal{A} \square \mathcal{B} = \{A \cup B \,|\, A\cap B = \emptyset,\, A \in \mathcal{A},\, B \in \mathcal{B}\}$$

\begin{theorem}
	If $A$ and $B$ are up-sets in $Q^n_\mathbf{p}$, then
	$$\mathbb{P}_\mathbf{p}(A \square B) \leq \mathbb{P}_\mathbf{p}(A)\mathbb{P}_\mathbf{p}(B)$$
\end{theorem}
\begin{proof}
	Put $C = A \square B$. Induction on $n$: $n=0\ \checkmark$. So let $n \geq 1$.
	
	Let $C_0 = A_0 \square B_0$, $C_1 = (A_0 \square B_1) \cup (A_1 \square B_0) \subseteq A_1 \square B_1$.
	Then we have $C_0 \subset (A_0 \square B_1) \cap (A_1 \square B_0)$.
	
	$\mathbb{P}_\mathbf{p'}(C_0) \leq \mathbb{P}_\mathbf{p'}(A_0)\mathbb{P}_\mathbf{p'}(B_0)$,
	$\mathbb{P}(C_1) \leq \mathbb{P}(A_1)\mathbb{P}(B_1)$.
	
	\begin{align*}
		\mathbb{P}(C_0) + \mathbb{P}(C_1) & \leq \mathbb{P}((A_0 \square B_1) \cap (A_1 \square B_0)) + \mathbb{P}((A_0 \square B_1) \cup (A_1 \square B_0)) \\
		&= \mathbb{P}(A_0\square B_1) + \mathbb{P}(A_1 \square B_0) \\
		&\leq \mathbb{P}(A_0)\mathbb{P}(B_1) + \mathbb{P}(A_1)\mathbb{P}(B_0)
	\end{align*}
	
	Multiply then by $(1-p_n)^2$, $p_n^2$, $p_n(1-p_n)$ and add them:
	$$\mathbb{P}(C_0)((1-p_n)^2+(1-p_n)p_n) + \mathbb{P}(C_1)(p_n^2 + p_n(1-p_n)) \leq \mathbb{P}_\mathbf{p}(A)\mathbb{P}_\mathbf{p}(B)$$
	
	Obtain $\mathbb{P}(C) \leq \mathbb{P}(A) \mathbb{P}(B)$.
\end{proof}

The full Van den Berg - Kesten conjecture that $\mathbb{P}(A \square B) \leq \mathbb{P}(A)\mathbb{P}(B)$ was proved by Reimer.

\begin{theorem}[Ahlswede-Daykin Four Functions Theorem]
	let $\alpha, \beta, \gamma, \delta: \mathcal{P}(X) \to \mathbb{R}^+$.
	Suppose $\alpha(A)\beta(B) \leq \gamma(A \cup B)\delta(A \cap B)\ \forall A, B \subset X$.
	
	Then $\alpha(\mathcal{A})\beta(\mathcal{B}) \leq \gamma(\mathcal{A} \vee \mathcal{B})\delta(\mathcal{A} \wedge \mathcal{B})$
	where $\mathcal{A} \vee \mathcal{B} = \{A \cup B \,|\, A \in \mathcal{A},\, B \in \mathcal{B} \}$,
	$\mathcal{A} \wedge \mathcal{B} = \{A \cap B \,|\, A \in \mathcal{A},\, B \in \mathcal{B} \}$
\end{theorem}
\begin{proof}
	Induction on $n$. $n=1: \alpha: \{\emptyset, \{1\}\} \to \mathbb{R}$, etc. $\alpha_0, \alpha_1, \beta_0, \beta_1, \dots$
	
	The conditions become
	\begin{align*}
		\alpha_0\beta_0 &\leq \gamma_0\delta_0 \\
		\alpha_1\beta_0 &\leq \gamma_1\delta_0 \\
		\alpha_0\beta_1 &\leq \gamma_1\delta_0 \\
		\alpha_1\beta_1 &\leq \gamma_1\delta_1
	\end{align*}
	
	We need
	\begin{equation*}
		(\alpha_0 + \alpha_1)(\beta_0+\beta_1) \overset{?}{\leq} (\gamma_0 + \gamma_1)(\delta_0+\delta_1)
		\tag{*}
	\end{equation*}
	
	We may assume all are $> 0$,
	also $\gamma_0 = \frac{\alpha_0\beta_0}{\delta_0}$,
	$\delta_1 = \frac{\alpha_1\beta_1}{\gamma_1}$.
	
	(*) becomes
	\begin{align*}
		\alpha_0\beta_1+\alpha_1\beta_0 &\overset{?}{\leq} \gamma_0\delta_1 + \gamma_1\delta_0 \\
		&= \frac{\alpha_0\beta_0}{\delta_0}\frac{\alpha_1\beta_1}{\gamma_1} + \gamma_1\delta_0 \\ \\
		\alpha_0\beta_1\gamma_1\delta_0 + \alpha_1\beta_0\gamma_1\delta_0 &\leq \alpha_0\beta_0\alpha_1\beta_1 + (\gamma_1\delta_0)^2 \\ \\		
		(\gamma_1\delta_0 - \alpha_1\beta_0)(\gamma_1\delta_0-\alpha_0\beta_1) & \geq 0 \qquad \checkmark
	\end{align*}
	
	$X=[n], Y=[n]-\{n\}$.
	We may assume $\text{supp }\alpha = \mathcal{A}$, $\text{supp }\beta = \mathcal{B}$,
	$\text{supp }\gamma = \mathcal{A} \wedge \mathcal{B}$, $\text{supp }\delta = \mathcal{A} \vee \mathcal{B}$.
	
	Need: $\alpha(\mathcal{P})\beta(\mathcal{P}) \leq \gamma(\mathcal{P})\delta(\mathcal{P})$.
	
	Define $\alpha', \beta', \gamma', \delta': \mathcal{P}(Y) \to \mathbb{R}^+$ by
	$\alpha'(E) = \alpha(E)+\alpha(E \cup \{n\})$,
	$\beta'(E) = \beta(E)+\beta(E \cup \{n\}), \dots$
	
	Need $\alpha'(\mathcal{P}(Y))\beta'(\mathcal{P}(Y)) \leq \gamma'(\mathcal{P}(Y))\delta'(\mathcal{P}(Y))$.
	By induction this holds if it holds $\forall A, B \subset Y$.
	
	Suffices to prove that
	$$(\alpha(A) + \alpha(A \cup \{n\})(\beta(B) + \beta(B \cup \{n\}) \leq (\gamma(C) + \gamma(C \cup \{n\})(\delta(D) + \delta(D \cup \{n\})$$
	
	Since we know the four function theorem for $n=1$,
	this holds if $\tilde{\alpha}:\{\emptyset, 1\} \to \mathbb{R}^+$,
	$\tilde{\alpha}_0=\alpha(A), \tilde{\alpha}_1=\alpha(A\cup\{n\})$,
	$\tilde{\beta}_0=\beta(B), \dots$
	satisfy our four conditions.
	But these are exactly the inequalities satisfied by $\alpha, \beta, \gamma and \delta$.
\end{proof}

\begin{definition}
	A \textbf{lattice} $L$ is a poset with finite meets and joins.
	$L$ is a \textbf{distributive lattice} if $\forall x, y, z \in L$,
	$x \vee (y \wedge z) = (x \vee y ) \wedge (x \vee z)$
	(equivalently $x \wedge (y \vee z)$).
\end{definition}

Prime example: $\mathcal{P}(X)$.
Every finite distributive lattice is a sublattice of $\mathcal{P}(X)$.

\begin{corollary}
	If $L$ is a distributive lattice and $\alpha, \beta, \gamma, \delta: L \to \mathbb{R}^+$
	then $\alpha(A)\beta(B) \leq \gamma(A \wedge B) \delta(A \vee B)\ \forall A,B \subset L \iff$
	it holds $\forall A, B$ singletons.
\end{corollary}

\begin{definition}
	A probability measure $\mu: L \to \mathbb{R}^+$ is \textbf{log-supermodular} if
	$$\mu(x)\mu(y) \leq \mu(x \wedge y)\mu(x \vee y)$$
\end{definition}

\begin{corollary}[FKG inequality]
	If $\mu: L \to \mathbb{R}^+$ is a log-supermodular probability measure and $f, g$ are increasing, non-negative functions then
	$$\int f \,d\mu \int g \,d \mu \leq \int fg \,d\mu$$
\end{corollary}

\section{Isoperimetric Inequalities}
\setcounter{theorem}{0}
\subsection{Vertex Isoperimetric Inequality}
Let $A \subset Q^n \cong \mathcal{P}(X)$;
$A \leftrightarrow \mathcal{A} \subset \mathcal{P}(X)$;
$x,y \in A$, $x, y \leftrightarrow A,B \subset X$.

Let $N(A) = A \cup \{x \in Q^n \,|\, x \not\in A,\, \exists y \in A \text{ s.t. } xy \in E \}$,
the neighbourhood of $A$.

Given $a \geq 1$, which set $A \in X^{(a)}$ minimise $\abs{N(A)}$ over $X^{(a)}$?

\begin{definition}
	The \textbf{simplicial order} on $Q_n \cong \mathcal{P}(X)$ is given by $A < B$ if $\abs{A} < \abs{B}$
	or $\abs{A} = \abs{B}$ and $\min(A \triangle B) \in A$.
\end{definition}

$n=4:\ \emptyset, 1,\, 2,\, 3,\, 4,\, 12,\, 13,\, 14,\, 23,\, 24,\, 34,\, 123, \dots$

$N(\{\emptyset,\, 1,\, 2,\, 3,\, 4,\, 12,\, 13\}) = \{\emptyset, 1,\, 2,\, 3,\, 4,\, 12,\, 13,\, 14,\, 23,\, 24,\, 34,\, 123,\, 124,\, 134\}$

If $A$ is an initial segment in the simplicial order then $N(A)$ is also an initial segment.

\begin{definition}
	For $S \subset Q^n$ and direction $i$,
	$1 \leq i \leq n$, the \textbf{i-sections} of $S$ are
	$$S_-^{(i)} = \{x \in S \,|\, i \not\in x \} \subset \mathcal{P}([n]-\{i\})$$
	$$S_+^{(i)} = \{x - \{i\} \,|\, x \in S,\, i \in x \} \subset \mathcal{P}([n]-\{i\})$$
\end{definition}
\begin{theorem}
	Let $A \subset Q^n$ and let $B$ be the initial segment of length $\abs{A}$ in the simplicial order on $Q^n$.
	Then $\abs{N(A)} \geq \abs{N(B)}$.
	In particular, $\abs{A} = \sum_{n=0}^r {n \choose i} \implies \abs{N(A)} \geq \sum_{n=0}^{r+1} {n \choose i}$.
\end{theorem}
\begin{proof}\renewcommand{\qedsymbol}{}
	Let $C_i(A)$ be obtained from $A$ by replacing each $i$-segment by the initial segment of $\mathcal{P}([n]-\{i\})$ of the same size.
	Let $C_-^{(i)}(A)$ be the initial segment of length $\abs{A_-^{(i)}}$ in the simplicial order on $\mathcal{P}([n]-\{i\})$,
	similarly $C_+^{(i)}(A)$.
	
	$C_i(A)$ is given by
	\begin{align*}
		C_i(A)_-^{(i)} &= C_-^{(i)}(A) \\
		C_i(A)_+^{(i)} &= C_+^{(i)}(A)
	\end{align*}
	
	Then $\abs{C_i(A)} = \abs{A}$.
	
	$\abs{N(S)} = \abs{N(S_-^{(i)}) \cup S_+^{(i)}} + \abs{N(S_+^{(i)}) \cup S_-^{(i)}}$
	
	Induction on $n$. $n=1:\ \checkmark$
	
	Note
	\begin{align*}
		\abs{N(C_i(A))} &= \abs{N(C_-^{(i)}(A)) \cup C_+^{(i)}(A)} + \abs{N(C_+^{(i)}(A)) \cup C_-^{(i)}(A)} \\
		&= \abs{N(A_-^{(i)}) \cup A_+^{(i)}} + \abs{N(A_+^{(i)}) \cup A_-^{(i)}}
	\end{align*}
	Thus $\abs{N(C_i(A))} \leq \abs{N(A)}$.
	
	We may compress $A$ in any direction.
	Compress while the set moves.
	This ends, since the elements of $A$ move closer to the beginning.
	We end with a compressed set $A$: $C_i(A) = A\ \forall i$.
	
	Define $A^{(n)}_{vc, exc} \subset Q^n$:
	\begin{align*}
		n=2k+1:\qquad & A^{(n)}_{vx, exc} = (X^{(\leq k)} - \text{last}) \cup \text{next} \\
		n=2k:\qquad &A^{(n)}_{vx, exc} = (\text{half - last}) \cup \text{next}
	\end{align*}
\end{proof}

\begin{lemma}
	Let $A \subset Q^n$ be $i$-compressed $\forall i$,
	but not an initial segment.
	Then $A = A^{(n)}_{vx, exc}$.
\end{lemma}
\begin{proof}
	$\exists x \in Q^n \backslash A$, $y \in A$, $x < y$.
	Since $A$ is compressed for $1 \leq i \leq n$,
	$i \in x \iff i \not\in y$.
	Indeed, if $i \in x \cap y$ or $i \not\in x \cup y$ then the $i$-compression would move $A$.
	
	Hence $y = x^c$,
	so $A$ has only one 'gap' ($x$),
	and that is followed by a single element ($y$).
	
	Thus $A$ is an initial segment minus its last element,
	followed by the complement of this element.
	
	In the simplicial order, $x$ is followed by $x^c$
	\begin{align*}
	n=2k+1:\qquad & x = \{k+2,\, k+3,\, 2k+1\};\ y=\{1,\, 2,\, \dots,\, k+1\} \\
	n=2k:\qquad & x = \{1,\, k+2,\, \dots,\, 2k\};\ y=\{2,\, 3,\, \dots,\, k+1\}
	\end{align*}
\end{proof}

\begin{proof}[Proof of Theorem 1 cont.]
	We may assume $A$ is compressed.
	Hence either $A$ is an initial segment,
	so we're done,
	or else $A = A^n_{vx, exc}$. But this set has too large a neighbourhood.
\end{proof}

\subsection{Edge Isoperimetric Inequality}

$A \subset Q^n$, $\partial_e A = \{xy \in E \,|\, x \in A,\, y \not\in A\}$.

Binary order on $\mathcal{P}(n)$: $A<B$ if $\max(A\triangle B) \in B$.

\begin{theorem}
	Let $A \subset Q^n$ and let $B$ be the initial segment of length $\abs{A}$ in the binary order.
	Then $\abs{\partial_e A} \geq \abs{\partial_e B}$.
	In particular, if $\abs{A}=2^k$ then $\abs{\partial_e A} \geq 2^{k(n-k)}$.
\end{theorem}
\begin{proof}\renewcommand{\qedsymbol}{}
	The 1-codimensional compression of $A$ in the direction $i$, $C_i(A)$ is the set $B$ such that
	\begin{itemize}
		\item $B_-^{(i)}$ is the initial segment in $\mathcal{P}([n]\backslash\{i\})$ in the binary order of length $\abs{A_-^{(i)}}$
		\item $B_+^{(i)}$ similarly
	\end{itemize}
	Note: 
	\begin{align*}
		\abs{\partial_e(A)} &= \abs{\partial_e A_-^{(i)}} + \abs{\partial_e A_+^{(i)}} + \abs{A_-^{(i)} \triangle A_+^{(i)}} \\
		&\geq \abs{\partial_e B_-^{(i)}} + \abs{\partial_e B_+^{(i)}} + \abs{B_-^{(i)} \triangle B_+^{(i)}} = \abs{\partial_e(B)}
	\end{align*}
	Compress until our set moves.
	This stops: we get a compressed set $A$.
\end{proof}

\begin{lemma}
	If $A \subset Q^n$ is compressed (in the binary order) but not an initial segment,
	then $A$ = (half - last) $\cup$ next, e.g. $(\mathcal{P}(n-1)\backslash \{1,\, 2,\, \dots,\, n-1\}) \cup \{\{n\}\}$
\end{lemma}
\begin{proof}
	$\exists x \in Q^n \backslash A$, $y \in A$, $x < y$.
	As before, $y = x^c$.
	Then $y = \{n\}$, $x = \{1,\, 2,\, \dots, \, n-1\}$.
\end{proof}

\begin{proof}[Proof of Theorem 3 cont.]
	We may assume $A$ is compressed,
	so it is either an initial segment or our exceptional set $A^n_{edge, exc}$.
	But $\abs{\partial_e A^n_{edge, exc}}$ is too large.
\end{proof}

\section{Intersecting Families II}
\setcounter{theorem}{0}

Modular intersections: $L=\{l_1,\,\dots,\,l_s\}$,
$\mathcal{A} \subset \mathcal{P}(n)$,
$\abs{A \cap B} \in L\ \forall A,B \in \mathcal{A}$.

\begin{theorem}[Ray-Chaudhuri-Wilson, 1975]
	Let $p$ be a prime and $L=\{l_1,\, \dots,\, l_s\}$ a set of $s$ integers.
	Let $\mathcal{A} = \{A_1,\dots,A_m\} \subset \mathcal{P}(n)$ be a set system such that
	\begin{itemize}
		\item $\abs{A_i} \not\in L \mod p$
		\item $\abs{A_i \cap A_j} \in L \mod p$
	\end{itemize}
	Then $m=\abs{\mathcal{A}} \leq \sum_{i=0}^s {n \choose i}$.
\end{theorem}
\begin{remark}
	For $\mathcal{A} = [n]^{(s)}$ and $L=\{0,\,1,\, \dots,\, s-1\}$ we have equality
\end{remark}
\begin{proof}
	We work with the polynomial ring $\mathbb{F}_p[X] = \mathbb{F}_p[X_1, \dots, X_n]$ as a vector space.
	For $A \in \mathcal{P}(n)$,
	write $v_A \in \mathbb{F}_p^n$ for the characteristic function of $A$: $v_A = (v_1, \dots, v_n)$,
	$v_i = \begin{cases}1 & i \in A \\ 0 & \text{otherwise}\end{cases}$
	
	For $A \in \mathcal{P}(n)$,
	define $f_A(X) = f_A^{(L)}(X) = \prod_{h=1}^s(\langle X, v_A \rangle - l_h)$.
	
	Thus $f_A(X) = \prod_{h=1}^s(\sum_{i \in A}X_i - l_h)$.
	
	For $f \in \mathbb{F}_p[X]$, its multilinear form $\tilde{f}(X)$ is obtained from $f$ by replacing each exponent $\geq 1$ with $1$.
	Then $\mathbb{F}_p[X] \to M[X]$, $f \mapsto \tilde{f}$ is a linear map.
	If $v \in \{0,1\}^n \subset \mathbb{F}_p^n$,
	then $f(v) = \tilde{f}(v)$.
	
	To avoid clutter, we'll write $f_i$ for $f_{A_i}$,
	$v_i$ for $v_{A_i}$.
	Note that
	\begin{align*}
		\tilde{f_i}(v_j) &= f_i(v_j)\\
		&= \prod_{h=1}{s}(\abs{A_i \cap A_j} - l_h) \\
		&= \begin{cases}
		c_i \neq 0 & j=i \\
		0 & \text{otherwise}
		\end{cases}
	\end{align*}
	Hence, $\{\tilde{f}_1,\, \tilde{f}_2,\, \dots,\, \tilde{f}_m \}$ is independent.
	Indeed, if $\sum_i \lambda_i \tilde{f}_i = 0 \in \mathbb{F}_p[X]$ then
	$(\sum_i \lambda_i \tilde{f}_i)(v_j) = \lambda_jc_j = 0$,
	so $\lambda_j = 0$.
	But $\tilde{f}_i \in M_{n,s} =$ vector space of multilinear polynomials of degree $\leq s$.
	
	Hence $m = \abs{\mathcal{A}} \leq \dim M_{n,s} = \sum_{i=0}^s {n \choose i}$.
\end{proof}

\begin{theorem}[RW 1975]
	Let $p$ be a prime,
	$L = \{l_1, \dots, l_s\}$ a set of $s$ integers
	and let $\mathcal{A} = {A_1, \dots, A_m} \subset [n]^{(r)}$ be such that $r \not\in L \mod p$
	and $\abs{A_i \cap A_j} \in L$ for all $i \neq j$.
	Then $\abs{\mathcal{A}} \leq {n \choose s}$.
\end{theorem}
\begin{proof}
	Proceed as before:
	we get $\tilde{f}_1, \dots, \tilde{f}_m \in M_{n,s}$.
	For $I \in [n]^{(\leq s-1)}$,
	define $p_I(X) = (\prod_{i \in I} X_i)(\sum_1^n X_i -r)$.
	Then $p_I(v_L) = 0$.
	Let $\tilde{p}_I$ be the multilinear form of $p_I$.
	
	Claim: $\{\tilde{f}_i \,|\, 1 \leq i \leq m \} \cup \{\tilde{p}_I \,|\, I \in [n]^{(\leq s-1)}\}$
	is an independent set in $M_{n,s}$.
	
	Indeed, suppose $F=\sum_1^m \lambda_i \tilde{f}_i + \sum_{\abs{I}\leq s-1} \mu_I \tilde{p}_I = 0$.
	
	Evaluating $F$ at $v_h$ (characteristic function of $A_h$)
	the second sum is 0,
	so $F(v_h) = \lambda_h c_h$ so $\lambda_h =0$.
	Thus every $\lambda_i$ is 0,
	$$G = \sum_{\abs{I} \leq s-1} \mu_I \tilde{p}_I = 0$$
	
	Let $I_1,\, I_2,\, \dots,\, I_t$ be an enumeration of $[n]^{(\leq s-1)}$ such that if $i<j$ then $\abs{I_i} \leq \abs{I_j}$.
	
	Writing $w_i$ for the characteristic vector of $I_i$,
	$$\tilde{p}_{I_i}(w_j) = \begin{cases}
		\abs{I_i}-r \neq 0 & j=i \\
		0 & j<i
	\end{cases}$$
	
	Hence $\{\tilde{p}_I \,|\, I \in [n]^{(\leq s-1)} \}$ is an independent set in $M_{n,s}$.
	The claim is proved.
	
	Therefore
	$$\mathcal{A} + \sum_{i=0}^{s-1}{n \choose i} \leq \sum_{i=0}^s {n \choose i}$$
	$$\implies \mathcal{A} \leq {n \choose s}$$
\end{proof}

Frankl (1981): how large can a 3-wise intersecting family be?

Conjecture: $\mathcal{A} = o(2^n)$.

\begin{definition}
	$\mathcal{A}$ and $\mathcal{B} \subset \mathcal{P}(n)$ are \textbf{cross-intersecting} if
	$A \cap B \neq \emptyset\ \forall A \in \mathcal{A}$, $B \in \mathcal{B}$.
\end{definition}

\begin{definition}
	$\mathcal{A}$ is symmetric if its automorphism group is transitive on $[n]$.
\end{definition}

\begin{theorem}
	If $\mathcal{A} \subset \mathcal{P}(n)$ is a 3-wise intersecting symmetric family then $\mathcal{A}=o(2^n)$;
	in fact, $\mathcal{A} \leq \frac{2^n}{n^{1/8}}$ if $n$ is large.
\end{theorem}
\begin{proof}\renewcommand{\qedsymbol}{}
	Let $J(\mathcal{A}) = \{A \cap B \,|\, A,B \in \mathcal{A}\}$.
	$\mathcal{A}$ and $J(\mathcal{A})$ are cross-intersecting.
	
	$$\mathbb{P}_{\frac{1}{2}}(\mathcal{A}) = \delta \implies \mathbb{P}_{\frac{1}{4}}(J(\mathcal{A})) \geq \delta^2$$
	$$\mathbb{P}_{\frac{1}{4}}(J(\mathcal{A})) \geq \delta^2 \implies \mathbb{P}_{\frac{3}{4}} \leq 1-\delta^2$$
	$$\mathbb{P}_{\frac{1}{2}}(\mathcal{A}) > \delta^2 \implies \mathbb{P}_{\frac{1}{2}+\epsilon}(\mathcal{A}) > 1-\delta^2$$
	
	Friedgut and Kalai:
	If $\mathcal{A}$ is increasing and symmetric then
	$$\mathbb{P}_p(\mathcal{A}) > \epsilon \implies \mathbb{P}_q(\mathcal{A}) > 1-\epsilon$$
	where $q = \min\{1,\, p+\frac{\log(\frac{1}{\epsilon})}{\log n}\}$
	
	We may assume $\mathcal{A}$ is increasing.
\end{proof}

\begin{lemma}
	$\mathbb{P}_{\frac{1}{2}}(\mathcal{A}) = \delta \implies \mathcal{P}_{\frac{1}{4}}(J(\mathcal{A})) \geq \delta^2$.
	\label{74}
\end{lemma}
\begin{proof}
	Set $N_j = \abs{J(\mathcal{A}) \cap [n]^{(j)}}$.
	
	Define
	\begin{align*}
	F: \mathcal{A} \times \mathcal{A} &\to J(\mathcal{A}) \\
	(A, B) &\mapsto A \cap B
	\end{align*}
	
	Then $\forall C \in J(\mathcal{A})$, $\abs{F^{-1}(C)} \leq 3^{n-j} \qquad (j=\abs{C})$
	
	$\abs{\mathcal{A}}^2 \leq \sum N_j 3^{n-j}$, hence
	\begin{align*}
		\mathbb{P}_{\frac{1}{4}} &= \sum_{j=1}^n \left(\frac{1}{4}\right)^j \left(\frac{3}{4}\right)^{n-j}N_j \\
		&= 2^{-2n}\sum N_j 3^{n-j} \\
		& \geq \mathbb{P}_{\frac{1}{2}}(\mathcal{A})^2 = \delta^2
	\end{align*}
\end{proof}

\begin{lemma}
	If $\mathcal{A}$ and $\mathcal{B}$ are cross-intersecting then
	$\mathbb{P}_p(\mathcal{A}) + \mathbb{P}_{1-p}(\mathcal{B}) \leq 1$.
\end{lemma}
\begin{proof}
	$\mathcal{B}^c = \{[n] \backslash B \,|\, B \in \mathcal{B} \}$.
	Then $\mathcal{A} \cap \mathcal{B}^c = \emptyset$.
	
	Also,
	\begin{align*}
		\mathbb{P}_p(\mathcal{B}^c) &= \mathbb{P}_{1-p}(\mathcal{B}) \\
		\implies \mathbb{P}_p(\mathcal{A}) + \mathbb{P}_{1-p}(\mathcal{B}) 
		&= \mathbb{P}_p(\mathcal{A}) + \mathbb{P}_p(\mathcal{B}^c) \leq 1
	\end{align*}
\end{proof}

\begin{lemma}
	If $\mathcal{A}$ is an increasing, intersecting family then
	$\mathbb{P}_{\frac{1}{2}} = \delta \implies \mathbb{P}_q(\mathcal{A}) \geq 1-\delta^2$,
	where $q=\frac{1}{2} + \frac{\log(1/\delta^2)}{\log n}$.
\end{lemma}
\begin{proof}
	$\mathbb{P}_\frac{1}{2} > \delta^2$, apply FK.
\end{proof}

\begin{proof}[Proof of Theorem 3 cont.]
	We may assume $\mathcal{A}$ is increasing,
	set $J(\mathcal{A})$ as before.
	Suppose $\mathbb{P}_\frac{1}{2}(\mathcal{A}) = \delta$.
	Then $\mathbb{P}_\frac{1}{4}(J(\mathcal{A})) \geq \delta^2$.
	
	Hence by Lemma \ref{74},
	$\mathbb{P}_\frac{1}{4}(J(\mathcal{A})) + \mathbb{P}_\frac{3}{4}(\mathcal{A}) \leq 1$,
	so $\mathbb{P}_\frac{3}{4}(\mathcal{A}) \leq 1-\delta^2$.
	But $\mathbb{P}_\frac{1}{2}(\mathcal{A}) = \delta > \delta^2$,
	so for $q=\frac{1}{2} + \frac{2\log(1/\delta)}{\log n}$,
	$\mathbb{P}_q(\mathcal{A}) \geq 1-\delta^2$.
	
	Hence $q > \frac{3}{4}$,
	$\frac{2\log(1/\delta)}{\log n} > \frac{1}{4}$,
	$\delta < n^{-1/8}$.
\end{proof}
\end{document}