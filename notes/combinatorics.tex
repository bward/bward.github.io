\documentclass[a4paper]{article}
\title{Part III Combinatorics}
\author{Based on lectures by Prof B. Bollob\'{a}s}
\date{Michaelmas 2016\\University of Cambridge}
\usepackage{mathtools}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{textcomp}
\usepackage{enumitem}
\usepackage{graphicx}
\usepackage{tikz-cd}
\usepackage{enumitem}
\newtheorem*{definition}{Definition}
\newtheorem*{conjecture}{Conjecture}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{prop}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\renewcommand{\baselinestretch}{1.3}
\newcommand*\conj[1]{\overline{#1}}
\newcommand*\dom[1]{\textnormal{dom}\,#1}
\newcommand*\cod[1]{\textnormal{cod}\,#1}
\newcommand*\ob[1]{\textnormal{ob}\,#1}
\newcommand*\mor[1]{\textnormal{mor}\,#1}
\newcommand*\abs[1]{\left|#1\right|}
\newcommand*\norm[1]{\abs{\abs{#1}}}
\begin{document}
\maketitle
\tableofcontents

\section{Introduction}
Let $X, Y, \dots$ be sets
\begin{definition}
	We call $\mathcal{A}\subset \mathcal{P}(X)$ a \textbf{set system} or \textbf{family of sets}. $\mathcal{A}$ is naturally identified with a bipartite graph $G_\mathcal{A}(U,W)$ with $U=\mathcal{A}$, $W=\bigcup_{A\in\mathcal{A}}A$ or $W=X$. Indeed, $Ax\in E(G_\mathcal{A}) \iff x \in A$.
\end{definition}

\begin{definition}
	Given $\mathcal{A}\in\mathcal{P}(X)$, a \textbf{set of distinct representatives} (SDR) is an injection $f:\mathcal{A}\to X$ s.t. $f(A)\in A$ $\forall A \in \mathcal{A}$. In its bipartite graph, an SDR corresponds to a complete matching $U \to W$.
\end{definition}

\begin{theorem}[Hall, 1935]
	A set system $\mathcal{A}$ has an SDR if $\forall \mathcal{A}'\subset\mathcal{A}$, $\abs{\cup_{A\in\mathcal{A}'}A} \geq \abs{\mathcal{A}}'$.
\end{theorem}
\setcounter{theorem}{0}
\renewcommand{\thetheorem}{\arabic{theorem}'}
\begin{theorem}
	A bipartite graph $G(U,W)$ has a complete matching $U \to W$ if $\forall S \subset U$, $\abs{\Gamma(S)} \geq \abs{S}$
\end{theorem}
\renewcommand{\thetheorem}{\arabic{theorem}}
\begin{corollary}
	Suppose $G(U, W)$ bipartite, $d(u) \geq d(w)$ $\forall u \in U,\ w \in W$. Then $\exists$ a complete matching $U \to W$.
\end{corollary}

\begin{definition}
	A bipartite graph $G(U,W)$ is $(r,s)$\textbf{-regular} if $d(u)=r$ and $d(w)=s$ $\forall u\in U$, $w \in W$.
\end{definition}

Instant from Cor 2: if $G(U,W)$ is $(r,s)$-regular then $\exists$ a complete matching from $U$ to $W$ if $\abs{U} \leq \abs{W}$.

\begin{corollary}
	Let $0 \leq i,j \leq n$, ${n \choose i} \leq {n \choose j}$. Then $\exists$ a complete matching $f: [n]^{(i)} \to [n]^{(j)}$ s.t. $f(A) \subset A$ if $j \leq i$, and $f(A) \supset A$ if $i \leq j$.
\end{corollary}

\begin{theorem}
	Let $G=G(U,W)$ be a connected $(r,s)$-regular graph. Then for $\emptyset \neq A \subset U$,
	$$\frac{\abs{\Gamma(A)}}{\abs{W}} \geq \frac{\abs{A}}{\abs{U}}$$
	Also, equality holds iff $A=U$.
\end{theorem}

The \textbf{cube} $Q^n \cong \mathcal{P}(n) \cong [2]^n =$ set of all 0, 1 sequences of length $n$. $Q^n$ is also a graph: $AB$ is an edge if $\abs{A \vartriangle B}=1$. It is also a poset: $A<B$ if $A \subset B$.

$Q^n$ has a natural orientation: $\overrightarrow{AB}$ if $A=B \cup \{a\}$.

\begin{center}
	\begin{tikzcd}
		& 123 \arrow[ld] \arrow[d] \arrow[rd]& \\
		12 \arrow[d] \arrow[rd] & 13 \arrow[ld] \arrow[rd] & 23 \arrow[ld] \arrow[d] \\
		1 \arrow[rd] & 2 \arrow[d] & 3 \arrow[ld] \\
		& \emptyset &
	\end{tikzcd}
\end{center}

The order on $Q^n \cong \mathcal{P}(n)$ is induced by this oriented graph.
\section{Sperner Systems}
\setcounter{theorem}{0}
\begin{definition}
	A set system $\mathcal{A} \subset \mathcal{P}(n)$ is \textbf{Sperner} if $A,B \in \mathcal{A}$, $A \neq B \implies A \not\subset B$
\end{definition}
\begin{theorem}[Sperner, 1928]
	If $\mathcal{A} \subset \mathcal{P}(n)$ is Sperner then $$\abs{\mathcal{A}} \leq {n \choose \lfloor\frac{n}{2}\rfloor}$$
\end{theorem}
\begin{definition}
	The \textbf{weight} $w(A)$ of a set $A \in \mathcal{P}(n)$ is $w(A) = \frac{1}{{n \choose \abs{A}}}$
\end{definition}
\begin{theorem}
	Let $\mathcal{A}$ be a Sperner system on $X$, $\abs{X}=n$. Then $$w(\mathcal{A}) = \sum_{A \in \mathcal{A}}w(A) \leq 1$$
\end{theorem}

\begin{corollary}
	If $\mathcal{A} \in \mathcal{P}(n)$ is a Sperner system then $\abs{\mathcal{A}} \leq {n \choose {\lfloor \frac{n}{2} \rfloor}}$, with equality $\iff \mathcal{A}$ is $X^{\lfloor n/2 \rfloor}$ or $X^{\lceil n/2 \rceil}$.
\end{corollary}

\begin{definition}
	$\mathcal{A} \in \mathcal{P}(n)$ is \textbf{k-Sperner} if it does not contain $$A_1 \subsetneq A_2 \subsetneq \dots \subsetneq A_{k+1}$$
\end{definition}

Note that Sperner = 1-Sperner.

\begin{corollary}[Erd\H{o}s, 1945]
If $\mathcal{A} \subset \mathcal{P}(n)$ is $k$-Sperner then $\abs{\mathcal{A}}$ is at most the sum of the $k$ largest binomial coefficients.	
\end{corollary}

\begin{theorem}[Erd\H{o}s, 1945]
	Let $x_1, \dots, x_n \in \mathbb{R}$, $x_i \geq 1$. Then the number of sums $\sum_1^n \pm x_i$ in an open interval $J$ of length $2k$ is at most the sum of the $k$ largest binomial coefficients.
\end{theorem}

\begin{definition}
	A chain $A_o \subset A_1 \subset \dots \subset A_k$ is \textbf{symmetric} if $\abs{A_{i+1}} = \abs{A_i} + 1\ \forall i$ and $\abs{A_o} + \abs{A_k} = n$.
\end{definition}

\begin{theorem}[Kleitman and Katona]
	$\mathcal{P}(n)$ has a decomposition into symmetric chains.
\end{theorem}

Take such a partition $\mathcal{P}(n) = \bigcup_{i=1}^k \mathcal{C}_i$, $j = {n \choose {\lfloor\frac{n}{2}\rfloor}}$. There is one chain of length $n+1$, $n-1$ chains of length $n-1$, etc: there are ${n \choose i} - {n \choose {i-1}}$ chains of length $n+1-2i$.

Let $E$ be a normed space, let $x_1, \dots, x_n \in E$, $\norm{x_i} \geq 1 \ \forall i$, for $A \in \mathcal{P}(n)$ let $x_A = \sum{i \in A} x_i$.
\begin{conjecture}[Erd\H{o}s, 1945]
	If $\mathcal{A} \in \mathcal{P}(n)$ s.t. $\norm{x_A - x_B} < 1$ then $\abs{\mathcal{A}} \leq {n \choose {\lfloor\frac{n}{2}\rfloor}}$
\end{conjecture}

\begin{definition}
	Call $\mathcal{D} \in \mathcal{P}(n)$ \textbf{scattered} if $\norm{x_A - x_B} \geq 1 \ \forall A,B \in \mathcal{D}$. Call a partition $\mathcal{P}(n) = \bigcup_{i=1}^s \mathcal{D}_i$ \textbf{symmetric} if there are precisely ${n \choose i} - {n \choose i-1}$ sets $\mathcal{D}_i$ of cardinality $n+1-2i$.
\end{definition}

\begin{theorem}(Kleitman, 1970)
	$E, (x_i)_1^n$ as before. Then $\mathcal{P}(n)$ has a symmetric partition into scattered sets.
\end{theorem}

\begin{theorem}(Kleitman, 1970)
	If $\mathcal{A} \in \mathcal{P}(n)$ s.t. $\norm{x_A-x_B} < 1$ then $\abs{\mathcal{A}} \leq {n \choose {\lfloor\frac{n}{2}\rfloor}}$
\end{theorem}

\section{The Kruskal-Katona Theorem}
\setcounter{theorem}{0}
We know: if $\mathcal{A} \subset X^{(r)}$ then $\partial \mathcal{A}$ (the \textbf{lower shadow} of $\mathcal{A}$), defined by $$\partial \mathcal{A} = \{B \in X^{(r-1)} \,|\, B \subset A \text{ for some } A \in \mathcal{A}\}$$ satisfies
\begin{align*}
\abs{\partial \mathcal{A}} &\geq \abs{\mathcal{A}} \frac{{n \choose r-1}}{{n \choose r}} \\
&= \abs{\mathcal{A}}\frac{r}{n-r+1}
\end{align*}
with equality $\iff \mathcal{A}$ is $\emptyset$ or $X^{(r)}$.

What about in between? What is $\mathcal{B} \in X^{(r)}$ s.t. $\abs{\mathcal{B}} = \abs{\mathcal{A}}$ and $\abs{\partial\mathcal{B}} \leq \abs{\partial\mathcal{A}}$?

$\exists \mathcal{B}_1, \mathcal{B}_2, \dots \in X^{(r)}$ s.t. $\abs{\mathcal{B}_m} = m$ and $\abs{\partial \mathcal{B}_m} \leq \abs{\partial \mathcal{A}} \ \forall \mathcal{A} \subset X^{(r)}$ where $\abs{\mathcal{A}} = m$.

Incredibly luckily, we have a sequence of nested extremal sets. Equivalently, $\exists$ total order on $X^{(r)}$ s.t. the first $m$ sets form $\mathcal{B}_m$.

\begin{definition}
	Define the \textbf{colex} total order on $X^{(r)}$ by $A<B$ if $\max(A \Delta B) \in B$.
\end{definition}

Aim: given $m$ and $r$, would like to find $\mathcal{B} \subset X^{(r)}$, $\abs{\mathcal{B}} = m$ s.t. $\abs{\partial\mathcal{B}} \leq \abs{\partial\mathcal{A}}\ \forall \mathcal{A} \subset X^{(r)}$, $\abs{\mathcal{A}} = m$.

Define $\mathcal{B}^{(r)}(m_r, \dots, m_s),\, m_r > m_{r-1} > \dots > m_s \geq s$ as follows:
\begin{align*}
\mathcal{B}^{(r)} = [m_r]^{(r)} &\cup ([m_{r-1}]^{(r-1)} + \{m_{r} + 1\}) \\
								&\cup ([m_{r-2}]^{(r-2)} + \{m_{r-1} +1, m_r + 1\}) \\
								&\cup \dots \\
								&\cup ([m_{s}]^{(s)} + \{m_{s+1} +1, m_{s+2} + 1, \dots, m_r + 1\}) \\
\end{align*}

Set $b^{(r)}(m_r, \dots, m_s) = \abs{\mathcal{B}^{(r)}(m_r, \dots, m_s)} = \sum_{j=s}^r {m_j \choose j}$.

$$\partial\mathcal{B}^{(r)}(m_r, \dots, m_s) = \mathcal{B}^{(r-1)}(m_r, \dots, m_s)$$

This has cardinality $b^{(r-1)}(m_r, \dots, m_s) = \sum_{j=s}^r {m_j \choose j-1}$.

\begin{lemma}
	For $l, r \in \mathbb{N}$ $\exists!\ m_r > \dots > m_s$  s.t. $l = \sum_{j=s}^r {m_j \choose j}$; the initial segment of $X^{(r)}$ in colex, consisting of $l$ sets, is $\mathcal{B}^{(r)}(m_r, \dots, m_s)$.
\end{lemma}

\begin{definition}
	Let $i \neq j \in X$, $A \in \mathcal{P}(X)$. Define the \textbf{ij-compression} $$A_{ij} = C_{ij}(A) = \begin{cases}
	(A\backslash \{j\}) \cup \{i\} & \text{if } j \in A,\, i \not\in A \\
	A & \text{otherwise}
	\end{cases}$$
	Given $\mathcal{A} \subset \mathcal{P}(n), A \in \mathcal{A}$ $$C_{i,j,\mathcal{A}}(A) = \begin{cases}
	A_{ij} & \text{if } A_{ij} \not\in \mathcal{A} \\
	A & \text{otherwise}
	\end{cases}$$
	Also,
	\begin{align*}
	C_{ij}(\mathcal{A}) &= \{C_{i,j,\mathcal{A}} \,|\, A \in \mathcal{A} \} \\
	&= \{C_{ij}(A) \,|\, A \in \mathcal{A}\} \cup \{A \in \mathcal{A} \,|\, C_{ij}(A) \in \mathcal{A}\}
	\end{align*}
	For $\mathcal{A} \in X^{(r)}$,
	\begin{align*}
	\mathcal{A}_{ij} &= \{A \in \mathcal{A} \,|\, \{i,j\} \subset A \} \\
	\mathcal{A}_i &= \{A \in \mathcal{A} \,|\, i \in A,\, j \not\in A \} \\
	\mathcal{A}_\emptyset &= \{A \in \mathcal{A} \,|\, A \cap \{i, j\} = \emptyset \} \\
	\mathcal{A}_j &= \{A \in \mathcal{A} \,|\, i \not\in A,\, j \in A \} \\
	\end{align*}
\end{definition}
$C_{ij}: \mathcal{A} \mapsto C_{ij}(\mathcal{A})$ keeps $\mathcal{A}_\emptyset \cup \mathcal{A}_i \cup \mathcal{A}_{ij}$ fixed, and maps $\mathcal{A}_j$ into sets like those in $\mathcal{A}_i$.

\begin{lemma}
	For $\mathcal{A} \subset X^{(r)}$, $\partial C_{ij}(\mathcal{A}) \subseteq C_{ij}(\partial \mathcal{A})$. In particular, the cardinality decreases.
\end{lemma}
\begin{proof}
	Let $B \in \partial C_{ij}(\mathcal{A})$ and let $A \in \mathcal{A}$ s.t. $B \subset C_{i,j,\mathcal{A}}(A)$.
	\begin{enumerate}[label=\roman*.]
		\item Suppose $B$ meets $\{i,j\}$ in 0 or 2 elements. Then $B \subset A$ so $B \in \partial A$ and $B \in C_{ij}(\partial \mathcal{A})$
		\item Suppose $i \in B$, $j \not\in B$. Then either $B$ or $(B \backslash \{i\}) \cup \{j\}$ belongs to $\partial \mathcal{A}$, so $B \in C_{ij}(\partial \mathcal{A})$.
		\item Suppose $j \in B$, $i \not\in B$. Then both $B$ and $(B \backslash \{j\}) \cup \{i\}$ belong to $\partial\mathcal{A}$, so both belong to $C_{ij}(\partial\mathcal{A})$.
	\end{enumerate}
\end{proof}
\begin{definition}
	Call $\mathcal{A} \subset X^{(r)}$ \textbf{left-compressed} if $C_{ij}(\mathcal{A}) = \mathcal{A}\ \forall i < j$.
\end{definition}

\begin{lemma}
	Let $\mathcal{A} \subset X^{(r)}$. Then $\exists$ a left-compressed family $\mathcal{B} \subset X^{r}$ s.t. $\abs{\mathcal{B}}=\abs{\mathcal{A}}$ and $\abs{\partial\mathcal{B}} \leq \abs{\partial\mathcal{A}}$.
\end{lemma}
\begin{proof}
	Define $\mathcal{A}_0 = \mathcal{A}, \mathcal{A}_1, \dots$ as follows: having reached $\mathcal{A}_k$, if $\mathcal{A}_k$ is not left-compressed, pick $i < j$ s.t. $C_{ij}(\mathcal{A}_k) \neq \mathcal{A}_k$, and set $\mathcal{A}_{k+1} = C_{ij}(\mathcal{A}_k)$
	
	This sequence has to end because $$\sum_{A \in \mathcal{A}_{k+1}} \sum_{a \in A} a < \sum_{A \in \mathcal{A}_{k}} \sum_{a \in A} a$$ let $\mathcal{A}_l$ be the last term: this will do for $\mathcal{B}$.
\end{proof}

\begin{theorem}[Kruskal-Katona, 1963 and 1968]
	Let $\mathcal{A} \subset X^{(r)}$, $m = \abs{\mathcal{A}}$. Then
	\begin{align*}
		\abs{\partial\mathcal{A}} &\geq \abs{\partial\mathcal{B}_m^{(r)}} \\
		&= \abs{\partial\mathcal{B}^{(r)}(m_r, m_{r-1}, \dots, m_s)} \\
			&= b^{(r-1)}(m_r, \dots, m_s)
	\end{align*}
\end{theorem}
\begin{proof}
	Induction on $r$ and then $m$ (or on $r+m$). $r=1 \checkmark \ m=1 \checkmark$
	
	Induction step: we may assume that $\mathcal{A}$ is left-compressed. Set $Y = X \backslash \{1\}$. Then $\mathcal{A} = (\mathcal{A}_1 + \{1\}) \cup \mathcal{A}_0$, where $\mathcal{A}_1 \subset Y^{(r-1)}$, $\mathcal{A}_0 \subset Y^{(r)}$.
	
	$m=\abs{\mathcal{A}} = \abs{\mathcal{A}_0} + \abs{\mathcal{A}_1}$, $\partial \mathcal{A}_0 \subset \mathcal{A}_1$, $\partial(\mathcal{A}_1 + \{1\}) = \mathcal{A}_1 \cup (\partial\mathcal{A}_1 + \{1\})$.
	
	In particular, $\abs{\partial\mathcal{A}} = \abs{\mathcal{A}_1} + \abs{\partial\mathcal{A}_1}$.
	
	For $\mathcal{A} = \mathcal{B}^{(r)}(m_r, \dots, m_s)$, $$\abs{\mathcal{A}_1} = b^{(r-1)}(m_r-1,\dots,m_s-1)$$ $$\abs{\mathcal{A}_0} = b^{(r)}(m_r-1,\dots,m_s-1)$$
	
	Suppose $\abs{\mathcal{A}_0} > b^{(r)}(m_r-1,\dots,m_s-1)$. Then by the induction hypothesis, $\abs{\partial\mathcal{A}_0} \geq b^{(r-1)}(m_r-1,\dots,m_s-1)$. Hence $\abs{\mathcal{A}_1} \geq b^{(r-1)}(m_r-1, \dots, m_s-1)$ and so $\abs{\partial \mathcal{A}} \geq b^{(r-1)}(m_r, \dots, m_s)$.
	
	But if $\abs{\mathcal{A}_0} \leq b^{(r)}(m_r-1, \dots, m_s-1)$, $\abs{\mathcal{A}_1}$ is again $\geq b^{(r-1)}(m_r-1,\dots,m_s-1)$. Done as before.
\end{proof}

Soft version:
\begin{theorem}[Lov\'asz, 1979]
	If $\mathcal{A} \subset X^{(r)}$ satisfies $\abs{\mathcal{A}} = {X \choose r}$ then $\abs{\partial\mathcal{A}} \geq {X \choose r-1}$.
\end{theorem}
\begin{proof}
	Induction on $r$ and $m = \abs{\mathcal{A}}$. As before, $\mathcal{A}_0, \mathcal{A}_1$. Note that $\mathcal{A}_1 \geq {X-1 \choose r-1}$ since otherwise $\mathcal{A}_0 > {X-1 \choose r}$. But then $\abs{\partial\mathcal{A}_0} \geq {X-1 \choose r-1}$, contradicting the fact that $\partial\mathcal{A}_0 \subset \mathcal{A}_1$.
	
	But if $\abs{\mathcal{A}_1} \geq {X-1 \choose r-1}$ then $$\abs{\mathcal{A}_1} + \abs{\partial\mathcal{A}_1} \geq {X-1 \choose r-1} + {X-1 \choose r-2} = {X \choose r-1}$$
\end{proof}

\begin{definition}
	Define the \textbf{uniform probability measure} on $X^{(r)}$, $\abs{X}=n$ as $\mathbb{P}_{n,r}(A) = \frac{1}{{n \choose r}}$, and for $\mathcal{A} \subset X^{(r)}$, $\mathbb{P}_{n-r}(\mathcal{A}) = \frac{\abs{\mathcal{A}}}{{n \choose r}}$.
\end{definition}

\begin{definition}
	$\mathcal{A} \subset \mathcal{P}(n)$ is \textbf{monotone decreasing} if $A \subset B \in \mathcal{A} \implies A \in \mathcal{A}$.
\end{definition}
\end{document}